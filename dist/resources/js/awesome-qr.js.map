{"version":3,"sources":["../../../resources/js/awesome-qr.js"],"names":["AwesomeQRCode","QR8bitByte","data","mode","QRMode","MODE_8BIT_BYTE","parsedData","i","l","length","byteArray","code","charCodeAt","push","Array","prototype","concat","apply","unshift","getLength","buffer","write","put","QRCodeModel","typeNumber","errorCorrectLevel","modules","moduleCount","dataCache","dataList","addData","newData","isDark","row","col","Error","getModuleCount","make","makeImpl","getBestMaskPattern","test","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","r","c","minLostPoint","pattern","lostPoint","QRUtil","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","cs","y","x","dark","beginFill","moveTo","lineTo","endFill","pos","getPatternPosition","j","bits","getBCHTypeNumber","mod","Math","floor","getBCHTypeInfo","inc","bitIndex","byteIndex","mask","getMask","PAD0","PAD1","rsBlocks","QRRSBlock","getRSBlocks","QRBitBuffer","getLengthInBits","totalDataCount","dataCount","putBit","createBytes","offset","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","max","rsPoly","getErrorCorrectPolynomial","rawPoly","QRPolynomial","modPoly","modIndex","get","totalCodeCount","index","MODE_NUMBER","MODE_ALPHA_NUM","MODE_KANJI","QRErrorCorrectLevel","L","M","Q","H","QRMaskPattern","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","d","getBCHDigit","digit","errorCorrectLength","a","multiply","QRMath","gexp","type","qrCode","sameCount","count","darkCount","ratio","abs","glog","n","LOG_TABLE","EXP_TABLE","num","shift","undefined","e","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","bufIndex","bit","QRCodeLimitLength","_isSupportCanvas","CanvasRenderingContext2D","_getAndroid","android","sAgent","navigator","userAgent","aMat","toString","match","parseFloat","Drawing","htOption","_htOption","draw","oQRCode","nCount","nWidth","size","nHeight","aHTML","colorDark","colorLight","nLeftMarginTable","elTable","offsetWidth","nTopMarginTable","offsetHeight","style","margin","clear","_onMakeImage","_elImage","src","_elCanvas","toDataURL","display","_android","factor","window","devicePixelRatio","drawImage","image","sx","sy","sw","sh","dx","dy","dw","dh","nodeName","arguments","_safeSetDataURI","fSuccess","fFail","self","_fFail","_fSuccess","_bSupportDataURI","el","document","createElement","fOnError","call","fOnSuccess","onabort","onerror","onload","_bIsPainted","width","height","_oContext","getContext","alt","_callback","callback","_bindElement","bindElement","_tCanvas","rawSize","rawMargin","ceil","rawViewportSize","whiteMargin","backgroundDimming","rawWidth","rawHeight","viewportSize","dotScale","save","translate","rect","fillStyle","fill","backgroundImage","autoColor","avgRGB","getAverageRGB","g","b","binarize","agnPatternCenter","fillRect","edgeCenter","agnX","agnY","drawAgnProtector","drawAgn","xyOffset","bIsDark","isBlkPosCtr","isBlkPos","bProtected","nLeft","nTop","strokeStyle","lineWidth","inAgnRange","logoImage","logoScale","logoMargin","logoCornerRadius","restore","logoSize","prepareRoundedCornerClip","clip","pixels","getImageData","threshold","parseInt","binarizeThreshold","R","G","B","sum","rgb2gray","putImageData","_fCanvas","_fContext","getElementById","elStyle","console","error","makeImage","isPainted","clearRect","round","nNumber","ctx","w","h","beginPath","arcTo","closePath","context","centerX","centerY","_getTypeNumber","sText","nCorrectLevel","nType","_getUTF8Length","len","nLimit","replacedText","encodeURI","replace","create","vOption","correctLevel","text","useSVG","svgDrawer","_oQRCode","_oDrawing","makeCode","CorrectLevel","imgEl","blockSize","defaultRGB","canvas","rgb","naturalHeight","naturalWidth","factory","exports","module","define","amd","eventUtil"],"mappings":"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","file":"awesome-qr.js","sourcesContent":["/**\n * @fileoverview\n * Awesome-qr.js\n *\n * @author Makito <sumimakito@hotmail.com>\n * @see <a href=\"https://www.keep.moe/\" target=\"_blank\">https://www.keep.moe/</a>\n * @see <a href=\"https://github.com/SumiMakito/Awesome-qr.js\" target=\"_blank\">https://github.com/SumiMakito/Awesome-qr.js</a>\n */\n/**\n * @fileoverview\n * - Using the 'QRCode for Javascript library'\n * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.\n * - this library has no dependencies.\n *\n * @author davidshimjs\n * @see <a href=\"http://www.d-project.com/\" target=\"_blank\">http://www.d-project.com/</a>\n * @see <a href=\"http://jeromeetienne.github.com/jquery-qrcode/\" target=\"_blank\">http://jeromeetienne.github.com/jquery-qrcode/</a>\n */\nvar AwesomeQRCode;\n\n(function () {\n    //---------------------------------------------------------------------\n// QRCode for JavaScript\n//\n// Copyright (c) 2009 Kazuhiko Arase\n//\n// URL: http://www.d-project.com/\n//\n// Licensed under the MIT license:\n//   http://www.opensource.org/licenses/mit-license.php\n//\n// The word \"QR Code\" is registered trademark of\n// DENSO WAVE INCORPORATED\n//   http://www.denso-wave.com/qrcode/faqpatent-e.html\n//\n//---------------------------------------------------------------------\n    function QR8bitByte(data) {\n        this.mode = QRMode.MODE_8BIT_BYTE;\n        this.data = data;\n        this.parsedData = [];\n        for (var i = 0, l = this.data.length; i < l; i++) {\n            var byteArray = [];\n            var code = this.data.charCodeAt(i);\n            if (code > 0x10000) {\n                byteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);\n                byteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);\n                byteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);\n                byteArray[3] = 0x80 | (code & 0x3F)\n            } else if (code > 0x800) {\n                byteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);\n                byteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);\n                byteArray[2] = 0x80 | (code & 0x3F)\n            } else if (code > 0x80) {\n                byteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);\n                byteArray[1] = 0x80 | (code & 0x3F)\n            } else {\n                byteArray[0] = code\n            }\n            this.parsedData.push(byteArray)\n        }\n        this.parsedData = Array.prototype.concat.apply([], this.parsedData);\n        if (this.parsedData.length != this.data.length) {\n            this.parsedData.unshift(191);\n            this.parsedData.unshift(187);\n            this.parsedData.unshift(239)\n        }\n    }\n\n    QR8bitByte.prototype = {\n        getLength: function (buffer) {\n            return this.parsedData.length\n        }, write: function (buffer) {\n            for (var i = 0, l = this.parsedData.length; i < l; i++) {\n                buffer.put(this.parsedData[i], 8)\n            }\n        }\n    };\n    function QRCodeModel(typeNumber, errorCorrectLevel) {\n        this.typeNumber = typeNumber;\n        this.errorCorrectLevel = errorCorrectLevel;\n        this.modules = null;\n        this.moduleCount = 0;\n        this.dataCache = null;\n        this.dataList = []\n    }\n\n    QRCodeModel.prototype = {\n        addData: function (data) {\n            var newData = new QR8bitByte(data);\n            this.dataList.push(newData);\n            this.dataCache = null\n        }, isDark: function (row, col) {\n            if (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {\n                throw new Error(row + \",\" + col)\n            }\n            return this.modules[row][col]\n        }, getModuleCount: function () {\n            return this.moduleCount\n        }, make: function () {\n            this.makeImpl(!1, this.getBestMaskPattern())\n        }, makeImpl: function (test, maskPattern) {\n            this.moduleCount = this.typeNumber * 4 + 17;\n            this.modules = new Array(this.moduleCount);\n            for (var row = 0; row < this.moduleCount; row++) {\n                this.modules[row] = new Array(this.moduleCount);\n                for (var col = 0; col < this.moduleCount; col++) {\n                    this.modules[row][col] = null\n                }\n            }\n            this.setupPositionProbePattern(0, 0);\n            this.setupPositionProbePattern(this.moduleCount - 7, 0);\n            this.setupPositionProbePattern(0, this.moduleCount - 7);\n            this.setupPositionAdjustPattern();\n            this.setupTimingPattern();\n            this.setupTypeInfo(test, maskPattern);\n            if (this.typeNumber >= 7) {\n                this.setupTypeNumber(test)\n            }\n            if (this.dataCache == null) {\n                this.dataCache = QRCodeModel.createData(this.typeNumber, this.errorCorrectLevel, this.dataList)\n            }\n            this.mapData(this.dataCache, maskPattern)\n        }, setupPositionProbePattern: function (row, col) {\n            for (var r = -1; r <= 7; r++) {\n                if (row + r <= -1 || this.moduleCount <= row + r)continue;\n                for (var c = -1; c <= 7; c++) {\n                    if (col + c <= -1 || this.moduleCount <= col + c)continue;\n                    if ((0 <= r && r <= 6 && (c == 0 || c == 6)) || (0 <= c && c <= 6 && (r == 0 || r == 6)) || (2 <= r && r <= 4 && 2 <= c && c <= 4)) {\n                        this.modules[row + r][col + c] = !0\n                    } else {\n                        this.modules[row + r][col + c] = !1\n                    }\n                }\n            }\n        }, getBestMaskPattern: function () {\n            var minLostPoint = 0;\n            var pattern = 0;\n            for (var i = 0; i < 8; i++) {\n                this.makeImpl(!0, i);\n                var lostPoint = QRUtil.getLostPoint(this);\n                if (i == 0 || minLostPoint > lostPoint) {\n                    minLostPoint = lostPoint;\n                    pattern = i\n                }\n            }\n            return pattern\n        }, createMovieClip: function (target_mc, instance_name, depth) {\n            var qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\n            var cs = 1;\n            this.make();\n            for (var row = 0; row < this.modules.length; row++) {\n                var y = row * cs;\n                for (var col = 0; col < this.modules[row].length; col++) {\n                    var x = col * cs;\n                    var dark = this.modules[row][col];\n                    if (dark) {\n                        qr_mc.beginFill(0, 100);\n                        qr_mc.moveTo(x, y);\n                        qr_mc.lineTo(x + cs, y);\n                        qr_mc.lineTo(x + cs, y + cs);\n                        qr_mc.lineTo(x, y + cs);\n                        qr_mc.endFill()\n                    }\n                }\n            }\n            return qr_mc\n        }, setupTimingPattern: function () {\n            for (var r = 8; r < this.moduleCount - 8; r++) {\n                if (this.modules[r][6] != null) {\n                    continue\n                }\n                this.modules[r][6] = (r % 2 == 0)\n            }\n            for (var c = 8; c < this.moduleCount - 8; c++) {\n                if (this.modules[6][c] != null) {\n                    continue\n                }\n                this.modules[6][c] = (c % 2 == 0)\n            }\n        }, setupPositionAdjustPattern: function () {\n            var pos = QRUtil.getPatternPosition(this.typeNumber);\n            for (var i = 0; i < pos.length; i++) {\n                for (var j = 0; j < pos.length; j++) {\n                    var row = pos[i];\n                    var col = pos[j];\n                    if (this.modules[row][col] != null) {\n                        continue\n                    }\n                    for (var r = -2; r <= 2; r++) {\n                        for (var c = -2; c <= 2; c++) {\n                            if (r == -2 || r == 2 || c == -2 || c == 2 || (r == 0 && c == 0)) {\n                                this.modules[row + r][col + c] = !0\n                            } else {\n                                this.modules[row + r][col + c] = !1\n                            }\n                        }\n                    }\n                }\n            }\n        }, setupTypeNumber: function (test) {\n            var bits = QRUtil.getBCHTypeNumber(this.typeNumber);\n            for (var i = 0; i < 18; i++) {\n                var mod = (!test && ((bits >> i) & 1) == 1);\n                this.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod\n            }\n            for (var i = 0; i < 18; i++) {\n                var mod = (!test && ((bits >> i) & 1) == 1);\n                this.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod\n            }\n        }, setupTypeInfo: function (test, maskPattern) {\n            var data = (this.errorCorrectLevel << 3) | maskPattern;\n            var bits = QRUtil.getBCHTypeInfo(data);\n            for (var i = 0; i < 15; i++) {\n                var mod = (!test && ((bits >> i) & 1) == 1);\n                if (i < 6) {\n                    this.modules[i][8] = mod\n                } else if (i < 8) {\n                    this.modules[i + 1][8] = mod\n                } else {\n                    this.modules[this.moduleCount - 15 + i][8] = mod\n                }\n            }\n            for (var i = 0; i < 15; i++) {\n                var mod = (!test && ((bits >> i) & 1) == 1);\n                if (i < 8) {\n                    this.modules[8][this.moduleCount - i - 1] = mod\n                } else if (i < 9) {\n                    this.modules[8][15 - i - 1 + 1] = mod\n                } else {\n                    this.modules[8][15 - i - 1] = mod\n                }\n            }\n            this.modules[this.moduleCount - 8][8] = (!test)\n        }, mapData: function (data, maskPattern) {\n            var inc = -1;\n            var row = this.moduleCount - 1;\n            var bitIndex = 7;\n            var byteIndex = 0;\n            for (var col = this.moduleCount - 1; col > 0; col -= 2) {\n                if (col == 6) col--;\n                while (!0) {\n                    for (var c = 0; c < 2; c++) {\n                        if (this.modules[row][col - c] == null) {\n                            var dark = !1;\n                            if (byteIndex < data.length) {\n                                dark = (((data[byteIndex] >>> bitIndex) & 1) == 1)\n                            }\n                            var mask = QRUtil.getMask(maskPattern, row, col - c);\n                            if (mask) {\n                                dark = !dark\n                            }\n                            this.modules[row][col - c] = dark;\n                            bitIndex--;\n                            if (bitIndex == -1) {\n                                byteIndex++;\n                                bitIndex = 7\n                            }\n                        }\n                    }\n                    row += inc;\n                    if (row < 0 || this.moduleCount <= row) {\n                        row -= inc;\n                        inc = -inc;\n                        break\n                    }\n                }\n            }\n        }\n    };\n    QRCodeModel.PAD0 = 0xEC;\n    QRCodeModel.PAD1 = 0x11;\n    QRCodeModel.createData = function (typeNumber, errorCorrectLevel, dataList) {\n        var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\n        var buffer = new QRBitBuffer();\n        for (var i = 0; i < dataList.length; i++) {\n            var data = dataList[i];\n            buffer.put(data.mode, 4);\n            buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));\n            data.write(buffer)\n        }\n        var totalDataCount = 0;\n        for (var i = 0; i < rsBlocks.length; i++) {\n            totalDataCount += rsBlocks[i].dataCount\n        }\n        if (buffer.getLengthInBits() > totalDataCount * 8) {\n            throw new Error(\"code length overflow. (\" + buffer.getLengthInBits() + \">\" + totalDataCount * 8 + \")\")\n        }\n        if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n            buffer.put(0, 4)\n        }\n        while (buffer.getLengthInBits() % 8 != 0) {\n            buffer.putBit(!1)\n        }\n        while (!0) {\n            if (buffer.getLengthInBits() >= totalDataCount * 8) {\n                break\n            }\n            buffer.put(QRCodeModel.PAD0, 8);\n            if (buffer.getLengthInBits() >= totalDataCount * 8) {\n                break\n            }\n            buffer.put(QRCodeModel.PAD1, 8)\n        }\n        return QRCodeModel.createBytes(buffer, rsBlocks)\n    };\n    QRCodeModel.createBytes = function (buffer, rsBlocks) {\n        var offset = 0;\n        var maxDcCount = 0;\n        var maxEcCount = 0;\n        var dcdata = new Array(rsBlocks.length);\n        var ecdata = new Array(rsBlocks.length);\n        for (var r = 0; r < rsBlocks.length; r++) {\n            var dcCount = rsBlocks[r].dataCount;\n            var ecCount = rsBlocks[r].totalCount - dcCount;\n            maxDcCount = Math.max(maxDcCount, dcCount);\n            maxEcCount = Math.max(maxEcCount, ecCount);\n            dcdata[r] = new Array(dcCount);\n            for (var i = 0; i < dcdata[r].length; i++) {\n                dcdata[r][i] = 0xff & buffer.buffer[i + offset]\n            }\n            offset += dcCount;\n            var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\n            var rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);\n            var modPoly = rawPoly.mod(rsPoly);\n            ecdata[r] = new Array(rsPoly.getLength() - 1);\n            for (var i = 0; i < ecdata[r].length; i++) {\n                var modIndex = i + modPoly.getLength() - ecdata[r].length;\n                ecdata[r][i] = (modIndex >= 0) ? modPoly.get(modIndex) : 0\n            }\n        }\n        var totalCodeCount = 0;\n        for (var i = 0; i < rsBlocks.length; i++) {\n            totalCodeCount += rsBlocks[i].totalCount\n        }\n        var data = new Array(totalCodeCount);\n        var index = 0;\n        for (var i = 0; i < maxDcCount; i++) {\n            for (var r = 0; r < rsBlocks.length; r++) {\n                if (i < dcdata[r].length) {\n                    data[index++] = dcdata[r][i]\n                }\n            }\n        }\n        for (var i = 0; i < maxEcCount; i++) {\n            for (var r = 0; r < rsBlocks.length; r++) {\n                if (i < ecdata[r].length) {\n                    data[index++] = ecdata[r][i]\n                }\n            }\n        }\n        return data\n    };\n    var QRMode = {MODE_NUMBER: 1 << 0, MODE_ALPHA_NUM: 1 << 1, MODE_8BIT_BYTE: 1 << 2, MODE_KANJI: 1 << 3};\n    var QRErrorCorrectLevel = {L: 1, M: 0, Q: 3, H: 2};\n    var QRMaskPattern = {\n        PATTERN000: 0,\n        PATTERN001: 1,\n        PATTERN010: 2,\n        PATTERN011: 3,\n        PATTERN100: 4,\n        PATTERN101: 5,\n        PATTERN110: 6,\n        PATTERN111: 7\n    };\n    var QRUtil = {\n        PATTERN_POSITION_TABLE: [[], [6, 18], [6, 22], [6, 26], [6, 30], [6, 34], [6, 22, 38], [6, 24, 42], [6, 26, 46], [6, 28, 50], [6, 30, 54], [6, 32, 58], [6, 34, 62], [6, 26, 46, 66], [6, 26, 48, 70], [6, 26, 50, 74], [6, 30, 54, 78], [6, 30, 56, 82], [6, 30, 58, 86], [6, 34, 62, 90], [6, 28, 50, 72, 94], [6, 26, 50, 74, 98], [6, 30, 54, 78, 102], [6, 28, 54, 80, 106], [6, 32, 58, 84, 110], [6, 30, 58, 86, 114], [6, 34, 62, 90, 118], [6, 26, 50, 74, 98, 122], [6, 30, 54, 78, 102, 126], [6, 26, 52, 78, 104, 130], [6, 30, 56, 82, 108, 134], [6, 34, 60, 86, 112, 138], [6, 30, 58, 86, 114, 142], [6, 34, 62, 90, 118, 146], [6, 30, 54, 78, 102, 126, 150], [6, 24, 50, 76, 102, 128, 154], [6, 28, 54, 80, 106, 132, 158], [6, 32, 58, 84, 110, 136, 162], [6, 26, 54, 82, 110, 138, 166], [6, 30, 58, 86, 114, 142, 170]],\n        G15: (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\n        G18: (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),\n        G15_MASK: (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1),\n        getBCHTypeInfo: function (data) {\n            var d = data << 10;\n            while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\n                d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15)))\n            }\n            return ((data << 10) | d) ^ QRUtil.G15_MASK\n        },\n        getBCHTypeNumber: function (data) {\n            var d = data << 12;\n            while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\n                d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18)))\n            }\n            return (data << 12) | d\n        },\n        getBCHDigit: function (data) {\n            var digit = 0;\n            while (data != 0) {\n                digit++;\n                data >>>= 1\n            }\n            return digit\n        },\n        getPatternPosition: function (typeNumber) {\n            return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1]\n        },\n        getMask: function (maskPattern, i, j) {\n            switch (maskPattern) {\n                case QRMaskPattern.PATTERN000:\n                    return (i + j) % 2 == 0;\n                case QRMaskPattern.PATTERN001:\n                    return i % 2 == 0;\n                case QRMaskPattern.PATTERN010:\n                    return j % 3 == 0;\n                case QRMaskPattern.PATTERN011:\n                    return (i + j) % 3 == 0;\n                case QRMaskPattern.PATTERN100:\n                    return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;\n                case QRMaskPattern.PATTERN101:\n                    return (i * j) % 2 + (i * j) % 3 == 0;\n                case QRMaskPattern.PATTERN110:\n                    return ((i * j) % 2 + (i * j) % 3) % 2 == 0;\n                case QRMaskPattern.PATTERN111:\n                    return ((i * j) % 3 + (i + j) % 2) % 2 == 0;\n                default:\n                    throw new Error(\"bad maskPattern:\" + maskPattern)\n            }\n        },\n        getErrorCorrectPolynomial: function (errorCorrectLength) {\n            var a = new QRPolynomial([1], 0);\n            for (var i = 0; i < errorCorrectLength; i++) {\n                a = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0))\n            }\n            return a\n        },\n        getLengthInBits: function (mode, type) {\n            if (1 <= type && type < 10) {\n                switch (mode) {\n                    case QRMode.MODE_NUMBER:\n                        return 10;\n                    case QRMode.MODE_ALPHA_NUM:\n                        return 9;\n                    case QRMode.MODE_8BIT_BYTE:\n                        return 8;\n                    case QRMode.MODE_KANJI:\n                        return 8;\n                    default:\n                        throw new Error(\"mode:\" + mode)\n                }\n            } else if (type < 27) {\n                switch (mode) {\n                    case QRMode.MODE_NUMBER:\n                        return 12;\n                    case QRMode.MODE_ALPHA_NUM:\n                        return 11;\n                    case QRMode.MODE_8BIT_BYTE:\n                        return 16;\n                    case QRMode.MODE_KANJI:\n                        return 10;\n                    default:\n                        throw new Error(\"mode:\" + mode)\n                }\n            } else if (type < 41) {\n                switch (mode) {\n                    case QRMode.MODE_NUMBER:\n                        return 14;\n                    case QRMode.MODE_ALPHA_NUM:\n                        return 13;\n                    case QRMode.MODE_8BIT_BYTE:\n                        return 16;\n                    case QRMode.MODE_KANJI:\n                        return 12;\n                    default:\n                        throw new Error(\"mode:\" + mode)\n                }\n            } else {\n                throw new Error(\"type:\" + type)\n            }\n        },\n        getLostPoint: function (qrCode) {\n            var moduleCount = qrCode.getModuleCount();\n            var lostPoint = 0;\n            for (var row = 0; row < moduleCount; row++) {\n                for (var col = 0; col < moduleCount; col++) {\n                    var sameCount = 0;\n                    var dark = qrCode.isDark(row, col);\n                    for (var r = -1; r <= 1; r++) {\n                        if (row + r < 0 || moduleCount <= row + r) {\n                            continue\n                        }\n                        for (var c = -1; c <= 1; c++) {\n                            if (col + c < 0 || moduleCount <= col + c) {\n                                continue\n                            }\n                            if (r == 0 && c == 0) {\n                                continue\n                            }\n                            if (dark == qrCode.isDark(row + r, col + c)) {\n                                sameCount++\n                            }\n                        }\n                    }\n                    if (sameCount > 5) {\n                        lostPoint += (3 + sameCount - 5)\n                    }\n                }\n            }\n            for (var row = 0; row < moduleCount - 1; row++) {\n                for (var col = 0; col < moduleCount - 1; col++) {\n                    var count = 0;\n                    if (qrCode.isDark(row, col)) count++;\n                    if (qrCode.isDark(row + 1, col)) count++;\n                    if (qrCode.isDark(row, col + 1)) count++;\n                    if (qrCode.isDark(row + 1, col + 1)) count++;\n                    if (count == 0 || count == 4) {\n                        lostPoint += 3\n                    }\n                }\n            }\n            for (var row = 0; row < moduleCount; row++) {\n                for (var col = 0; col < moduleCount - 6; col++) {\n                    if (qrCode.isDark(row, col) && !qrCode.isDark(row, col + 1) && qrCode.isDark(row, col + 2) && qrCode.isDark(row, col + 3) && qrCode.isDark(row, col + 4) && !qrCode.isDark(row, col + 5) && qrCode.isDark(row, col + 6)) {\n                        lostPoint += 40\n                    }\n                }\n            }\n            for (var col = 0; col < moduleCount; col++) {\n                for (var row = 0; row < moduleCount - 6; row++) {\n                    if (qrCode.isDark(row, col) && !qrCode.isDark(row + 1, col) && qrCode.isDark(row + 2, col) && qrCode.isDark(row + 3, col) && qrCode.isDark(row + 4, col) && !qrCode.isDark(row + 5, col) && qrCode.isDark(row + 6, col)) {\n                        lostPoint += 40\n                    }\n                }\n            }\n            var darkCount = 0;\n            for (var col = 0; col < moduleCount; col++) {\n                for (var row = 0; row < moduleCount; row++) {\n                    if (qrCode.isDark(row, col)) {\n                        darkCount++\n                    }\n                }\n            }\n            var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n            lostPoint += ratio * 10;\n            return lostPoint\n        }\n    };\n    var QRMath = {\n        glog: function (n) {\n            if (n < 1) {\n                throw new Error(\"glog(\" + n + \")\")\n            }\n            return QRMath.LOG_TABLE[n]\n        }, gexp: function (n) {\n            while (n < 0) {\n                n += 255\n            }\n            while (n >= 256) {\n                n -= 255\n            }\n            return QRMath.EXP_TABLE[n]\n        }, EXP_TABLE: new Array(256), LOG_TABLE: new Array(256)\n    };\n    for (var i = 0; i < 8; i++) {\n        QRMath.EXP_TABLE[i] = 1 << i\n    }\n    for (var i = 8; i < 256; i++) {\n        QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^ QRMath.EXP_TABLE[i - 5] ^ QRMath.EXP_TABLE[i - 6] ^ QRMath.EXP_TABLE[i - 8]\n    }\n    for (var i = 0; i < 255; i++) {\n        QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i\n    }\n    function QRPolynomial(num, shift) {\n        if (num.length == undefined) {\n            throw new Error(num.length + \"/\" + shift)\n        }\n        var offset = 0;\n        while (offset < num.length && num[offset] == 0) {\n            offset++\n        }\n        this.num = new Array(num.length - offset + shift);\n        for (var i = 0; i < num.length - offset; i++) {\n            this.num[i] = num[i + offset]\n        }\n    }\n\n    QRPolynomial.prototype = {\n        get: function (index) {\n            return this.num[index]\n        }, getLength: function () {\n            return this.num.length\n        }, multiply: function (e) {\n            var num = new Array(this.getLength() + e.getLength() - 1);\n            for (var i = 0; i < this.getLength(); i++) {\n                for (var j = 0; j < e.getLength(); j++) {\n                    num[i + j] ^= QRMath.gexp(QRMath.glog(this.get(i)) + QRMath.glog(e.get(j)))\n                }\n            }\n            return new QRPolynomial(num, 0)\n        }, mod: function (e) {\n            if (this.getLength() - e.getLength() < 0) {\n                return this\n            }\n            var ratio = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0));\n            var num = new Array(this.getLength());\n            for (var i = 0; i < this.getLength(); i++) {\n                num[i] = this.get(i)\n            }\n            for (var i = 0; i < e.getLength(); i++) {\n                num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio)\n            }\n            return new QRPolynomial(num, 0).mod(e)\n        }\n    };\n    function QRRSBlock(totalCount, dataCount) {\n        this.totalCount = totalCount;\n        this.dataCount = dataCount\n    }\n\n    QRRSBlock.RS_BLOCK_TABLE = [[1, 26, 19], [1, 26, 16], [1, 26, 13], [1, 26, 9], [1, 44, 34], [1, 44, 28], [1, 44, 22], [1, 44, 16], [1, 70, 55], [1, 70, 44], [2, 35, 17], [2, 35, 13], [1, 100, 80], [2, 50, 32], [2, 50, 24], [4, 25, 9], [1, 134, 108], [2, 67, 43], [2, 33, 15, 2, 34, 16], [2, 33, 11, 2, 34, 12], [2, 86, 68], [4, 43, 27], [4, 43, 19], [4, 43, 15], [2, 98, 78], [4, 49, 31], [2, 32, 14, 4, 33, 15], [4, 39, 13, 1, 40, 14], [2, 121, 97], [2, 60, 38, 2, 61, 39], [4, 40, 18, 2, 41, 19], [4, 40, 14, 2, 41, 15], [2, 146, 116], [3, 58, 36, 2, 59, 37], [4, 36, 16, 4, 37, 17], [4, 36, 12, 4, 37, 13], [2, 86, 68, 2, 87, 69], [4, 69, 43, 1, 70, 44], [6, 43, 19, 2, 44, 20], [6, 43, 15, 2, 44, 16], [4, 101, 81], [1, 80, 50, 4, 81, 51], [4, 50, 22, 4, 51, 23], [3, 36, 12, 8, 37, 13], [2, 116, 92, 2, 117, 93], [6, 58, 36, 2, 59, 37], [4, 46, 20, 6, 47, 21], [7, 42, 14, 4, 43, 15], [4, 133, 107], [8, 59, 37, 1, 60, 38], [8, 44, 20, 4, 45, 21], [12, 33, 11, 4, 34, 12], [3, 145, 115, 1, 146, 116], [4, 64, 40, 5, 65, 41], [11, 36, 16, 5, 37, 17], [11, 36, 12, 5, 37, 13], [5, 109, 87, 1, 110, 88], [5, 65, 41, 5, 66, 42], [5, 54, 24, 7, 55, 25], [11, 36, 12], [5, 122, 98, 1, 123, 99], [7, 73, 45, 3, 74, 46], [15, 43, 19, 2, 44, 20], [3, 45, 15, 13, 46, 16], [1, 135, 107, 5, 136, 108], [10, 74, 46, 1, 75, 47], [1, 50, 22, 15, 51, 23], [2, 42, 14, 17, 43, 15], [5, 150, 120, 1, 151, 121], [9, 69, 43, 4, 70, 44], [17, 50, 22, 1, 51, 23], [2, 42, 14, 19, 43, 15], [3, 141, 113, 4, 142, 114], [3, 70, 44, 11, 71, 45], [17, 47, 21, 4, 48, 22], [9, 39, 13, 16, 40, 14], [3, 135, 107, 5, 136, 108], [3, 67, 41, 13, 68, 42], [15, 54, 24, 5, 55, 25], [15, 43, 15, 10, 44, 16], [4, 144, 116, 4, 145, 117], [17, 68, 42], [17, 50, 22, 6, 51, 23], [19, 46, 16, 6, 47, 17], [2, 139, 111, 7, 140, 112], [17, 74, 46], [7, 54, 24, 16, 55, 25], [34, 37, 13], [4, 151, 121, 5, 152, 122], [4, 75, 47, 14, 76, 48], [11, 54, 24, 14, 55, 25], [16, 45, 15, 14, 46, 16], [6, 147, 117, 4, 148, 118], [6, 73, 45, 14, 74, 46], [11, 54, 24, 16, 55, 25], [30, 46, 16, 2, 47, 17], [8, 132, 106, 4, 133, 107], [8, 75, 47, 13, 76, 48], [7, 54, 24, 22, 55, 25], [22, 45, 15, 13, 46, 16], [10, 142, 114, 2, 143, 115], [19, 74, 46, 4, 75, 47], [28, 50, 22, 6, 51, 23], [33, 46, 16, 4, 47, 17], [8, 152, 122, 4, 153, 123], [22, 73, 45, 3, 74, 46], [8, 53, 23, 26, 54, 24], [12, 45, 15, 28, 46, 16], [3, 147, 117, 10, 148, 118], [3, 73, 45, 23, 74, 46], [4, 54, 24, 31, 55, 25], [11, 45, 15, 31, 46, 16], [7, 146, 116, 7, 147, 117], [21, 73, 45, 7, 74, 46], [1, 53, 23, 37, 54, 24], [19, 45, 15, 26, 46, 16], [5, 145, 115, 10, 146, 116], [19, 75, 47, 10, 76, 48], [15, 54, 24, 25, 55, 25], [23, 45, 15, 25, 46, 16], [13, 145, 115, 3, 146, 116], [2, 74, 46, 29, 75, 47], [42, 54, 24, 1, 55, 25], [23, 45, 15, 28, 46, 16], [17, 145, 115], [10, 74, 46, 23, 75, 47], [10, 54, 24, 35, 55, 25], [19, 45, 15, 35, 46, 16], [17, 145, 115, 1, 146, 116], [14, 74, 46, 21, 75, 47], [29, 54, 24, 19, 55, 25], [11, 45, 15, 46, 46, 16], [13, 145, 115, 6, 146, 116], [14, 74, 46, 23, 75, 47], [44, 54, 24, 7, 55, 25], [59, 46, 16, 1, 47, 17], [12, 151, 121, 7, 152, 122], [12, 75, 47, 26, 76, 48], [39, 54, 24, 14, 55, 25], [22, 45, 15, 41, 46, 16], [6, 151, 121, 14, 152, 122], [6, 75, 47, 34, 76, 48], [46, 54, 24, 10, 55, 25], [2, 45, 15, 64, 46, 16], [17, 152, 122, 4, 153, 123], [29, 74, 46, 14, 75, 47], [49, 54, 24, 10, 55, 25], [24, 45, 15, 46, 46, 16], [4, 152, 122, 18, 153, 123], [13, 74, 46, 32, 75, 47], [48, 54, 24, 14, 55, 25], [42, 45, 15, 32, 46, 16], [20, 147, 117, 4, 148, 118], [40, 75, 47, 7, 76, 48], [43, 54, 24, 22, 55, 25], [10, 45, 15, 67, 46, 16], [19, 148, 118, 6, 149, 119], [18, 75, 47, 31, 76, 48], [34, 54, 24, 34, 55, 25], [20, 45, 15, 61, 46, 16]];\n    QRRSBlock.getRSBlocks = function (typeNumber, errorCorrectLevel) {\n        var rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\n        if (rsBlock == undefined) {\n            throw new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + errorCorrectLevel)\n        }\n        var length = rsBlock.length / 3;\n        var list = [];\n        for (var i = 0; i < length; i++) {\n            var count = rsBlock[i * 3 + 0];\n            var totalCount = rsBlock[i * 3 + 1];\n            var dataCount = rsBlock[i * 3 + 2];\n            for (var j = 0; j < count; j++) {\n                list.push(new QRRSBlock(totalCount, dataCount))\n            }\n        }\n        return list\n    };\n    QRRSBlock.getRsBlockTable = function (typeNumber, errorCorrectLevel) {\n        switch (errorCorrectLevel) {\n            case QRErrorCorrectLevel.L:\n                return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n            case QRErrorCorrectLevel.M:\n                return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n            case QRErrorCorrectLevel.Q:\n                return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n            case QRErrorCorrectLevel.H:\n                return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n            default:\n                return undefined\n        }\n    };\n    function QRBitBuffer() {\n        this.buffer = [];\n        this.length = 0\n    }\n\n    QRBitBuffer.prototype = {\n        get: function (index) {\n            var bufIndex = Math.floor(index / 8);\n            return ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1) == 1\n        }, put: function (num, length) {\n            for (var i = 0; i < length; i++) {\n                this.putBit(((num >>> (length - i - 1)) & 1) == 1)\n            }\n        }, getLengthInBits: function () {\n            return this.length\n        }, putBit: function (bit) {\n            var bufIndex = Math.floor(this.length / 8);\n            if (this.buffer.length <= bufIndex) {\n                this.buffer.push(0)\n            }\n            if (bit) {\n                this.buffer[bufIndex] |= (0x80 >>> (this.length % 8))\n            }\n            this.length++\n        }\n    };\n    var QRCodeLimitLength = [[17, 14, 11, 7], [32, 26, 20, 14], [53, 42, 32, 24], [78, 62, 46, 34], [106, 84, 60, 44], [134, 106, 74, 58], [154, 122, 86, 64], [192, 152, 108, 84], [230, 180, 130, 98], [271, 213, 151, 119], [321, 251, 177, 137], [367, 287, 203, 155], [425, 331, 241, 177], [458, 362, 258, 194], [520, 412, 292, 220], [586, 450, 322, 250], [644, 504, 364, 280], [718, 560, 394, 310], [792, 624, 442, 338], [858, 666, 482, 382], [929, 711, 509, 403], [1003, 779, 565, 439], [1091, 857, 611, 461], [1171, 911, 661, 511], [1273, 997, 715, 535], [1367, 1059, 751, 593], [1465, 1125, 805, 625], [1528, 1190, 868, 658], [1628, 1264, 908, 698], [1732, 1370, 982, 742], [1840, 1452, 1030, 790], [1952, 1538, 1112, 842], [2068, 1628, 1168, 898], [2188, 1722, 1228, 958], [2303, 1809, 1283, 983], [2431, 1911, 1351, 1051], [2563, 1989, 1423, 1093], [2699, 2099, 1499, 1139], [2809, 2213, 1579, 1219], [2953, 2331, 1663, 1273]]\n\n    function _isSupportCanvas() {\n        return typeof CanvasRenderingContext2D != \"undefined\";\n    }\n\n    function _getAndroid() {\n        var android = false;\n        var sAgent = navigator.userAgent;\n\n        if (/android/i.test(sAgent)) { // android\n            android = true;\n            var aMat = sAgent.toString().match(/android ([0-9]\\.[0-9])/i);\n\n            if (aMat && aMat[1]) {\n                android = parseFloat(aMat[1]);\n            }\n        }\n\n        return android;\n    }\n\n    var Drawing = !_isSupportCanvas() ? (function () {\n        var Drawing = function (htOption) {\n            this._htOption = htOption;\n        };\n\n        Drawing.prototype.draw = function (oQRCode) {\n            var _htOption = this._htOption;\n            var nCount = oQRCode.getModuleCount();\n            var nWidth = Math.floor(_htOption.size / nCount);\n            var nHeight = Math.floor(_htOption.size / nCount);\n            var aHTML = ['<table style=\"border:0;border-collapse:collapse;\">'];\n\n            for (var row = 0; row < nCount; row++) {\n                aHTML.push('<tr>');\n\n                for (var col = 0; col < nCount; col++) {\n                    aHTML.push('<td style=\"border:0;border-collapse:collapse;padding:0;margin:0;width:' + nWidth + 'px;height:' + nHeight + 'px;background-color:' + (oQRCode.isDark(row, col) ? _htOption.colorDark : _htOption.colorLight) + ';\"></td>');\n                }\n\n                aHTML.push('</tr>');\n            }\n\n            aHTML.push('</table>');\n\n            var nLeftMarginTable = (_htOption.size - elTable.offsetWidth) / 2;\n            var nTopMarginTable = (_htOption.size - elTable.offsetHeight) / 2;\n\n            if (nLeftMarginTable > 0 && nTopMarginTable > 0) {\n                elTable.style.margin = nTopMarginTable + \"px \" + nLeftMarginTable + \"px\";\n            }\n        };\n\n        Drawing.prototype.clear = function () {\n        };\n\n        return Drawing;\n    })() : (function () { // Drawing in Canvas\n        function _onMakeImage() {\n            this._elImage.src = this._elCanvas.toDataURL(\"image/png\");\n            this._elImage.style.display = \"block\";\n            this._elCanvas.style.display = \"none\";\n        }\n\n        if (this._android && this._android <= 2.1) {\n            var factor = 1 / window.devicePixelRatio;\n            var drawImage = CanvasRenderingContext2D.prototype.drawImage;\n            CanvasRenderingContext2D.prototype.drawImage = function (image, sx, sy, sw, sh, dx, dy, dw, dh) {\n                if ((\"nodeName\" in image) && /img/i.test(image.nodeName)) {\n                    for (var i = arguments.length - 1; i >= 1; i--) {\n                        arguments[i] = arguments[i] * factor;\n                    }\n                } else if (typeof dw == \"undefined\") {\n                    arguments[1] *= factor;\n                    arguments[2] *= factor;\n                    arguments[3] *= factor;\n                    arguments[4] *= factor;\n                }\n\n                drawImage.apply(this, arguments);\n            };\n        }\n\n        function _safeSetDataURI(fSuccess, fFail) {\n            var self = this;\n            self._fFail = fFail;\n            self._fSuccess = fSuccess;\n\n            // Check it just once\n            if (self._bSupportDataURI === null) {\n                var el = document.createElement(\"img\");\n                var fOnError = function () {\n                    self._bSupportDataURI = false;\n\n                    if (self._fFail) {\n                        self._fFail.call(self);\n                    }\n                };\n                var fOnSuccess = function () {\n                    self._bSupportDataURI = true;\n\n                    if (self._fSuccess) {\n                        self._fSuccess.call(self);\n                    }\n                };\n\n                el.onabort = fOnError;\n                el.onerror = fOnError;\n                el.onload = fOnSuccess;\n                el.src = \"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==\"; // the Image contains 1px data.\n                return;\n            } else if (self._bSupportDataURI === true && self._fSuccess) {\n                self._fSuccess.call(self);\n            } else if (self._bSupportDataURI === false && self._fFail) {\n                self._fFail.call(self);\n            }\n        };\n\n        var Drawing = function (htOption) {\n            this._bIsPainted = false;\n            this._android = _getAndroid();\n\n            this._htOption = htOption;\n            this._elCanvas = document.createElement(\"canvas\");\n            this._elCanvas.width = htOption.size;\n            this._elCanvas.height = htOption.size;\n            this._oContext = this._elCanvas.getContext(\"2d\");\n            this._bIsPainted = false;\n            this._elImage = document.createElement(\"img\");\n            this._elImage.alt = \"Scan me!\";\n            this._elImage.style.display = \"none\";\n            this._bSupportDataURI = null;\n            this._callback = htOption.callback;\n            this._bindElement = htOption.bindElement;\n        };\n\n        Drawing.prototype.draw = function (oQRCode) {\n            var _elImage = this._elImage;\n            var _tCanvas = document.createElement(\"canvas\");\n            var _oContext = _tCanvas.getContext(\"2d\");\n            // var _oContext = this._oContext;\n            var _htOption = this._htOption;\n\n            var nCount = oQRCode.getModuleCount();\n            var rawSize = _htOption.size;\n            var rawMargin = _htOption.margin;\n\n            if (rawMargin < 0 || rawMargin * 2 >= rawSize) {\n                rawMargin = 0;\n            }\n\n            var margin = Math.ceil(rawMargin);\n\n            var rawViewportSize = rawSize - 2 * rawMargin;\n\n\n            var whiteMargin = _htOption.whiteMargin;\n            var backgroundDimming = _htOption.backgroundDimming;\n            var rawWidth = rawViewportSize / nCount;\n            var rawHeight = rawWidth;\n            var nWidth = Math.ceil(rawWidth);\n            var nHeight = nWidth;\n            var viewportSize = nWidth * nCount;\n            var size = viewportSize + 2 * margin;\n\n            _tCanvas.width = size;\n            _tCanvas.height = size;\n\n            // We've banned these naughty log outputs\n            // console.log(\"rawSize=\" + rawSize + \", drawSize=\" + size);\n            // console.log(\"rawViewportSize=\" + rawViewportSize + \", drawViewportSize=\" + viewportSize);\n            // console.log(\"rawWidth=rawHeight=\" + rawWidth + \", drawWidth=drawHeight=\" + nWidth);\n\n            var dotScale = _htOption.dotScale;\n            _elImage.style.display = \"none\";\n            this.clear();\n\n            if (dotScale <= 0 || dotScale > 1) {\n                dotScale = 0.35;\n            }\n\n            _oContext.save();\n            _oContext.translate(margin, margin);\n\n            _oContext.rect(whiteMargin ? 0 : -margin, whiteMargin ? 0 : -margin, size, size);\n            _oContext.fillStyle = \"#ffffff\";\n            _oContext.fill();\n\n            if (_htOption.backgroundImage !== undefined) {\n                if (_htOption.autoColor) {\n                    var avgRGB = getAverageRGB(_htOption.backgroundImage);\n                    _htOption.colorDark = \"rgb(\" + avgRGB.r + \", \" + avgRGB.g + \", \" + avgRGB.b + \")\";\n                }\n                _oContext.drawImage(_htOption.backgroundImage,\n                    0, 0, _htOption.backgroundImage.width, _htOption.backgroundImage.height,\n                    whiteMargin ? 0 : -margin, whiteMargin ? 0 : -margin, whiteMargin ? viewportSize : size, whiteMargin ? viewportSize : size);\n                _oContext.rect(whiteMargin ? 0 : -margin, whiteMargin ? 0 : -margin, size, size);\n                _oContext.fillStyle = backgroundDimming;\n                _oContext.fill();\n            } else {\n                _oContext.rect(0, 0, size, size);\n                _oContext.fillStyle = \"#ffffff\";\n                _oContext.fill();\n            }\n\n            if (_htOption.binarize) {\n                _htOption.colorDark = \"#000000\";\n                _htOption.colorLight = \"#FFFFFF\";\n            }\n\n            var agnPatternCenter = QRUtil.getPatternPosition(oQRCode.typeNumber);\n\n            _oContext.fillStyle = \"rgba(255, 255, 255, 0.6)\";\n            _oContext.fillRect(0, 0, 8 * nWidth, 8 * nHeight);\n            _oContext.fillRect(0, (nCount - 8) * nHeight, 8 * nWidth, 8 * nHeight);\n            _oContext.fillRect((nCount - 8) * nWidth, 0, 8 * nWidth, 8 * nHeight);\n            _oContext.fillRect(8 * nWidth, 6 * nHeight, (nCount - 8 - 8) * nWidth, nHeight);\n            _oContext.fillRect(6 * nWidth, 8 * nHeight, nWidth, (nCount - 8 - 8) * nHeight);\n\n            var edgeCenter = agnPatternCenter[agnPatternCenter.length - 1];\n            for (var i = 0; i < agnPatternCenter.length; i++) {\n                for (var j = 0; j < agnPatternCenter.length; j++) {\n                    var agnX = agnPatternCenter[j];\n                    var agnY = agnPatternCenter[i];\n                    if (agnX !== 6 && agnX !== edgeCenter && agnY !== 6 && agnY !== edgeCenter) continue;\n                    if (agnX === 6 && (agnY === 6 || agnY === edgeCenter)) continue;\n                    if (agnY === 6 && (agnX === 6 || agnX === edgeCenter)) continue;\n                    drawAgnProtector(_oContext, agnX, agnY, nWidth, nHeight);\n                    // console.log(\"agnX=\" + agnX + \", agnY=\" + agnX);\n                }\n            }\n\n            _oContext.fillStyle = _htOption.colorDark;\n\n            _oContext.fillRect(0, 0, 7 * nWidth, nHeight);\n            _oContext.fillRect((nCount - 7) * nWidth, 0, 7 * nWidth, nHeight);\n            _oContext.fillRect(0, 6 * nHeight, 7 * nWidth, nHeight);\n            _oContext.fillRect((nCount - 7) * nWidth, 6 * nHeight, 7 * nWidth, nHeight);\n            _oContext.fillRect(0, (nCount - 7) * nHeight, 7 * nWidth, nHeight);\n            _oContext.fillRect(0, (nCount - 7 + 6) * nHeight, 7 * nWidth, nHeight);\n            _oContext.fillRect(0, 0, nWidth, 7 * nHeight);\n            _oContext.fillRect(6 * nWidth, 0, nWidth, 7 * nHeight);\n            _oContext.fillRect((nCount - 7) * nWidth, 0, nWidth, 7 * nHeight);\n            _oContext.fillRect((nCount - 7 + 6) * nWidth, 0, nWidth, 7 * nHeight);\n            _oContext.fillRect(0, (nCount - 7) * nHeight, nWidth, 7 * nHeight);\n            _oContext.fillRect(6 * nWidth, (nCount - 7) * nHeight, nWidth, 7 * nHeight);\n\n            for (var i = 0; i < agnPatternCenter.length; i++) {\n                for (var j = 0; j < agnPatternCenter.length; j++) {\n                    var agnX = agnPatternCenter[j];\n                    var agnY = agnPatternCenter[i];\n                    if (agnX !== 6 && agnX !== edgeCenter && agnY !== 6 && agnY !== edgeCenter) continue;\n                    if (agnX === 6 && (agnY === 6 || agnY === edgeCenter)) continue;\n                    if (agnY === 6 && (agnX === 6 || agnX === edgeCenter)) continue;\n                    drawAgn(_oContext, agnX, agnY, nWidth, nHeight);\n                }\n            }\n\n            _oContext.fillRect(2 * nWidth, 2 * nHeight, 3 * nWidth, 3 * nHeight);\n            _oContext.fillRect((nCount - 7 + 2) * nWidth, 2 * nHeight, 3 * nWidth, 3 * nHeight);\n            _oContext.fillRect(2 * nWidth, (nCount - 7 + 2) * nHeight, 3 * nWidth, 3 * nHeight);\n\n            for (var i = 0; i < nCount - 8; i += 2) {\n                _oContext.fillRect((8 + i) * nWidth, 6 * nHeight, nWidth, nHeight);\n                _oContext.fillRect(6 * nWidth, (8 + i) * nHeight, nWidth, nHeight);\n            }\n\n            var xyOffset = (1 - dotScale) * 0.5;\n            for (var row = 0; row < nCount; row++) {\n                for (var col = 0; col < nCount; col++) {\n                    var bIsDark = oQRCode.isDark(row, col);\n\n                    // var isBlkPosCtr = ((col < 8 && (row < 8 || row >= nCount - 8)) || (col >= nCount - 8 && row < 8) || (col < nCount - 4 && col >= nCount - 4 - 5 && row < nCount - 4 && row >= nCount - 4 - 5));\n                    var isBlkPosCtr = ((col < 8 && (row < 8 || row >= nCount - 8)) || (col >= nCount - 8 && row < 8));\n                    var isBlkPos = ((col < 7 && (row < 7 || row >= nCount - 7)) || (col >= nCount - 7 && row < 7));\n                    var bProtected = (row === 6 || col === 6 || isBlkPosCtr);\n\n                    for (var i = 0; i < agnPatternCenter.length - 1; i++) {\n                        bProtected = bProtected || (row >= agnPatternCenter[i] - 2 && row <= agnPatternCenter[i] + 2 && col >= agnPatternCenter[i] - 2 && col <= agnPatternCenter[i] + 2);\n                    }\n\n                    var nLeft = col * nWidth + (bProtected ? 0 : (xyOffset * nWidth));\n                    var nTop = row * nHeight + (bProtected ? 0 : (xyOffset * nHeight));\n                    _oContext.strokeStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;\n                    _oContext.lineWidth = 0.5;\n                    _oContext.fillStyle = bIsDark ? _htOption.colorDark : \"rgba(255, 255, 255, 0.6)\"; //_htOption.colorLight;\n                    if (agnPatternCenter.length === 0) {\n                        // if align pattern list is empty, then it means that we don't need to leave room for the align patterns\n                        if (!bProtected) _oContext.fillRect(nLeft, nTop, (bProtected ? (isBlkPosCtr ? 1 : 1) : dotScale) * nWidth, (bProtected ? (isBlkPosCtr ? 1 : 1) : dotScale) * nHeight);\n                    }else{\n                        var inAgnRange = ((col < nCount - 4 && col >= nCount - 4 - 5 && row < nCount - 4 && row >= nCount - 4 - 5));\n                        if (!bProtected&&!inAgnRange) _oContext.fillRect(nLeft, nTop, (bProtected ? (isBlkPosCtr ? 1 : 1) : dotScale) * nWidth, (bProtected ? (isBlkPosCtr ? 1 : 1) : dotScale) * nHeight);\n                    }\n                }\n            }\n\n            if (whiteMargin) {\n                _oContext.fillStyle = '#FFFFFF';\n                _oContext.fillRect(-margin, -margin, size, margin);\n                _oContext.fillRect(-margin, viewportSize, size, margin);\n                _oContext.fillRect(viewportSize, -margin, margin, size);\n                _oContext.fillRect(-margin, -margin, margin, size);\n            }\n\n            if (_htOption.logoImage !== undefined) {\n                var logoScale = _htOption.logoScale;\n                var logoMargin = _htOption.logoMargin;\n                var logoCornerRadius = _htOption.logoCornerRadius;\n                if (logoScale <= 0 || logoScale >= 1.0) {\n                    logoScale = 0.2;\n                }\n                if (logoMargin < 0) {\n                    logoMargin = 0;\n                }\n                if (logoCornerRadius < 0) {\n                    logoCornerRadius = 0;\n                }\n\n                _oContext.restore();\n\n                var logoSize = viewportSize * logoScale;\n                var x = 0.5 * (size - logoSize);\n                var y = x;\n\n                _oContext.fillStyle = '#FFFFFF';\n                _oContext.save();\n                prepareRoundedCornerClip(_oContext, x - logoMargin, y - logoMargin, logoSize + 2 * logoMargin, logoSize + 2 * logoMargin, logoCornerRadius);\n                _oContext.clip();\n                _oContext.fill();\n                _oContext.restore();\n\n                _oContext.save();\n                prepareRoundedCornerClip(_oContext, x, y, logoSize, logoSize, logoCornerRadius);\n                _oContext.clip();\n                _oContext.drawImage(_htOption.logoImage, x, y, logoSize, logoSize);\n                _oContext.restore();\n            }\n\n            if (_htOption.binarize) {\n                var pixels = _oContext.getImageData(0, 0, size, size);\n                var threshold = 128;\n                if (parseInt(_htOption.binarizeThreshold) > 0 && parseInt(_htOption.binarizeThreshold) < 255) {\n                    threshold = parseInt(_htOption.binarizeThreshold);\n                }\n                for (var i = 0; i < pixels.data.length; i += 4) {\n                    var R = pixels.data[i]; //R(0-255)\n                    var G = pixels.data[i + 1]; //G(0-255)\n                    var B = pixels.data[i + 2]; //G(0-255)\n                    var sum = rgb2gray(R, G, B);\n                    if (sum > threshold) {\n                        pixels.data[i] = 255;\n                        pixels.data[i + 1] = 255;\n                        pixels.data[i + 2] = 255;\n                    } else {\n                        pixels.data[i] = 0;\n                        pixels.data[i + 1] = 0;\n                        pixels.data[i + 2] = 0;\n                    }\n                }\n                _oContext.putImageData(pixels, 0, 0);\n            }\n\n            var _fCanvas = document.createElement(\"canvas\");\n            var _fContext = _fCanvas.getContext(\"2d\");\n            _fCanvas.width = rawSize;\n            _fCanvas.height = rawSize;\n            _fContext.drawImage(_tCanvas, 0, 0, rawSize, rawSize);\n            this._elCanvas = _fCanvas;\n\n            this._bIsPainted = true;\n            if (this._callback !== undefined) {\n                this._callback(this._elCanvas.toDataURL());\n            }\n            if (this._bindElement !== undefined) {\n                try {\n                    var el = document.getElementById(this._bindElement);\n                    if (el.nodeName === 'IMG') {\n                        el.src = this._elCanvas.toDataURL();\n                    } else {\n                        var elStyle = el.style;\n                        elStyle[\"background-image\"] = 'url(' + this._elCanvas.toDataURL() + ')';\n                        elStyle[\"background-size\"] = 'contain';\n                        elStyle[\"background-repeat\"] = 'no-repeat';\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n            }\n        };\n\n        Drawing.prototype.makeImage = function () {\n            if (this._bIsPainted) {\n                _safeSetDataURI.call(this, _onMakeImage);\n            }\n        };\n\n        Drawing.prototype.isPainted = function () {\n            return this._bIsPainted;\n        };\n\n        Drawing.prototype.clear = function () {\n            this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);\n            this._bIsPainted = false;\n        };\n\n        Drawing.prototype.round = function (nNumber) {\n            if (!nNumber) {\n                return nNumber;\n            }\n\n            return Math.floor(nNumber * 1000) / 1000;\n        };\n\n        return Drawing;\n    })();\n\n    function prepareRoundedCornerClip(ctx, x, y, w, h, r) {\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        ctx.arcTo(x + w, y, x + w, y + h, r);\n        ctx.arcTo(x + w, y + h, x, y + h, r);\n        ctx.arcTo(x, y + h, x, y, r);\n        ctx.arcTo(x, y, x + w, y, r);\n        ctx.closePath();\n    }\n\n    function rgb2gray(r, g, b) {\n        return 0.30 * r + 0.59 * b + 0.11 * b;\n    }\n\n    function drawAgnProtector(context, centerX, centerY, nWidth, nHeight) {\n        context.fillRect((centerX - 2 + 0.5) * nWidth, (centerY - 2 + 0.5) * nHeight, 4 * nWidth, 4 * nHeight);\n    }\n\n    function drawAgn(context, centerX, centerY, nWidth, nHeight) {\n        context.fillRect((centerX - 2) * nWidth, (centerY - 2) * nHeight, nWidth, 5 * nHeight);\n        context.fillRect((centerX + 2) * nWidth, (centerY - 2) * nHeight, nWidth, 5 * nHeight);\n        context.fillRect((centerX - 2) * nWidth, (centerY - 2) * nHeight, 5 * nWidth, nHeight);\n        context.fillRect((centerX - 2) * nWidth, (centerY + 2) * nHeight, 5 * nWidth, nHeight);\n        context.fillRect(centerX * nWidth, centerY * nHeight, nWidth, nHeight);\n    }\n\n    function _getTypeNumber(sText, nCorrectLevel) {\n        var nType = 1;\n        var length = _getUTF8Length(sText);\n\n        for (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\n            var nLimit = 0;\n\n            switch (nCorrectLevel) {\n                case QRErrorCorrectLevel.L:\n                    nLimit = QRCodeLimitLength[i][0];\n                    break;\n                case QRErrorCorrectLevel.M:\n                    nLimit = QRCodeLimitLength[i][1];\n                    break;\n                case QRErrorCorrectLevel.Q:\n                    nLimit = QRCodeLimitLength[i][2];\n                    break;\n                case QRErrorCorrectLevel.H:\n                    nLimit = QRCodeLimitLength[i][3];\n                    break;\n            }\n\n            if (length <= nLimit) {\n                break;\n            } else {\n                nType++;\n            }\n        }\n\n        if (nType > QRCodeLimitLength.length) {\n            throw new Error(\"Too long data\");\n        }\n\n        return nType;\n    }\n\n    function _getUTF8Length(sText) {\n        var replacedText = encodeURI(sText).toString().replace(/\\%[0-9a-fA-F]{2}/g, 'a');\n        return replacedText.length + (replacedText.length != sText ? 3 : 0);\n    }\n\n    AwesomeQRCode = function () {\n    };\n\n    AwesomeQRCode.prototype.create = function (vOption) {\n        this._htOption = {\n            size: 800,\n            margin: 20,\n            typeNumber: 4,\n            colorDark: \"#000000\",\n            colorLight: \"#ffffff\",\n            correctLevel: QRErrorCorrectLevel.H,\n            backgroundImage: undefined,\n            backgroundDimming: 'rgba(0,0,0,0)',\n            logoImage: undefined,\n            logoScale: 0.2,\n            logoMargin: 6,\n            logoCornerRadius: 8,\n            whiteMargin: true,\n            dotScale: 0.35,\n            autoColor: true,\n            binarize: false,\n            binarizeThreshold: 128,\n            callback: undefined,\n            bindElement: undefined\n        };\n\n        if (typeof vOption === 'string') {\n            vOption = {\n                text: vOption\n            };\n        }\n\n        if (vOption) {\n            for (var i in vOption) {\n                this._htOption[i] = vOption[i];\n            }\n        }\n\n        if (this._htOption.useSVG) {\n            Drawing = svgDrawer;\n        }\n\n        this._android = _getAndroid();\n        this._oQRCode = null;\n        this._oDrawing = new Drawing(this._htOption);\n\n        if (this._htOption.text) {\n            this.makeCode(this._htOption.text);\n        }\n    };\n\n    AwesomeQRCode.prototype.makeCode = function (sText) {\n        this._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);\n        this._oQRCode.addData(sText);\n        this._oQRCode.make();\n        this._oDrawing.draw(this._oQRCode);\n        this.makeImage();\n    };\n\n    AwesomeQRCode.prototype.makeImage = function () {\n        if (typeof this._oDrawing.makeImage == \"function\" && (!this._android || this._android >= 3)) {\n            this._oDrawing.makeImage();\n        }\n    };\n\n    AwesomeQRCode.prototype.clear = function () {\n        this._oDrawing.clear();\n    };\n\n    AwesomeQRCode.CorrectLevel = QRErrorCorrectLevel;\n\n    function getAverageRGB(imgEl) {\n\n        var blockSize = 5,\n            defaultRGB = {\n                r: 0,\n                g: 0,\n                b: 0\n            },\n            canvas = document.createElement('canvas'),\n            context = canvas.getContext && canvas.getContext('2d'),\n            data, width, height,\n            i = -4,\n            length,\n            rgb = {\n                r: 0,\n                g: 0,\n                b: 0\n            },\n            count = 0;\n\n        if (!context) {\n            return defaultRGB;\n        }\n\n        height = canvas.height = imgEl.naturalHeight || imgEl.offsetHeight || imgEl.height;\n        width = canvas.width = imgEl.naturalWidth || imgEl.offsetWidth || imgEl.width;\n\n        context.drawImage(imgEl, 0, 0);\n\n        try {\n            data = context.getImageData(0, 0, width, height);\n        } catch (e) {\n            return defaultRGB;\n        }\n\n        length = data.data.length;\n\n        while ((i += blockSize * 4) < length) {\n            if (data.data[i] > 200 || data.data[i + 1] > 200 || data.data[i + 2] > 200) continue;\n            ++count;\n            rgb.r += data.data[i];\n            rgb.g += data.data[i + 1];\n            rgb.b += data.data[i + 2];\n        }\n\n        rgb.r = ~~(rgb.r / count);\n        rgb.g = ~~(rgb.g / count);\n        rgb.b = ~~(rgb.b / count);\n\n        return rgb;\n    }\n})();\n\n(function (window, factory) {\n    if (typeof exports === 'object') {\n        module.exports = factory;\n    } else if (typeof define === 'function' && define.amd) {\n        define(factory);\n    } else {\n        window.eventUtil = factory();\n    }\n})(this, function () {\n    return new AwesomeQRCode();\n});\n"]}