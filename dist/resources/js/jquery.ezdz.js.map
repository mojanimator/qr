{"version":3,"sources":["../../../resources/js/jquery.ezdz.js"],"names":["factory","define","amd","exports","require","jQuery","$","defaults","className","text","previewImage","value","classes","main","enter","reject","accept","focus","validators","maxSize","width","maxWidth","minWidth","height","maxHeight","minHeight","init","leave","document","body","removeClass","addClass","toggleClass","imageCrop","displayPreview","displaySize","overlayOpacity","onSelect","updateForm","selectionExists","crop","val","selectionX","selectionY","selectionWidth","selectionHeight","validateForm","alert","format","filename","ezdz","element","options","settings","extend","$input","self","is","isBrowserCompatible","$ezdz","$container","on","isFunction","apply","leaved","wrap","before","parent","data","preview","file","files","basename","name","replace","extension","split","pop","formatted","allowed","attr","accepted","valid","errors","types","each","i","type","trim","indexOf","a","b","mimeType","reader","FileReader","readAsDataURL","onload","e","img","Image","isImage","target","result","setTimeout","size","find","remove","html","fadeIn","prototype","path","callback","join","src","onerror","destroy","replaceWith","off","removeData","container","window","File","FileList","fn","args","arguments","plugin","Array","slice","call","error"],"mappings":"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","file":"jquery.ezdz.js","sourcesContent":["/* ----------------------------------------------------------------------------\n// Ezdz [izy-dizy]\n// Licensed under the MIT license.\n// http://github.com/jaysalvat/ezdz/\n// ----------------------------------------------------------------------------\n// Copyright (C) 2014 Jay Salvat\n// http://jaysalvat.com/\n// --------------------------------------------------------------------------*/\n\n/* global define: true, require: true, jQuery */\n\n(function (factory) {\n    \"use strict\";\n\n    if (typeof define === 'function' && define.amd) {\n        define(['jquery'], factory);\n    } else if (typeof exports === 'object') {\n        factory(require('jquery'));\n    } else {\n        factory(jQuery);\n    }\n}(function ($) {\n    \"use strict\";\n\n    // Default settings\n    var defaults = {\n        className: '',\n        text: '...',\n        previewImage: false,\n        value: null,\n        classes: {\n            main: 'ezdz-dropzone',\n            enter: 'ezdz-enter',\n            reject: 'ezdz-reject',\n            accept: 'ezdz-accept',\n            focus: 'ezdz-focus'\n        },\n        validators: {\n            maxSize: null,\n            width: null,\n            maxWidth: null,\n            minWidth: null,\n            height: null,\n            maxHeight: null,\n            minHeight: null\n        },\n        init: function () {\n        },\n        enter: function () {\n        },\n        leave: function () {\n\n        },\n        reject: function () {\n        },\n        accept: function () {\n            //*************** MY EDIT *************************************\n\n            $(document.body).removeClass(\"loading\");\n            $('input#input_qr_text').addClass('hidden');\n            $('.ezdz-dropzone').toggleClass('hidden');\n\n            $('img#example').imageCrop({\n                displayPreview: true,\n                displaySize: true,\n                overlayOpacity: 0.25,\n\n                onSelect: updateForm\n            });\n\n            var selectionExists;\n\n            // Update form inputs\n            function updateForm(crop) {\n                $('input#x').val(crop.selectionX);\n                $('input#y').val(crop.selectionY);\n                $('input#width').val(crop.selectionWidth);\n                $('input#height').val(crop.selectionHeight);\n\n                selectionExists = crop.selectionExists();\n\n\n            };\n\n            // Validate form data\n            function validateForm() {\n                if (selectionExists)\n                    return true;\n\n                alert('Please make a selection first!');\n\n                return false;\n            };\n\n\n            //*************** MY EDIT *************************************\n        },\n        format: function (filename) {\n            // console.log(filename);\n            $('#image-name').val(filename);\n            $('#input-qr-text').val(filename);\n\n            return filename;\n        }\n    };\n\n    // Main plugin\n    $.ezdz = function (element, options) {\n        this.settings = $.extend(true, {}, defaults, $.ezdz.defaults, options);\n        this.$input = $(element);\n        var self = this,\n            settings = self.settings,\n            $input = self.$input;\n\n        if (!$input.is('input[type=\"file\"]')) {\n            return;\n        }\n\n        // Stop if not compatible with HTML5 file API\n        if (!$.ezdz.isBrowserCompatible()) {\n            return;\n        }\n\n        // private: Init the plugin\n        var init = function () {\n            var $ezdz, $container, value;\n\n            // Build the container\n            $container = $('<div class=\"' + settings.classes.main + '\" />')\n\n                .on('dragover.ezdz', function () {\n                    $(this).addClass(settings.classes.enter);\n\n                    if ($.isFunction(settings.enter)) {\n                        settings.enter.apply(this);\n                    }\n                })\n\n                .on('dragleave.ezdz', function () {\n                    $(this).removeClass(settings.classes.enter);\n\n                    if ($.isFunction(settings.leaved)) {\n                        settings.leaved.apply(this);\n                    }\n                })\n\n                .addClass(settings.className);\n\n            // Build the whole dropzone\n            $input\n                .wrap($container)\n                .before('<div>' + settings.text + '</div>');\n\n            $ezdz = $input.parent('.' + settings.classes.main);\n\n            // Preview a file at start if it's defined\n            value = settings.value || $input.data('value');\n\n            if (value) {\n                self.preview(value);\n            }\n\n            // Trigger the init callback\n            if ($.isFunction(settings.init)) {\n                settings.init.apply($input, [value]);\n            }\n\n            // Events on the input\n            $input\n\n                .on('focus.ezdz', function () {\n                    $ezdz.addClass(settings.classes.focus);\n                })\n\n                .on('blur.ezdz', function () {\n                    $ezdz.removeClass(settings.classes.focus);\n                })\n\n                .on('change.ezdz', function () {\n                    var file = this.files[0];\n\n                    // No file, so user has cancelled\n                    if (!file) {\n                        return;\n                    }\n\n                    // Info about the dropped or selected file\n                    var basename = file.name.replace(/\\\\/g, '/').replace(/.*\\//, ''),\n                        extension = file.name.split('.').pop(),\n                        formatted = settings.format(basename);\n\n\n                    file.extension = extension;\n\n                    // Mime-Types\n                    var allowed = $input.attr('accept'),\n                        accepted = false,\n                        valid = true,\n                        errors = {\n                            'mimeType': false,\n                            'maxSize': false,\n                            'width': false,\n                            'minWidth': false,\n                            'maxWidth': false,\n                            'height': false,\n                            'minHeight': false,\n                            'maxHeight': false\n                        };\n\n                    // Check the accepted Mime-Types from the input file\n                    if (allowed) {\n                        var types = allowed.split(/[,|]/);\n\n                        $.each(types, function (i, type) {\n                            type = $.trim(type);\n\n                            if ('.' + extension === type) {\n                                accepted = true;\n                                return false;\n                            }\n\n                            if (file.type === type) {\n                                accepted = true;\n                                return false;\n                            }\n\n                            // Mime-Type with wildcards ex. image/*\n                            if (type.indexOf('/*') !== false) {\n                                var a = type.replace('/*', ''),\n                                    b = file.type.replace(/(\\/.*)$/g, '');\n\n                                if (a === b) {\n                                    accepted = true;\n                                    return false;\n                                }\n                            }\n                        });\n\n                        if (accepted === false) {\n                            errors.mimeType = true;\n                        }\n                    } else {\n                        accepted = true;\n                    }\n\n                    // Reset the accepted / rejected classes\n                    $ezdz.removeClass(settings.classes.reject + ' ' + settings.classes.accept);\n\n                    // If the Mime-Type is not accepted\n                    if (accepted !== true) {\n                        $input.val('');\n                        $ezdz.addClass(settings.classes.reject);\n                        self.preview(null);\n\n                        // Trigger the reject callback\n                        if ($.isFunction(settings.reject)) {\n                            settings.reject.apply($input, [file, errors]);\n                        }\n                        return false;\n                    }\n\n                    // Read the added file\n                    var reader = new FileReader(file);\n\n                    // **************   MY EDIT    ***************************\n                    $(document.body).addClass(\"loading\");\n                    // **************   MY EDIT    ***************************\n\n\n                    reader.readAsDataURL(file);\n\n                    reader.onload = function (e) {\n                        var img = new Image(),\n                            isImage;\n\n                        file.data = e.target.result;\n\n\n                        // **************   MY EDIT    ***************************\n\n                        $('img#example').attr('src', file.data);\n\n                        // console.log(file.data);\n                        // **************   MY EDIT    ***************************\n\n                        setTimeout(function () {\n                            isImage = (img.width && img.height);\n\n                            // Validator\n                            if (settings.validators.maxSize && file.size > settings.validators.maxSize) {\n                                valid = false;\n                                errors.maxSize = true;\n                            }\n\n                            if (isImage) {\n                                file.width = img.width;\n                                file.height = img.height;\n\n                                if (settings.validators.width && img.width !== settings.validators.width) {\n                                    valid = false;\n                                    errors.width = true;\n                                }\n\n                                if (settings.validators.maxWidth && img.width > settings.validators.maxWidth) {\n                                    valid = false;\n                                    errors.maxWidth = true;\n                                }\n\n                                if (settings.validators.minWidth && img.width < settings.validators.minWidth) {\n                                    valid = false;\n                                    errors.minWidth = true;\n                                }\n\n                                if (settings.validators.height && img.height !== settings.validators.height) {\n                                    valid = false;\n                                    errors.height = true;\n                                }\n\n                                if (settings.validators.maxHeight && img.height > settings.validators.maxHeight) {\n                                    valid = false;\n                                    errors.maxHeight = true;\n                                }\n\n                                if (settings.validators.minHeight && img.height < settings.validators.minHeight) {\n                                    valid = false;\n                                    errors.minHeight = true;\n                                }\n                            }\n\n                            // The file is validated, so added to input\n                            if (valid === true) {\n                                $ezdz.find('img').remove();\n\n                                if (isImage && settings.previewImage === true) {\n                                    $ezdz.find('div').html($(img).fadeIn());\n\n\n                                } else {\n                                    $ezdz.find('div').html('<span>' + formatted + '</span>');\n                                }\n\n                                $ezdz.addClass(settings.classes.accept);\n\n                                // Trigger the accept callback\n                                if ($.isFunction(settings.accept)) {\n                                    settings.accept.apply($input, [file]);\n                                }\n                                // The file is invalidated, so rejected\n                            } else {\n                                $input.val('');\n                                $ezdz.addClass(settings.classes.reject);\n                                self.preview(null);\n\n                                // Trigger the reject callback\n                                if ($.isFunction(settings.reject)) {\n                                    settings.reject.apply($input, [file, errors]);\n                                }\n                            }\n                        }, 250);\n                    };\n                });\n        };\n\n        init();\n    };\n\n    // Inject a file or image in the preview\n    $.ezdz.prototype.preview = function (path, callback) {\n        var settings = this.settings,\n            $input = this.$input,\n            $ezdz = $input.parent('.' + settings.classes.main),\n            basename = (path || '').replace(/\\\\/g, '/').replace(/.*\\//, ''),\n            formatted = settings.format(basename);\n\n        if (!path) {\n            $ezdz\n                .removeClass([\n                    settings.classes.enter,\n                    settings.classes.reject,\n                    settings.classes.accept\n                ].join(' '))\n                .find('div').html(settings.text);\n\n            $input.val('');\n            return;\n        }\n\n        var img = new Image();\n        img.src = path;\n\n        // Is an image\n        img.onload = function () {\n            $ezdz.find('div').html($(img).fadeIn());\n\n            if ($.isFunction(callback)) {\n                callback.apply(this);\n            }\n        };\n\n        // Is not an image\n        img.onerror = function () {\n            $ezdz.find('div').html('<span>' + formatted + '</span>');\n\n            if ($.isFunction(callback)) {\n                callback.apply(this);\n            }\n        };\n\n        $ezdz.addClass(settings.classes.accept);\n    };\n\n    // Destroy ezdz\n    $.ezdz.prototype.destroy = function () {\n        var settings = this.settings,\n            $input = this.$input;\n\n        $input.parent('.' + settings.classes.main).replaceWith($input);\n        $input.off('*.ezdz');\n        $input.removeData('ezdz');\n    };\n\n    // Extend settings\n    $.ezdz.prototype.options = function (options) {\n        var settings = this.settings;\n\n        if (!options) {\n            return settings;\n        }\n\n        $.extend(true, this.settings, options);\n    };\n\n    // Get input container\n    $.ezdz.prototype.container = function () {\n        var settings = this.settings,\n            $input = this.$input;\n\n        return $input.parent('.' + settings.classes.main);\n    };\n\n    // Is browser compatible\n    $.ezdz.isBrowserCompatible = function () {\n        return !!(window.File && window.FileList && window.FileReader);\n    };\n\n    // Default options\n    $.ezdz.defaults = defaults;\n\n    // jQuery plugin\n    $.fn.ezdz = function (options) {\n        var args = arguments,\n            plugin;\n\n        return this.each(function () {\n            plugin = $(this).data('ezdz');\n\n            if (!plugin) {\n                return $(this).data('ezdz', new $.ezdz(this, options));\n            }\n            if (plugin[options]) {\n                return plugin[options].apply(plugin, Array.prototype.slice.call(args, 1));\n            } else {\n                $.error('Ezdz error - Method ' + options + ' does not exist.');\n            }\n        });\n    };\n}));\n"]}