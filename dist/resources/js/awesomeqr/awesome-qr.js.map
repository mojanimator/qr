{"version":3,"sources":["../../../../resources/js/awesomeqr/awesome-qr.js"],"names":["AwesomeQRCode","GIFE","require","__awesome_qr_base_path","gifEncoder","e","t","n","r","s","o","u","a","i","f","Error","code","l","exports","call","length","module","ByteStream","data","pos","prototype","readByte","peekByte","readBytes","bytes","Array","peekBytes","readString","len","str","String","fromCharCode","readBitArray","arr","bite","push","readUnsigned","littleEndian","DataParser","stream","output","parse","schema","parseParts","obj","part","parsePart","name","label","value","requires","loop","items","item","parts","parser","skip","bits","parseBits","bitsToNum","bitArray","reduce","details","out","key","slice","index","Parsers","readArray","size","countFunc","parent","count","GIF","window","gifSchema","arrayBuffer","byteData","Uint8Array","raw","hasImages","frames","image","decompressFrame","buildPatch","frame","totalPixels","descriptor","width","height","pixels","lzw","minCodeSize","blocks","lct","interlaced","deinterlace","dims","top","left","exists","colorTable","gct","gce","delay","disposalType","extras","disposal","transparentColorGiven","transparentIndex","transparentColorIndex","patch","generatePatch","pixelCount","MAX_STACK_SIZE","nullCode","npix","available","clear","code_mask","code_size","end_of_information","in_code","old_code","datum","data_size","first","bi","pi","dstPixels","prefix","suffix","pixelStack","newPixels","rows","cpRow","toRow","fromRow","fromPixels","splice","apply","concat","offsets","steps","pass","patchData","Uint8ClampedArray","colorIndex","color","decompressFrames","subBlocks","terminator","codes","future","userInput","sort","Math","pow","text","blockSize","application","comment","nextCode","schemaGIF","resolution","lsd","QR8bitByte","mode","QRMode","MODE_8BIT_BYTE","parsedData","byteArray","charCodeAt","unshift","getLength","buffer","write","put","QRCodeModel","typeNumber","errorCorrectLevel","modules","moduleCount","dataCache","dataList","addData","newData","isDark","row","col","getModuleCount","make","rsBlocks","QRRSBlock","getRSBlocks","QRBitBuffer","totalDataCount","dataCount","QRUtil","getLengthInBits","makeImpl","getBestMaskPattern","test","maskPattern","setupPositionProbePattern","setupPositionAdjustPattern","setupTimingPattern","setupTypeInfo","setupTypeNumber","createData","mapData","c","minLostPoint","pattern","lostPoint","getLostPoint","createMovieClip","target_mc","instance_name","depth","qr_mc","createEmptyMovieClip","cs","y","x","dark","beginFill","moveTo","lineTo","endFill","getPatternPosition","j","getBCHTypeNumber","mod","floor","getBCHTypeInfo","inc","bitIndex","byteIndex","mask","getMask","PAD0","PAD1","putBit","createBytes","offset","maxDcCount","maxEcCount","dcdata","ecdata","dcCount","ecCount","totalCount","max","rsPoly","getErrorCorrectPolynomial","rawPoly","QRPolynomial","modPoly","modIndex","get","totalCodeCount","MODE_NUMBER","MODE_ALPHA_NUM","MODE_KANJI","QRErrorCorrectLevel","L","M","Q","H","QRMaskPattern","PATTERN000","PATTERN001","PATTERN010","PATTERN011","PATTERN100","PATTERN101","PATTERN110","PATTERN111","PATTERN_POSITION_TABLE","G15","G18","G15_MASK","d","getBCHDigit","digit","errorCorrectLength","multiply","QRMath","gexp","type","qrCode","sameCount","darkCount","ratio","abs","glog","LOG_TABLE","EXP_TABLE","num","shift","undefined","RS_BLOCK_TABLE","rsBlock","getRsBlockTable","list","bufIndex","bit","QRCodeLimitLength","Drawing","_onMakeImage","_elImage","src","_elCanvas","toDataURL","style","display","_safeSetDataURI","fSuccess","fFail","self","_fFail","_fSuccess","_bSupportDataURI","el","document","createElement","fOnError","fOnSuccess","onabort","onerror","onload","htOption","_bIsPainted","_htOption","_oContext","getContext","alt","_callback","callback","_bindElement","bindElement","draw","oQRCode","_tCanvas","nCount","rawSize","rawMargin","margin","ceil","rawViewportSize","whiteMargin","backgroundDimming","nSize","viewportSize","gifBackground","gifFrames","dotScale","save","translate","_bkgCanvas","_bContext","_maskCanvas","_mContext","gif","autoColor","g","b","colorDark","backgroundImage","avgRGB","getAverageRGB","maskedDots","drawImage","rect","fillStyle","fill","binarize","colorLight","agnPatternCenter","xyOffset","bIsDark","isBlkPosCtr","isBlkPos","bProtected","nLeft","nTop","strokeStyle","lineWidth","_fillRectWithMask","inAgnRange","protectorStyle","fillRect","edgeCenter","agnX","agnY","_drawAlignProtector","_drawAlign","logoImage","logoScale","logoMargin","logoCornerRadius","restore","logoSize","_prepareRoundedCornerClip","clip","getImageData","threshold","parseInt","binarizeThreshold","R","G","B","sum","_greyscale","putImageData","_fCanvas","_fContext","getElementById","nodeName","elStyle","console","error","gifOutput","rawBkg","hRawBkg","patchCanvas","hPatchCanvas","forEach","workers","quality","createImageData","set","stdCanvas","hStdCanvas","addFrame","copy","ref","on","blob","FileReader","target","result","readAsDataURL","render","makeImage","isPainted","clearRect","round","nNumber","_getUTF8Length","sText","replacedText","encodeURI","toString","replace","ctx","w","h","beginPath","arcTo","closePath","_setPixel","imageData","p","canvas","maskSrc","bDark","fill_","context","centerX","centerY","nWidth","nHeight","create","vOption","correctLevel","_oQRCode","_oDrawing","makeCode","_getTypeNumber","nCorrectLevel","nType","nLimit","CorrectLevel","imgEl","defaultRGB","rgb","naturalHeight","offsetHeight","naturalWidth","offsetWidth","factory","define","amd","eventUtil"],"mappings":"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","file":"awesome-qr.js","sourcesContent":["/**\n *  Awesome-qr.js\n *      https://github.com/SumiMakito/Awesome-qr.js\n *\n *  Copyright © 2017 Makito <master@keep.moe>, https://www.keep.moe/\n *\n *  Licensed under Apache License 2.0 License.\n *  Copyright (c) 2017 Makito, https://www.keep.moe\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *  http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\n/**\n * @fileoverview\n * - Using the 'QRCode for Javascript library'\n * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.\n * - this library has no dependencies.\n *\n * @author davidshimjs\n * @see <a href=\"http://www.d-project.com/\" target=\"_blank\">http://www.d-project.com/</a>\n * @see <a href=\"http://jeromeetienne.github.com/jquery-qrcode/\" target=\"_blank\">http://jeromeetienne.github.com/jquery-qrcode/</a>\n */\n\nvar AwesomeQRCode;\nvar GIFE;\n\nrequire([__awesome_qr_base_path+'/gif'], function (gifEncoder) {\n    GIFE = gifEncoder;\n});\n\n// gifuct-js.js\n// https://raw.githubusercontent.com/matt-way/gifuct-js/master/dist/gifuct-js.js\n(function() {\n    (function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof require == \"function\" && require;\n                    if (!u && a) return a(o, !0);\n                    if (i) return i(o, !0);\n                    var f = new Error(\"Cannot find module '\" + o + \"'\");\n                    throw f.code = \"MODULE_NOT_FOUND\", f\n                }\n                var l = n[o] = { exports: {} };\n                t[o][0].call(l.exports, function(e) {\n                    var n = t[o][1][e];\n                    return s(n ? n : e)\n                }, l, l.exports, e, t, n, r)\n            }\n            return n[o].exports\n        }\n\n        var i = typeof require == \"function\" && require;\n        for (var o = 0; o < r.length; o++) s(r[o]);\n        return s\n    })({\n        1: [function(require, module, exports) {\n\n            // Stream object for reading off bytes from a byte array\n\n            function ByteStream(data) {\n                this.data = data;\n                this.pos = 0;\n            }\n\n            // read the next byte off the stream\n            ByteStream.prototype.readByte = function() {\n                return this.data[this.pos++];\n            };\n\n            // look at the next byte in the stream without updating the stream position\n            ByteStream.prototype.peekByte = function() {\n                return this.data[this.pos];\n            };\n\n            // read an array of bytes\n            ByteStream.prototype.readBytes = function(n) {\n                var bytes = new Array(n);\n                for (var i = 0; i < n; i++) {\n                    bytes[i] = this.readByte();\n                }\n                return bytes;\n            };\n\n            // peek at an array of bytes without updating the stream position\n            ByteStream.prototype.peekBytes = function(n) {\n                var bytes = new Array(n);\n                for (var i = 0; i < n; i++) {\n                    bytes[i] = this.data[this.pos + i];\n                }\n                return bytes;\n            };\n\n            // read a string from a byte set\n            ByteStream.prototype.readString = function(len) {\n                var str = '';\n                for (var i = 0; i < len; i++) {\n                    str += String.fromCharCode(this.readByte());\n                }\n                return str;\n            };\n\n            // read a single byte and return an array of bit booleans\n            ByteStream.prototype.readBitArray = function() {\n                var arr = [];\n                var bite = this.readByte();\n                for (var i = 7; i >= 0; i--) {\n                    arr.push(!!(bite & (1 << i)));\n                }\n                return arr;\n            };\n\n            // read an unsigned int with endian option\n            ByteStream.prototype.readUnsigned = function(littleEndian) {\n                var a = this.readBytes(2);\n                if (littleEndian) {\n                    return (a[1] << 8) + a[0];\n                } else {\n                    return (a[0] << 8) + a[1];\n                }\n            };\n\n            module.exports = ByteStream;\n        }, {}],\n        2: [function(require, module, exports) {\n\n            // Primary data parsing object used to parse byte arrays\n\n            var ByteStream = require('./bytestream');\n\n            function DataParser(data) {\n                this.stream = new ByteStream(data);\n                // the final parsed object from the data\n                this.output = {};\n            }\n\n            DataParser.prototype.parse = function(schema) {\n                // the top level schema is just the top level parts array\n                this.parseParts(this.output, schema);\n                return this.output;\n            };\n\n            // parse a set of hierarchy parts providing the parent object, and the subschema\n            DataParser.prototype.parseParts = function(obj, schema) {\n                for (var i = 0; i < schema.length; i++) {\n                    var part = schema[i];\n                    this.parsePart(obj, part);\n                }\n            };\n\n            DataParser.prototype.parsePart = function(obj, part) {\n                var name = part.label;\n                var value;\n\n                // make sure the part meets any parse requirements\n                if (part.requires && !part.requires(this.stream, this.output, obj)) {\n                    return;\n                }\n\n                if (part.loop) {\n                    // create a parse loop over the parts\n                    var items = [];\n                    while (part.loop(this.stream)) {\n                        var item = {};\n                        this.parseParts(item, part.parts);\n                        items.push(item);\n                    }\n                    obj[name] = items;\n                } else if (part.parts) {\n                    // process any child parts\n                    value = {};\n                    this.parseParts(value, part.parts);\n                    obj[name] = value;\n                } else if (part.parser) {\n                    // parse the value using a parser\n                    value = part.parser(this.stream, this.output, obj);\n                    if (!part.skip) {\n                        obj[name] = value;\n                    }\n                } else if (part.bits) {\n                    // convert the next byte to a set of bit fields\n                    obj[name] = this.parseBits(part.bits);\n                }\n            };\n\n            // combine bits to calculate value\n            function bitsToNum(bitArray) {\n                return bitArray.reduce(function(s, n) {\n                    return s * 2 + n;\n                }, 0);\n            }\n\n            // parse a byte as a bit set (flags and values)\n            DataParser.prototype.parseBits = function(details) {\n                var out = {};\n                var bits = this.stream.readBitArray();\n                for (var key in details) {\n                    var item = details[key];\n                    if (item.length) {\n                        // convert the bit set to value\n                        out[key] = bitsToNum(bits.slice(item.index, item.index + item.length));\n                    } else {\n                        out[key] = bits[item.index];\n                    }\n                }\n                return out;\n            };\n\n            module.exports = DataParser;\n        }, { \"./bytestream\": 1 }],\n        3: [function(require, module, exports) {\n\n            // a set of common parsers used with DataParser\n\n            var Parsers = {\n                // read a byte\n                readByte: function() {\n                    return function(stream) {\n                        return stream.readByte();\n                    };\n                },\n                // read an array of bytes\n                readBytes: function(length) {\n                    return function(stream) {\n                        return stream.readBytes(length);\n                    };\n                },\n                // read a string from bytes\n                readString: function(length) {\n                    return function(stream) {\n                        return stream.readString(length);\n                    };\n                },\n                // read an unsigned int (with endian)\n                readUnsigned: function(littleEndian) {\n                    return function(stream) {\n                        return stream.readUnsigned(littleEndian);\n                    };\n                },\n                // read an array of byte sets\n                readArray: function(size, countFunc) {\n                    return function(stream, obj, parent) {\n                        var count = countFunc(stream, obj, parent);\n                        var arr = new Array(count);\n                        for (var i = 0; i < count; i++) {\n                            arr[i] = stream.readBytes(size);\n                        }\n                        return arr;\n                    };\n                }\n            };\n\n            module.exports = Parsers;\n        }, {}],\n        4: [function(require, module, exports) {\n            // export wrapper for exposing library\n\n            var GIF = window.GIF || {};\n\n            //GIF = require('./gif');\n            GIF = require([__awesome_qr_base_path+'/gif']);\n\n            window.GIF = GIF;\n        }, {[__awesome_qr_base_path+'/gif']: 5 }],\n        5: [function(require, module, exports) {\n\n            // object used to represent array buffer data for a gif file\n\n            var DataParser = require('../bower_components/js-binary-schema-parser/src/dataparser');\n            var gifSchema = require('./schema');\n\n            function GIF(arrayBuffer) {\n                // convert to byte array\n                var byteData = new Uint8Array(arrayBuffer);\n                var parser = new DataParser(byteData);\n                // parse the data\n                this.raw = parser.parse(gifSchema);\n\n                // set a flag to make sure the gif contains at least one image\n                this.raw.hasImages = false;\n                for (var f = 0; f < this.raw.frames.length; f++) {\n                    if (this.raw.frames[f].image) {\n                        this.raw.hasImages = true;\n                        break;\n                    }\n                }\n            }\n\n            // process a single gif image frames data, decompressing it using LZW\n            // if buildPatch is true, the returned image will be a clamped 8 bit image patch\n            // for use directly with a canvas.\n            GIF.prototype.decompressFrame = function(index, buildPatch) {\n\n                // make sure a valid frame is requested\n                if (index >= this.raw.frames.length) {\n                    return null;\n                }\n\n                var frame = this.raw.frames[index];\n                if (frame.image) {\n                    // get the number of pixels\n                    var totalPixels = frame.image.descriptor.width * frame.image.descriptor.height;\n\n                    // do lzw decompression\n                    var pixels = lzw(frame.image.data.minCodeSize, frame.image.data.blocks, totalPixels);\n\n                    // deal with interlacing if necessary\n                    if (frame.image.descriptor.lct.interlaced) {\n                        pixels = deinterlace(pixels, frame.image.descriptor.width);\n                    }\n\n                    // setup usable image object\n                    var image = {\n                        pixels: pixels,\n                        dims: {\n                            top: frame.image.descriptor.top,\n                            left: frame.image.descriptor.left,\n                            width: frame.image.descriptor.width,\n                            height: frame.image.descriptor.height\n                        }\n                    };\n\n                    // color table\n                    if (frame.image.descriptor.lct && frame.image.descriptor.lct.exists) {\n                        image.colorTable = frame.image.lct;\n                    } else {\n                        image.colorTable = this.raw.gct;\n                    }\n\n                    // add per frame relevant gce information\n                    if (frame.gce) {\n                        image.delay = (frame.gce.delay || 10) * 10; // convert to ms\n                        image.disposalType = frame.gce.extras.disposal;\n                        // transparency\n                        if (frame.gce.extras.transparentColorGiven) {\n                            image.transparentIndex = frame.gce.transparentColorIndex;\n                        }\n                    }\n\n                    // create canvas usable imagedata if desired\n                    if (buildPatch) {\n                        image.patch = generatePatch(image);\n                    }\n\n                    return image;\n                }\n\n                // frame does not contains image\n                return null;\n\n\n                /**\n                 * javascript port of java LZW decompression\n                 * Original java author url: https://gist.github.com/devunwired/4479231\n                 */\n                function lzw(minCodeSize, data, pixelCount) {\n\n                    var MAX_STACK_SIZE = 4096;\n                    var nullCode = -1;\n\n                    var npix = pixelCount;\n                    var available, clear, code_mask, code_size, end_of_information, in_code, old_code, bits, code, i,\n                        datum, data_size, first, top, bi, pi;\n\n                    var dstPixels = new Array(pixelCount);\n                    var prefix = new Array(MAX_STACK_SIZE);\n                    var suffix = new Array(MAX_STACK_SIZE);\n                    var pixelStack = new Array(MAX_STACK_SIZE + 1);\n\n                    // Initialize GIF data stream decoder.\n                    data_size = minCodeSize;\n                    clear = 1 << data_size;\n                    end_of_information = clear + 1;\n                    available = clear + 2;\n                    old_code = nullCode;\n                    code_size = data_size + 1;\n                    code_mask = (1 << code_size) - 1;\n                    for (code = 0; code < clear; code++) {\n                        prefix[code] = 0;\n                        suffix[code] = code;\n                    }\n\n                    // Decode GIF pixel stream.\n                    datum = bits = count = first = top = pi = bi = 0;\n                    for (i = 0; i < npix;) {\n                        if (top === 0) {\n                            if (bits < code_size) {\n\n                                // get the next byte\n                                datum += data[bi] << bits;\n\n                                bits += 8;\n                                bi++;\n                                continue;\n                            }\n                            // Get the next code.\n                            code = datum & code_mask;\n                            datum >>= code_size;\n                            bits -= code_size;\n                            // Interpret the code\n                            if ((code > available) || (code == end_of_information)) {\n                                break;\n                            }\n                            if (code == clear) {\n                                // Reset decoder.\n                                code_size = data_size + 1;\n                                code_mask = (1 << code_size) - 1;\n                                available = clear + 2;\n                                old_code = nullCode;\n                                continue;\n                            }\n                            if (old_code == nullCode) {\n                                pixelStack[top++] = suffix[code];\n                                old_code = code;\n                                first = code;\n                                continue;\n                            }\n                            in_code = code;\n                            if (code == available) {\n                                pixelStack[top++] = first;\n                                code = old_code;\n                            }\n                            while (code > clear) {\n                                pixelStack[top++] = suffix[code];\n                                code = prefix[code];\n                            }\n\n                            first = suffix[code] & 0xff;\n                            pixelStack[top++] = first;\n\n                            // add a new string to the table, but only if space is available\n                            // if not, just continue with current table until a clear code is found\n                            // (deferred clear code implementation as per GIF spec)\n                            if (available < MAX_STACK_SIZE) {\n                                prefix[available] = old_code;\n                                suffix[available] = first;\n                                available++;\n                                if (((available & code_mask) === 0) && (available < MAX_STACK_SIZE)) {\n                                    code_size++;\n                                    code_mask += available;\n                                }\n                            }\n                            old_code = in_code;\n                        }\n                        // Pop a pixel off the pixel stack.\n                        top--;\n                        dstPixels[pi++] = pixelStack[top];\n                        i++;\n                    }\n\n                    for (i = pi; i < npix; i++) {\n                        dstPixels[i] = 0; // clear missing pixels\n                    }\n\n                    return dstPixels;\n                }\n\n                // deinterlace function from https://github.com/shachaf/jsgif\n                function deinterlace(pixels, width) {\n\n                    var newPixels = new Array(pixels.length);\n                    var rows = pixels.length / width;\n                    var cpRow = function(toRow, fromRow) {\n                        var fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\n                        newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\n                    };\n\n                    // See appendix E.\n                    var offsets = [0, 4, 2, 1];\n                    var steps = [8, 8, 4, 2];\n\n                    var fromRow = 0;\n                    for (var pass = 0; pass < 4; pass++) {\n                        for (var toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n                            cpRow(toRow, fromRow);\n                            fromRow++;\n                        }\n                    }\n\n                    return newPixels;\n                }\n\n                // create a clamped byte array patch for the frame image to be used directly with a canvas\n                // TODO: could potentially squeeze some performance by doing a direct 32bit write per iteration\n                function generatePatch(image) {\n\n                    var totalPixels = image.pixels.length;\n                    var patchData = new Uint8ClampedArray(totalPixels * 4);\n                    for (var i = 0; i < totalPixels; i++) {\n                        var pos = i * 4;\n                        var colorIndex = image.pixels[i];\n                        var color = image.colorTable[colorIndex];\n                        patchData[pos] = color[0];\n                        patchData[pos + 1] = color[1];\n                        patchData[pos + 2] = color[2];\n                        patchData[pos + 3] = colorIndex !== image.transparentIndex ? 255 : 0;\n                    }\n\n                    return patchData;\n                }\n            };\n\n            // returns all frames decompressed\n            GIF.prototype.decompressFrames = function(buildPatch) {\n                var frames = [];\n                for (var i = 0; i < this.raw.frames.length; i++) {\n                    var frame = this.raw.frames[i];\n                    if (frame.image) {\n                        frames.push(this.decompressFrame(i, buildPatch));\n                    }\n                }\n                return frames;\n            };\n\n            module.exports = GIF;\n        }, { \"../bower_components/js-binary-schema-parser/src/dataparser\": 2, \"./schema\": 6 }],\n        6: [function(require, module, exports) {\n\n            // Schema for the js file parser to use to parse gif files\n            // For js object convenience (re-use), the schema objects are approximately reverse ordered\n\n            // common parsers available\n            var Parsers = require('../bower_components/js-binary-schema-parser/src/parsers');\n\n            // a set of 0x00 terminated subblocks\n            var subBlocks = {\n                label: 'blocks',\n                parser: function(stream) {\n                    var out = [];\n                    var terminator = 0x00;\n                    for (var size = stream.readByte(); size !== terminator; size = stream.readByte()) {\n                        out = out.concat(stream.readBytes(size));\n                    }\n                    return out;\n                }\n            };\n\n            // global control extension\n            var gce = {\n                label: 'gce',\n                requires: function(stream) {\n                    // just peek at the top two bytes, and if true do this\n                    var codes = stream.peekBytes(2);\n                    return codes[0] === 0x21 && codes[1] === 0xF9;\n                },\n                parts: [\n                    { label: 'codes', parser: Parsers.readBytes(2), skip: true },\n                    { label: 'byteSize', parser: Parsers.readByte() },\n                    {\n                        label: 'extras',\n                        bits: {\n                            future: { index: 0, length: 3 },\n                            disposal: { index: 3, length: 3 },\n                            userInput: { index: 6 },\n                            transparentColorGiven: { index: 7 }\n                        }\n                    },\n                    { label: 'delay', parser: Parsers.readUnsigned(true) },\n                    { label: 'transparentColorIndex', parser: Parsers.readByte() },\n                    { label: 'terminator', parser: Parsers.readByte(), skip: true }\n                ]\n            };\n\n            // image pipeline block\n            var image = {\n                label: 'image',\n                requires: function(stream) {\n                    // peek at the next byte\n                    var code = stream.peekByte();\n                    return code === 0x2C;\n                },\n                parts: [\n                    { label: 'code', parser: Parsers.readByte(), skip: true },\n                    {\n                        label: 'descriptor', // image descriptor\n                        parts: [\n                            { label: 'left', parser: Parsers.readUnsigned(true) },\n                            { label: 'top', parser: Parsers.readUnsigned(true) },\n                            { label: 'width', parser: Parsers.readUnsigned(true) },\n                            { label: 'height', parser: Parsers.readUnsigned(true) },\n                            {\n                                label: 'lct',\n                                bits: {\n                                    exists: { index: 0 },\n                                    interlaced: { index: 1 },\n                                    sort: { index: 2 },\n                                    future: { index: 3, length: 2 },\n                                    size: { index: 5, length: 3 }\n                                }\n                            }\n                        ]\n                    }, {\n                        label: 'lct', // optional local color table\n                        requires: function(stream, obj, parent) {\n                            return parent.descriptor.lct.exists;\n                        },\n                        parser: Parsers.readArray(3, function(stream, obj, parent) {\n                            return Math.pow(2, parent.descriptor.lct.size + 1);\n                        })\n                    }, {\n                        label: 'data', // the image data blocks\n                        parts: [\n                            { label: 'minCodeSize', parser: Parsers.readByte() },\n                            subBlocks\n                        ]\n                    }\n                ]\n            };\n\n            // plain text block\n            var text = {\n                label: 'text',\n                requires: function(stream) {\n                    // just peek at the top two bytes, and if true do this\n                    var codes = stream.peekBytes(2);\n                    return codes[0] === 0x21 && codes[1] === 0x01;\n                },\n                parts: [\n                    { label: 'codes', parser: Parsers.readBytes(2), skip: true },\n                    { label: 'blockSize', parser: Parsers.readByte() },\n                    {\n                        label: 'preData',\n                        parser: function(stream, obj, parent) {\n                            return stream.readBytes(parent.text.blockSize);\n                        }\n                    },\n                    subBlocks\n                ]\n            };\n\n            // application block\n            var application = {\n                label: 'application',\n                requires: function(stream, obj, parent) {\n                    // make sure this frame doesn't already have a gce, text, comment, or image\n                    // as that means this block should be attached to the next frame\n                    //if(parent.gce || parent.text || parent.image || parent.comment){ return false; }\n\n                    // peek at the top two bytes\n                    var codes = stream.peekBytes(2);\n                    return codes[0] === 0x21 && codes[1] === 0xFF;\n                },\n                parts: [\n                    { label: 'codes', parser: Parsers.readBytes(2), skip: true },\n                    { label: 'blockSize', parser: Parsers.readByte() },\n                    {\n                        label: 'id',\n                        parser: function(stream, obj, parent) {\n                            return stream.readString(parent.blockSize);\n                        }\n                    },\n                    subBlocks\n                ]\n            };\n\n            // comment block\n            var comment = {\n                label: 'comment',\n                requires: function(stream, obj, parent) {\n                    // make sure this frame doesn't already have a gce, text, comment, or image\n                    // as that means this block should be attached to the next frame\n                    //if(parent.gce || parent.text || parent.image || parent.comment){ return false; }\n\n                    // peek at the top two bytes\n                    var codes = stream.peekBytes(2);\n                    return codes[0] === 0x21 && codes[1] === 0xFE;\n                },\n                parts: [\n                    { label: 'codes', parser: Parsers.readBytes(2), skip: true },\n                    subBlocks\n                ]\n            };\n\n            // frames of ext and image data\n            var frames = {\n                label: 'frames',\n                parts: [\n                    gce,\n                    application,\n                    comment,\n                    image,\n                    text\n                ],\n                loop: function(stream) {\n                    var nextCode = stream.peekByte();\n                    // rather than check for a terminator, we should check for the existence\n                    // of an ext or image block to avoid infinite loops\n                    //var terminator = 0x3B;\n                    //return nextCode !== terminator;\n                    return nextCode === 0x21 || nextCode === 0x2C;\n                }\n            };\n\n            // main GIF schema\n            var schemaGIF = [{\n                    label: 'header', // gif header\n                    parts: [\n                        { label: 'signature', parser: Parsers.readString(3) },\n                        { label: 'version', parser: Parsers.readString(3) }\n                    ]\n                }, {\n                    label: 'lsd', // local screen descriptor\n                    parts: [\n                        { label: 'width', parser: Parsers.readUnsigned(true) },\n                        { label: 'height', parser: Parsers.readUnsigned(true) },\n                        {\n                            label: 'gct',\n                            bits: {\n                                exists: { index: 0 },\n                                resolution: { index: 1, length: 3 },\n                                sort: { index: 4 },\n                                size: { index: 5, length: 3 }\n                            }\n                        },\n                        { label: 'backgroundColorIndex', parser: Parsers.readByte() },\n                        { label: 'pixelAspectRatio', parser: Parsers.readByte() }\n                    ]\n                }, {\n                    label: 'gct', // global color table\n                    requires: function(stream, obj) {\n                        return obj.lsd.gct.exists;\n                    },\n                    parser: Parsers.readArray(3, function(stream, obj) {\n                        return Math.pow(2, obj.lsd.gct.size + 1);\n                    })\n                },\n                frames // content frames\n            ];\n\n            module.exports = schemaGIF;\n        }, { \"../bower_components/js-binary-schema-parser/src/parsers\": 3 }]\n    }, {}, [4])\n})();\n\n// QR CODE CORE LIBRARY DEFINITION\n(function() {\n    // QR CODE CORE LIBRARY DEFINITION START\n    // SHOULD NOT BE MODIFIED\n    //\n    // QRCode for JavaScript\n    //\n    // Copyright (c) 2009 Kazuhiko Arase\n    //\n    // URL: http://www.d-project.com/\n    //\n    // Licensed under the MIT license:\n    //   http://www.opensource.org/licenses/mit-license.php\n    //\n    // The word \"QR Code\" is registered trademark of DENSO WAVE INCORPORATED\n    //   http://www.denso-wave.com/qrcode/faqpatent-e.html\n    //\n\n    function QR8bitByte(data) {\n        this.mode = QRMode.MODE_8BIT_BYTE;\n        this.data = data;\n        this.parsedData = [];\n        for (var i = 0, l = this.data.length; i < l; i++) {\n            var byteArray = [];\n            var code = this.data.charCodeAt(i);\n            if (code > 0x10000) {\n                byteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);\n                byteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);\n                byteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);\n                byteArray[3] = 0x80 | (code & 0x3F)\n            } else if (code > 0x800) {\n                byteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);\n                byteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);\n                byteArray[2] = 0x80 | (code & 0x3F)\n            } else if (code > 0x80) {\n                byteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);\n                byteArray[1] = 0x80 | (code & 0x3F)\n            } else {\n                byteArray[0] = code\n            }\n            this.parsedData.push(byteArray)\n        }\n        this.parsedData = Array.prototype.concat.apply([], this.parsedData);\n        if (this.parsedData.length != this.data.length) {\n            this.parsedData.unshift(191);\n            this.parsedData.unshift(187);\n            this.parsedData.unshift(239)\n        }\n    }\n\n    QR8bitByte.prototype = {\n        getLength: function(buffer) {\n            return this.parsedData.length\n        },\n        write: function(buffer) {\n            for (var i = 0, l = this.parsedData.length; i < l; i++) {\n                buffer.put(this.parsedData[i], 8)\n            }\n        }\n    };\n\n    function QRCodeModel(typeNumber, errorCorrectLevel) {\n        this.typeNumber = typeNumber;\n        this.errorCorrectLevel = errorCorrectLevel;\n        this.modules = null;\n        this.moduleCount = 0;\n        this.dataCache = null;\n        this.dataList = []\n    }\n\n    QRCodeModel.prototype = {\n        addData: function(data) {\n            var newData = new QR8bitByte(data);\n            this.dataList.push(newData);\n            this.dataCache = null\n        },\n        isDark: function(row, col) {\n            if (row < 0 || this.moduleCount <= row || col < 0 || this.moduleCount <= col) {\n                throw new Error(row + \",\" + col)\n            }\n            return this.modules[row][col]\n        },\n        getModuleCount: function() {\n            return this.moduleCount\n        },\n        make: function() {\n            /////////////////////////////////////////////\n            if (this.typeNumber < 1) {\n                var typeNumber = 1;\n                for (typeNumber = 1; typeNumber < 40; typeNumber++) {\n                    var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, this.errorCorrectLevel);\n\n                    var buffer = new QRBitBuffer();\n                    var totalDataCount = 0;\n                    for (var i = 0; i < rsBlocks.length; i++) {\n                        totalDataCount += rsBlocks[i].dataCount;\n                    }\n\n                    for (var i = 0; i < this.dataList.length; i++) {\n                        var data = this.dataList[i];\n                        buffer.put(data.mode, 4);\n                        buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));\n                        data.write(buffer);\n                    }\n                    if (buffer.getLengthInBits() <= totalDataCount * 8)\n                        break;\n                }\n                this.typeNumber = typeNumber;\n            }\n            /////////////////////////////////////////////\n            this.makeImpl(!1, this.getBestMaskPattern())\n        },\n        makeImpl: function(test, maskPattern) {\n            this.moduleCount = this.typeNumber * 4 + 17;\n            this.modules = new Array(this.moduleCount);\n            for (var row = 0; row < this.moduleCount; row++) {\n                this.modules[row] = new Array(this.moduleCount);\n                for (var col = 0; col < this.moduleCount; col++) {\n                    this.modules[row][col] = null\n                }\n            }\n            this.setupPositionProbePattern(0, 0);\n            this.setupPositionProbePattern(this.moduleCount - 7, 0);\n            this.setupPositionProbePattern(0, this.moduleCount - 7);\n            this.setupPositionAdjustPattern();\n            this.setupTimingPattern();\n            this.setupTypeInfo(test, maskPattern);\n            if (this.typeNumber >= 7) {\n                this.setupTypeNumber(test)\n            }\n            if (this.dataCache == null) {\n                this.dataCache = QRCodeModel.createData(this.typeNumber, this.errorCorrectLevel, this.dataList)\n            }\n            this.mapData(this.dataCache, maskPattern)\n        },\n        setupPositionProbePattern: function(row, col) {\n            for (var r = -1; r <= 7; r++) {\n                if (row + r <= -1 || this.moduleCount <= row + r) continue;\n                for (var c = -1; c <= 7; c++) {\n                    if (col + c <= -1 || this.moduleCount <= col + c) continue;\n                    if ((0 <= r && r <= 6 && (c == 0 || c == 6)) || (0 <= c && c <= 6 && (r == 0 || r == 6)) || (2 <= r && r <= 4 && 2 <= c && c <= 4)) {\n                        this.modules[row + r][col + c] = !0\n                    } else {\n                        this.modules[row + r][col + c] = !1\n                    }\n                }\n            }\n        },\n        getBestMaskPattern: function() {\n            var minLostPoint = 0;\n            var pattern = 0;\n            for (var i = 0; i < 8; i++) {\n                this.makeImpl(!0, i);\n                var lostPoint = QRUtil.getLostPoint(this);\n                if (i == 0 || minLostPoint > lostPoint) {\n                    minLostPoint = lostPoint;\n                    pattern = i\n                }\n            }\n            return pattern\n        },\n        createMovieClip: function(target_mc, instance_name, depth) {\n            var qr_mc = target_mc.createEmptyMovieClip(instance_name, depth);\n            var cs = 1;\n            this.make();\n            for (var row = 0; row < this.modules.length; row++) {\n                var y = row * cs;\n                for (var col = 0; col < this.modules[row].length; col++) {\n                    var x = col * cs;\n                    var dark = this.modules[row][col];\n                    if (dark) {\n                        qr_mc.beginFill(0, 100);\n                        qr_mc.moveTo(x, y);\n                        qr_mc.lineTo(x + cs, y);\n                        qr_mc.lineTo(x + cs, y + cs);\n                        qr_mc.lineTo(x, y + cs);\n                        qr_mc.endFill()\n                    }\n                }\n            }\n            return qr_mc\n        },\n        setupTimingPattern: function() {\n            for (var r = 8; r < this.moduleCount - 8; r++) {\n                if (this.modules[r][6] != null) {\n                    continue\n                }\n                this.modules[r][6] = (r % 2 == 0)\n            }\n            for (var c = 8; c < this.moduleCount - 8; c++) {\n                if (this.modules[6][c] != null) {\n                    continue\n                }\n                this.modules[6][c] = (c % 2 == 0)\n            }\n        },\n        setupPositionAdjustPattern: function() {\n            var pos = QRUtil.getPatternPosition(this.typeNumber);\n            for (var i = 0; i < pos.length; i++) {\n                for (var j = 0; j < pos.length; j++) {\n                    var row = pos[i];\n                    var col = pos[j];\n                    if (this.modules[row][col] != null) {\n                        continue\n                    }\n                    for (var r = -2; r <= 2; r++) {\n                        for (var c = -2; c <= 2; c++) {\n                            if (r == -2 || r == 2 || c == -2 || c == 2 || (r == 0 && c == 0)) {\n                                this.modules[row + r][col + c] = !0\n                            } else {\n                                this.modules[row + r][col + c] = !1\n                            }\n                        }\n                    }\n                }\n            }\n        },\n        setupTypeNumber: function(test) {\n            var bits = QRUtil.getBCHTypeNumber(this.typeNumber);\n            for (var i = 0; i < 18; i++) {\n                var mod = (!test && ((bits >> i) & 1) == 1);\n                this.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod\n            }\n            for (var i = 0; i < 18; i++) {\n                var mod = (!test && ((bits >> i) & 1) == 1);\n                this.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod\n            }\n        },\n        setupTypeInfo: function(test, maskPattern) {\n            var data = (this.errorCorrectLevel << 3) | maskPattern;\n            var bits = QRUtil.getBCHTypeInfo(data);\n            for (var i = 0; i < 15; i++) {\n                var mod = (!test && ((bits >> i) & 1) == 1);\n                if (i < 6) {\n                    this.modules[i][8] = mod\n                } else if (i < 8) {\n                    this.modules[i + 1][8] = mod\n                } else {\n                    this.modules[this.moduleCount - 15 + i][8] = mod\n                }\n            }\n            for (var i = 0; i < 15; i++) {\n                var mod = (!test && ((bits >> i) & 1) == 1);\n                if (i < 8) {\n                    this.modules[8][this.moduleCount - i - 1] = mod\n                } else if (i < 9) {\n                    this.modules[8][15 - i - 1 + 1] = mod\n                } else {\n                    this.modules[8][15 - i - 1] = mod\n                }\n            }\n            this.modules[this.moduleCount - 8][8] = (!test)\n        },\n        mapData: function(data, maskPattern) {\n            var inc = -1;\n            var row = this.moduleCount - 1;\n            var bitIndex = 7;\n            var byteIndex = 0;\n            for (var col = this.moduleCount - 1; col > 0; col -= 2) {\n                if (col == 6) col--;\n                while (!0) {\n                    for (var c = 0; c < 2; c++) {\n                        if (this.modules[row][col - c] == null) {\n                            var dark = !1;\n                            if (byteIndex < data.length) {\n                                dark = (((data[byteIndex] >>> bitIndex) & 1) == 1)\n                            }\n                            var mask = QRUtil.getMask(maskPattern, row, col - c);\n                            if (mask) {\n                                dark = !dark\n                            }\n                            this.modules[row][col - c] = dark;\n                            bitIndex--;\n                            if (bitIndex == -1) {\n                                byteIndex++;\n                                bitIndex = 7\n                            }\n                        }\n                    }\n                    row += inc;\n                    if (row < 0 || this.moduleCount <= row) {\n                        row -= inc;\n                        inc = -inc;\n                        break\n                    }\n                }\n            }\n        }\n    };\n    QRCodeModel.PAD0 = 0xEC;\n    QRCodeModel.PAD1 = 0x11;\n    QRCodeModel.createData = function(typeNumber, errorCorrectLevel, dataList) {\n        var rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);\n        var buffer = new QRBitBuffer();\n        for (var i = 0; i < dataList.length; i++) {\n            var data = dataList[i];\n            buffer.put(data.mode, 4);\n            buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));\n            data.write(buffer)\n        }\n        var totalDataCount = 0;\n        for (var i = 0; i < rsBlocks.length; i++) {\n            totalDataCount += rsBlocks[i].dataCount\n        }\n        if (buffer.getLengthInBits() > totalDataCount * 8) {\n            throw new Error(\"code length overflow. (\" + buffer.getLengthInBits() + \">\" + totalDataCount * 8 + \")\")\n        }\n        if (buffer.getLengthInBits() + 4 <= totalDataCount * 8) {\n            buffer.put(0, 4)\n        }\n        while (buffer.getLengthInBits() % 8 != 0) {\n            buffer.putBit(!1)\n        }\n        while (!0) {\n            if (buffer.getLengthInBits() >= totalDataCount * 8) {\n                break\n            }\n            buffer.put(QRCodeModel.PAD0, 8);\n            if (buffer.getLengthInBits() >= totalDataCount * 8) {\n                break\n            }\n            buffer.put(QRCodeModel.PAD1, 8)\n        }\n        return QRCodeModel.createBytes(buffer, rsBlocks)\n    };\n    QRCodeModel.createBytes = function(buffer, rsBlocks) {\n        var offset = 0;\n        var maxDcCount = 0;\n        var maxEcCount = 0;\n        var dcdata = new Array(rsBlocks.length);\n        var ecdata = new Array(rsBlocks.length);\n        for (var r = 0; r < rsBlocks.length; r++) {\n            var dcCount = rsBlocks[r].dataCount;\n            var ecCount = rsBlocks[r].totalCount - dcCount;\n            maxDcCount = Math.max(maxDcCount, dcCount);\n            maxEcCount = Math.max(maxEcCount, ecCount);\n            dcdata[r] = new Array(dcCount);\n            for (var i = 0; i < dcdata[r].length; i++) {\n                dcdata[r][i] = 0xff & buffer.buffer[i + offset]\n            }\n            offset += dcCount;\n            var rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);\n            var rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);\n            var modPoly = rawPoly.mod(rsPoly);\n            ecdata[r] = new Array(rsPoly.getLength() - 1);\n            for (var i = 0; i < ecdata[r].length; i++) {\n                var modIndex = i + modPoly.getLength() - ecdata[r].length;\n                ecdata[r][i] = (modIndex >= 0) ? modPoly.get(modIndex) : 0\n            }\n        }\n        var totalCodeCount = 0;\n        for (var i = 0; i < rsBlocks.length; i++) {\n            totalCodeCount += rsBlocks[i].totalCount\n        }\n        var data = new Array(totalCodeCount);\n        var index = 0;\n        for (var i = 0; i < maxDcCount; i++) {\n            for (var r = 0; r < rsBlocks.length; r++) {\n                if (i < dcdata[r].length) {\n                    data[index++] = dcdata[r][i]\n                }\n            }\n        }\n        for (var i = 0; i < maxEcCount; i++) {\n            for (var r = 0; r < rsBlocks.length; r++) {\n                if (i < ecdata[r].length) {\n                    data[index++] = ecdata[r][i]\n                }\n            }\n        }\n        return data\n    };\n    var QRMode = { MODE_NUMBER: 1 << 0, MODE_ALPHA_NUM: 1 << 1, MODE_8BIT_BYTE: 1 << 2, MODE_KANJI: 1 << 3 };\n    var QRErrorCorrectLevel = { L: 1, M: 0, Q: 3, H: 2 };\n    var QRMaskPattern = {\n        PATTERN000: 0,\n        PATTERN001: 1,\n        PATTERN010: 2,\n        PATTERN011: 3,\n        PATTERN100: 4,\n        PATTERN101: 5,\n        PATTERN110: 6,\n        PATTERN111: 7\n    };\n    var QRUtil = {\n        PATTERN_POSITION_TABLE: [\n            [],\n            [6, 18],\n            [6, 22],\n            [6, 26],\n            [6, 30],\n            [6, 34],\n            [6, 22, 38],\n            [6, 24, 42],\n            [6, 26, 46],\n            [6, 28, 50],\n            [6, 30, 54],\n            [6, 32, 58],\n            [6, 34, 62],\n            [6, 26, 46, 66],\n            [6, 26, 48, 70],\n            [6, 26, 50, 74],\n            [6, 30, 54, 78],\n            [6, 30, 56, 82],\n            [6, 30, 58, 86],\n            [6, 34, 62, 90],\n            [6, 28, 50, 72, 94],\n            [6, 26, 50, 74, 98],\n            [6, 30, 54, 78, 102],\n            [6, 28, 54, 80, 106],\n            [6, 32, 58, 84, 110],\n            [6, 30, 58, 86, 114],\n            [6, 34, 62, 90, 118],\n            [6, 26, 50, 74, 98, 122],\n            [6, 30, 54, 78, 102, 126],\n            [6, 26, 52, 78, 104, 130],\n            [6, 30, 56, 82, 108, 134],\n            [6, 34, 60, 86, 112, 138],\n            [6, 30, 58, 86, 114, 142],\n            [6, 34, 62, 90, 118, 146],\n            [6, 30, 54, 78, 102, 126, 150],\n            [6, 24, 50, 76, 102, 128, 154],\n            [6, 28, 54, 80, 106, 132, 158],\n            [6, 32, 58, 84, 110, 136, 162],\n            [6, 26, 54, 82, 110, 138, 166],\n            [6, 30, 58, 86, 114, 142, 170]\n        ],\n        G15: (1 << 10) | (1 << 8) | (1 << 5) | (1 << 4) | (1 << 2) | (1 << 1) | (1 << 0),\n        G18: (1 << 12) | (1 << 11) | (1 << 10) | (1 << 9) | (1 << 8) | (1 << 5) | (1 << 2) | (1 << 0),\n        G15_MASK: (1 << 14) | (1 << 12) | (1 << 10) | (1 << 4) | (1 << 1),\n        getBCHTypeInfo: function(data) {\n            var d = data << 10;\n            while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) {\n                d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15)))\n            }\n            return ((data << 10) | d) ^ QRUtil.G15_MASK\n        },\n        getBCHTypeNumber: function(data) {\n            var d = data << 12;\n            while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) {\n                d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18)))\n            }\n            return (data << 12) | d\n        },\n        getBCHDigit: function(data) {\n            var digit = 0;\n            while (data != 0) {\n                digit++;\n                data >>>= 1\n            }\n            return digit\n        },\n        getPatternPosition: function(typeNumber) {\n            return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1]\n        },\n        getMask: function(maskPattern, i, j) {\n            switch (maskPattern) {\n                case QRMaskPattern.PATTERN000:\n                    return (i + j) % 2 == 0;\n                case QRMaskPattern.PATTERN001:\n                    return i % 2 == 0;\n                case QRMaskPattern.PATTERN010:\n                    return j % 3 == 0;\n                case QRMaskPattern.PATTERN011:\n                    return (i + j) % 3 == 0;\n                case QRMaskPattern.PATTERN100:\n                    return (Math.floor(i / 2) + Math.floor(j / 3)) % 2 == 0;\n                case QRMaskPattern.PATTERN101:\n                    return (i * j) % 2 + (i * j) % 3 == 0;\n                case QRMaskPattern.PATTERN110:\n                    return ((i * j) % 2 + (i * j) % 3) % 2 == 0;\n                case QRMaskPattern.PATTERN111:\n                    return ((i * j) % 3 + (i + j) % 2) % 2 == 0;\n                default:\n                    throw new Error(\"bad maskPattern:\" + maskPattern)\n            }\n        },\n        getErrorCorrectPolynomial: function(errorCorrectLength) {\n            var a = new QRPolynomial([1], 0);\n            for (var i = 0; i < errorCorrectLength; i++) {\n                a = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0))\n            }\n            return a\n        },\n        getLengthInBits: function(mode, type) {\n            if (1 <= type && type < 10) {\n                switch (mode) {\n                    case QRMode.MODE_NUMBER:\n                        return 10;\n                    case QRMode.MODE_ALPHA_NUM:\n                        return 9;\n                    case QRMode.MODE_8BIT_BYTE:\n                        return 8;\n                    case QRMode.MODE_KANJI:\n                        return 8;\n                    default:\n                        throw new Error(\"mode:\" + mode)\n                }\n            } else if (type < 27) {\n                switch (mode) {\n                    case QRMode.MODE_NUMBER:\n                        return 12;\n                    case QRMode.MODE_ALPHA_NUM:\n                        return 11;\n                    case QRMode.MODE_8BIT_BYTE:\n                        return 16;\n                    case QRMode.MODE_KANJI:\n                        return 10;\n                    default:\n                        throw new Error(\"mode:\" + mode)\n                }\n            } else if (type < 41) {\n                switch (mode) {\n                    case QRMode.MODE_NUMBER:\n                        return 14;\n                    case QRMode.MODE_ALPHA_NUM:\n                        return 13;\n                    case QRMode.MODE_8BIT_BYTE:\n                        return 16;\n                    case QRMode.MODE_KANJI:\n                        return 12;\n                    default:\n                        throw new Error(\"mode:\" + mode)\n                }\n            } else {\n                throw new Error(\"type:\" + type)\n            }\n        },\n        getLostPoint: function(qrCode) {\n            var moduleCount = qrCode.getModuleCount();\n            var lostPoint = 0;\n            for (var row = 0; row < moduleCount; row++) {\n                for (var col = 0; col < moduleCount; col++) {\n                    var sameCount = 0;\n                    var dark = qrCode.isDark(row, col);\n                    for (var r = -1; r <= 1; r++) {\n                        if (row + r < 0 || moduleCount <= row + r) {\n                            continue\n                        }\n                        for (var c = -1; c <= 1; c++) {\n                            if (col + c < 0 || moduleCount <= col + c) {\n                                continue\n                            }\n                            if (r == 0 && c == 0) {\n                                continue\n                            }\n                            if (dark == qrCode.isDark(row + r, col + c)) {\n                                sameCount++\n                            }\n                        }\n                    }\n                    if (sameCount > 5) {\n                        lostPoint += (3 + sameCount - 5)\n                    }\n                }\n            }\n            for (var row = 0; row < moduleCount - 1; row++) {\n                for (var col = 0; col < moduleCount - 1; col++) {\n                    var count = 0;\n                    if (qrCode.isDark(row, col)) count++;\n                    if (qrCode.isDark(row + 1, col)) count++;\n                    if (qrCode.isDark(row, col + 1)) count++;\n                    if (qrCode.isDark(row + 1, col + 1)) count++;\n                    if (count == 0 || count == 4) {\n                        lostPoint += 3\n                    }\n                }\n            }\n            for (var row = 0; row < moduleCount; row++) {\n                for (var col = 0; col < moduleCount - 6; col++) {\n                    if (qrCode.isDark(row, col) && !qrCode.isDark(row, col + 1) && qrCode.isDark(row, col + 2) && qrCode.isDark(row, col + 3) && qrCode.isDark(row, col + 4) && !qrCode.isDark(row, col + 5) && qrCode.isDark(row, col + 6)) {\n                        lostPoint += 40\n                    }\n                }\n            }\n            for (var col = 0; col < moduleCount; col++) {\n                for (var row = 0; row < moduleCount - 6; row++) {\n                    if (qrCode.isDark(row, col) && !qrCode.isDark(row + 1, col) && qrCode.isDark(row + 2, col) && qrCode.isDark(row + 3, col) && qrCode.isDark(row + 4, col) && !qrCode.isDark(row + 5, col) && qrCode.isDark(row + 6, col)) {\n                        lostPoint += 40\n                    }\n                }\n            }\n            var darkCount = 0;\n            for (var col = 0; col < moduleCount; col++) {\n                for (var row = 0; row < moduleCount; row++) {\n                    if (qrCode.isDark(row, col)) {\n                        darkCount++\n                    }\n                }\n            }\n            var ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;\n            lostPoint += ratio * 10;\n            return lostPoint\n        }\n    };\n    var QRMath = {\n        glog: function(n) {\n            if (n < 1) {\n                throw new Error(\"glog(\" + n + \")\")\n            }\n            return QRMath.LOG_TABLE[n]\n        },\n        gexp: function(n) {\n            while (n < 0) {\n                n += 255\n            }\n            while (n >= 256) {\n                n -= 255\n            }\n            return QRMath.EXP_TABLE[n]\n        },\n        EXP_TABLE: new Array(256),\n        LOG_TABLE: new Array(256)\n    };\n    for (var i = 0; i < 8; i++) {\n        QRMath.EXP_TABLE[i] = 1 << i\n    }\n    for (var i = 8; i < 256; i++) {\n        QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^ QRMath.EXP_TABLE[i - 5] ^ QRMath.EXP_TABLE[i - 6] ^ QRMath.EXP_TABLE[i - 8]\n    }\n    for (var i = 0; i < 255; i++) {\n        QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i\n    }\n\n    function QRPolynomial(num, shift) {\n        if (num.length == undefined) {\n            throw new Error(num.length + \"/\" + shift)\n        }\n        var offset = 0;\n        while (offset < num.length && num[offset] == 0) {\n            offset++\n        }\n        this.num = new Array(num.length - offset + shift);\n        for (var i = 0; i < num.length - offset; i++) {\n            this.num[i] = num[i + offset]\n        }\n    }\n\n    QRPolynomial.prototype = {\n        get: function(index) {\n            return this.num[index]\n        },\n        getLength: function() {\n            return this.num.length\n        },\n        multiply: function(e) {\n            var num = new Array(this.getLength() + e.getLength() - 1);\n            for (var i = 0; i < this.getLength(); i++) {\n                for (var j = 0; j < e.getLength(); j++) {\n                    num[i + j] ^= QRMath.gexp(QRMath.glog(this.get(i)) + QRMath.glog(e.get(j)))\n                }\n            }\n            return new QRPolynomial(num, 0)\n        },\n        mod: function(e) {\n            if (this.getLength() - e.getLength() < 0) {\n                return this\n            }\n            var ratio = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0));\n            var num = new Array(this.getLength());\n            for (var i = 0; i < this.getLength(); i++) {\n                num[i] = this.get(i)\n            }\n            for (var i = 0; i < e.getLength(); i++) {\n                num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio)\n            }\n            return new QRPolynomial(num, 0).mod(e)\n        }\n    };\n\n    function QRRSBlock(totalCount, dataCount) {\n        this.totalCount = totalCount;\n        this.dataCount = dataCount\n    }\n\n    QRRSBlock.RS_BLOCK_TABLE = [\n        [1, 26, 19],\n        [1, 26, 16],\n        [1, 26, 13],\n        [1, 26, 9],\n        [1, 44, 34],\n        [1, 44, 28],\n        [1, 44, 22],\n        [1, 44, 16],\n        [1, 70, 55],\n        [1, 70, 44],\n        [2, 35, 17],\n        [2, 35, 13],\n        [1, 100, 80],\n        [2, 50, 32],\n        [2, 50, 24],\n        [4, 25, 9],\n        [1, 134, 108],\n        [2, 67, 43],\n        [2, 33, 15, 2, 34, 16],\n        [2, 33, 11, 2, 34, 12],\n        [2, 86, 68],\n        [4, 43, 27],\n        [4, 43, 19],\n        [4, 43, 15],\n        [2, 98, 78],\n        [4, 49, 31],\n        [2, 32, 14, 4, 33, 15],\n        [4, 39, 13, 1, 40, 14],\n        [2, 121, 97],\n        [2, 60, 38, 2, 61, 39],\n        [4, 40, 18, 2, 41, 19],\n        [4, 40, 14, 2, 41, 15],\n        [2, 146, 116],\n        [3, 58, 36, 2, 59, 37],\n        [4, 36, 16, 4, 37, 17],\n        [4, 36, 12, 4, 37, 13],\n        [2, 86, 68, 2, 87, 69],\n        [4, 69, 43, 1, 70, 44],\n        [6, 43, 19, 2, 44, 20],\n        [6, 43, 15, 2, 44, 16],\n        [4, 101, 81],\n        [1, 80, 50, 4, 81, 51],\n        [4, 50, 22, 4, 51, 23],\n        [3, 36, 12, 8, 37, 13],\n        [2, 116, 92, 2, 117, 93],\n        [6, 58, 36, 2, 59, 37],\n        [4, 46, 20, 6, 47, 21],\n        [7, 42, 14, 4, 43, 15],\n        [4, 133, 107],\n        [8, 59, 37, 1, 60, 38],\n        [8, 44, 20, 4, 45, 21],\n        [12, 33, 11, 4, 34, 12],\n        [3, 145, 115, 1, 146, 116],\n        [4, 64, 40, 5, 65, 41],\n        [11, 36, 16, 5, 37, 17],\n        [11, 36, 12, 5, 37, 13],\n        [5, 109, 87, 1, 110, 88],\n        [5, 65, 41, 5, 66, 42],\n        [5, 54, 24, 7, 55, 25],\n        [11, 36, 12],\n        [5, 122, 98, 1, 123, 99],\n        [7, 73, 45, 3, 74, 46],\n        [15, 43, 19, 2, 44, 20],\n        [3, 45, 15, 13, 46, 16],\n        [1, 135, 107, 5, 136, 108],\n        [10, 74, 46, 1, 75, 47],\n        [1, 50, 22, 15, 51, 23],\n        [2, 42, 14, 17, 43, 15],\n        [5, 150, 120, 1, 151, 121],\n        [9, 69, 43, 4, 70, 44],\n        [17, 50, 22, 1, 51, 23],\n        [2, 42, 14, 19, 43, 15],\n        [3, 141, 113, 4, 142, 114],\n        [3, 70, 44, 11, 71, 45],\n        [17, 47, 21, 4, 48, 22],\n        [9, 39, 13, 16, 40, 14],\n        [3, 135, 107, 5, 136, 108],\n        [3, 67, 41, 13, 68, 42],\n        [15, 54, 24, 5, 55, 25],\n        [15, 43, 15, 10, 44, 16],\n        [4, 144, 116, 4, 145, 117],\n        [17, 68, 42],\n        [17, 50, 22, 6, 51, 23],\n        [19, 46, 16, 6, 47, 17],\n        [2, 139, 111, 7, 140, 112],\n        [17, 74, 46],\n        [7, 54, 24, 16, 55, 25],\n        [34, 37, 13],\n        [4, 151, 121, 5, 152, 122],\n        [4, 75, 47, 14, 76, 48],\n        [11, 54, 24, 14, 55, 25],\n        [16, 45, 15, 14, 46, 16],\n        [6, 147, 117, 4, 148, 118],\n        [6, 73, 45, 14, 74, 46],\n        [11, 54, 24, 16, 55, 25],\n        [30, 46, 16, 2, 47, 17],\n        [8, 132, 106, 4, 133, 107],\n        [8, 75, 47, 13, 76, 48],\n        [7, 54, 24, 22, 55, 25],\n        [22, 45, 15, 13, 46, 16],\n        [10, 142, 114, 2, 143, 115],\n        [19, 74, 46, 4, 75, 47],\n        [28, 50, 22, 6, 51, 23],\n        [33, 46, 16, 4, 47, 17],\n        [8, 152, 122, 4, 153, 123],\n        [22, 73, 45, 3, 74, 46],\n        [8, 53, 23, 26, 54, 24],\n        [12, 45, 15, 28, 46, 16],\n        [3, 147, 117, 10, 148, 118],\n        [3, 73, 45, 23, 74, 46],\n        [4, 54, 24, 31, 55, 25],\n        [11, 45, 15, 31, 46, 16],\n        [7, 146, 116, 7, 147, 117],\n        [21, 73, 45, 7, 74, 46],\n        [1, 53, 23, 37, 54, 24],\n        [19, 45, 15, 26, 46, 16],\n        [5, 145, 115, 10, 146, 116],\n        [19, 75, 47, 10, 76, 48],\n        [15, 54, 24, 25, 55, 25],\n        [23, 45, 15, 25, 46, 16],\n        [13, 145, 115, 3, 146, 116],\n        [2, 74, 46, 29, 75, 47],\n        [42, 54, 24, 1, 55, 25],\n        [23, 45, 15, 28, 46, 16],\n        [17, 145, 115],\n        [10, 74, 46, 23, 75, 47],\n        [10, 54, 24, 35, 55, 25],\n        [19, 45, 15, 35, 46, 16],\n        [17, 145, 115, 1, 146, 116],\n        [14, 74, 46, 21, 75, 47],\n        [29, 54, 24, 19, 55, 25],\n        [11, 45, 15, 46, 46, 16],\n        [13, 145, 115, 6, 146, 116],\n        [14, 74, 46, 23, 75, 47],\n        [44, 54, 24, 7, 55, 25],\n        [59, 46, 16, 1, 47, 17],\n        [12, 151, 121, 7, 152, 122],\n        [12, 75, 47, 26, 76, 48],\n        [39, 54, 24, 14, 55, 25],\n        [22, 45, 15, 41, 46, 16],\n        [6, 151, 121, 14, 152, 122],\n        [6, 75, 47, 34, 76, 48],\n        [46, 54, 24, 10, 55, 25],\n        [2, 45, 15, 64, 46, 16],\n        [17, 152, 122, 4, 153, 123],\n        [29, 74, 46, 14, 75, 47],\n        [49, 54, 24, 10, 55, 25],\n        [24, 45, 15, 46, 46, 16],\n        [4, 152, 122, 18, 153, 123],\n        [13, 74, 46, 32, 75, 47],\n        [48, 54, 24, 14, 55, 25],\n        [42, 45, 15, 32, 46, 16],\n        [20, 147, 117, 4, 148, 118],\n        [40, 75, 47, 7, 76, 48],\n        [43, 54, 24, 22, 55, 25],\n        [10, 45, 15, 67, 46, 16],\n        [19, 148, 118, 6, 149, 119],\n        [18, 75, 47, 31, 76, 48],\n        [34, 54, 24, 34, 55, 25],\n        [20, 45, 15, 61, 46, 16]\n    ];\n    QRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel) {\n        var rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);\n        if (rsBlock == undefined) {\n            throw new Error(\"bad rs block @ typeNumber:\" + typeNumber + \"/errorCorrectLevel:\" + errorCorrectLevel)\n        }\n        var length = rsBlock.length / 3;\n        var list = [];\n        for (var i = 0; i < length; i++) {\n            var count = rsBlock[i * 3 + 0];\n            var totalCount = rsBlock[i * 3 + 1];\n            var dataCount = rsBlock[i * 3 + 2];\n            for (var j = 0; j < count; j++) {\n                list.push(new QRRSBlock(totalCount, dataCount))\n            }\n        }\n        return list\n    };\n    QRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel) {\n        switch (errorCorrectLevel) {\n            case QRErrorCorrectLevel.L:\n                return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 0];\n            case QRErrorCorrectLevel.M:\n                return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 1];\n            case QRErrorCorrectLevel.Q:\n                return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 2];\n            case QRErrorCorrectLevel.H:\n                return QRRSBlock.RS_BLOCK_TABLE[(typeNumber - 1) * 4 + 3];\n            default:\n                return undefined\n        }\n    };\n\n    function QRBitBuffer() {\n        this.buffer = [];\n        this.length = 0\n    }\n\n    QRBitBuffer.prototype = {\n        get: function(index) {\n            var bufIndex = Math.floor(index / 8);\n            return ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1) == 1\n        },\n        put: function(num, length) {\n            for (var i = 0; i < length; i++) {\n                this.putBit(((num >>> (length - i - 1)) & 1) == 1)\n            }\n        },\n        getLengthInBits: function() {\n            return this.length\n        },\n        putBit: function(bit) {\n            var bufIndex = Math.floor(this.length / 8);\n            if (this.buffer.length <= bufIndex) {\n                this.buffer.push(0)\n            }\n            if (bit) {\n                this.buffer[bufIndex] |= (0x80 >>> (this.length % 8))\n            }\n            this.length++\n        }\n    };\n    var QRCodeLimitLength = [\n        [17, 14, 11, 7],\n        [32, 26, 20, 14],\n        [53, 42, 32, 24],\n        [78, 62, 46, 34],\n        [106, 84, 60, 44],\n        [134, 106, 74, 58],\n        [154, 122, 86, 64],\n        [192, 152, 108, 84],\n        [230, 180, 130, 98],\n        [271, 213, 151, 119],\n        [321, 251, 177, 137],\n        [367, 287, 203, 155],\n        [425, 331, 241, 177],\n        [458, 362, 258, 194],\n        [520, 412, 292, 220],\n        [586, 450, 322, 250],\n        [644, 504, 364, 280],\n        [718, 560, 394, 310],\n        [792, 624, 442, 338],\n        [858, 666, 482, 382],\n        [929, 711, 509, 403],\n        [1003, 779, 565, 439],\n        [1091, 857, 611, 461],\n        [1171, 911, 661, 511],\n        [1273, 997, 715, 535],\n        [1367, 1059, 751, 593],\n        [1465, 1125, 805, 625],\n        [1528, 1190, 868, 658],\n        [1628, 1264, 908, 698],\n        [1732, 1370, 982, 742],\n        [1840, 1452, 1030, 790],\n        [1952, 1538, 1112, 842],\n        [2068, 1628, 1168, 898],\n        [2188, 1722, 1228, 958],\n        [2303, 1809, 1283, 983],\n        [2431, 1911, 1351, 1051],\n        [2563, 1989, 1423, 1093],\n        [2699, 2099, 1499, 1139],\n        [2809, 2213, 1579, 1219],\n        [2953, 2331, 1663, 1273]\n    ]\n\n    // END OF QR CODE CORE LIBRARY DEFINITION\n\n    var Drawing = (function() { // Drawing in Canvas\n        function _onMakeImage() {\n            this._elImage.src = this._elCanvas.toDataURL(\"image/png\");\n            this._elImage.style.display = \"block\";\n            this._elCanvas.style.display = \"none\";\n        }\n\n        function _safeSetDataURI(fSuccess, fFail) {\n            var self = this;\n            self._fFail = fFail;\n            self._fSuccess = fSuccess;\n\n            // Check it just once\n            if (self._bSupportDataURI === null) {\n                var el = document.createElement(\"img\");\n                var fOnError = function() {\n                    self._bSupportDataURI = false;\n\n                    if (self._fFail) {\n                        self._fFail.call(self);\n                    }\n                };\n                var fOnSuccess = function() {\n                    self._bSupportDataURI = true;\n\n                    if (self._fSuccess) {\n                        self._fSuccess.call(self);\n                    }\n                };\n\n                el.onabort = fOnError;\n                el.onerror = fOnError;\n                el.onload = fOnSuccess;\n                el.src = \"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==\"; // the Image contains 1px data.\n                return;\n            } else if (self._bSupportDataURI === true && self._fSuccess) {\n                self._fSuccess.call(self);\n            } else if (self._bSupportDataURI === false && self._fFail) {\n                self._fFail.call(self);\n            }\n        }\n\n        var Drawing = function(htOption) {\n            this._bIsPainted = false;\n\n            this._htOption = htOption;\n            this._elCanvas = document.createElement(\"canvas\");\n            this._elCanvas.width = htOption.size;\n            this._elCanvas.height = htOption.size;\n            this._oContext = this._elCanvas.getContext(\"2d\");\n            this._bIsPainted = false;\n            this._elImage = document.createElement(\"img\");\n            this._elImage.alt = \"Scan me!\";\n            this._elImage.style.display = \"none\";\n            this._bSupportDataURI = null;\n            this._callback = htOption.callback;\n            this._bindElement = htOption.bindElement;\n        };\n\n        Drawing.prototype.draw = function(oQRCode) {\n            var _elImage = this._elImage;\n            var _tCanvas = document.createElement(\"canvas\");\n            var _oContext = _tCanvas.getContext(\"2d\");\n            // var _oContext = this._oContext;\n            var _htOption = this._htOption;\n\n            var nCount = oQRCode.getModuleCount();\n            var rawSize = _htOption.size;\n            var rawMargin = _htOption.margin;\n\n            if (rawMargin < 0 || rawMargin * 2 >= rawSize) {\n                rawMargin = 0;\n            }\n\n            var margin = Math.ceil(rawMargin);\n\n            var rawViewportSize = rawSize - 2 * rawMargin;\n\n            var whiteMargin = _htOption.whiteMargin;\n            var backgroundDimming = _htOption.backgroundDimming;\n            var nSize = Math.ceil(rawViewportSize / nCount);\n            var viewportSize = nSize * nCount;\n            var size = viewportSize + 2 * margin;\n\n            var gifBackground = undefined;\n            var gifFrames = undefined;\n\n            _tCanvas.width = size;\n            _tCanvas.height = size;\n\n            var dotScale = _htOption.dotScale;\n            _elImage.style.display = \"none\";\n            this.clear();\n\n            if (dotScale <= 0 || dotScale > 1) {\n                throw new Error(\"Scale should be in range (0, 1).\")\n            }\n\n            // Leave room for margin\n            _oContext.save();\n            _oContext.translate(margin, margin);\n\n            var _bkgCanvas = document.createElement(\"canvas\");\n            _bkgCanvas.width = size;\n            _bkgCanvas.height = size;\n            var _bContext = _bkgCanvas.getContext(\"2d\");\n\n            var _maskCanvas = undefined;\n            var _mContext = undefined;\n\n            if (_htOption.gifBackground !== undefined) {\n                var gif = new GIF(_htOption.gifBackground);\n                // console.log(_htOption.gifBackground);\n                // console.log(gif);\n                if (!gif.raw.hasImages) {\n                    throw new Error(\"An invalid gif has been selected as the background.\")\n                }\n                gifBackground = gif;\n                gifFrames = gif.decompressFrames(true);\n                // console.log(gifFrames);\n                if (_htOption.autoColor) {\n                    var r = 0,\n                        g = 0,\n                        b = 0;\n                    var count = 0;\n                    for (var i = 0; i < gifFrames[0].colorTable.length; i++) {\n                        var c = gifFrames[0].colorTable[i];\n                        if (c[0] > 200 || c[1] > 200 || c[2] > 200) continue;\n                        if (c[0] === 0 && c[1] === 0 && c[2] === 0) continue;\n                        count++;\n                        r += c[0];\n                        g += c[1];\n                        b += c[2];\n                    }\n\n                    r = ~~(r / count);\n                    g = ~~(g / count);\n                    b = ~~(b / count);\n                    // console.log(\"rgb(\" + r + \", \" + g + \", \" + b + \")\");\n                    _htOption.colorDark = \"rgb(\" + r + \", \" + g + \", \" + b + \")\";\n                }\n            } else if (_htOption.backgroundImage !== undefined) {\n                if (_htOption.autoColor) {\n                    var avgRGB = getAverageRGB(_htOption.backgroundImage);\n                    _htOption.colorDark = \"rgb(\" + avgRGB.r + \", \" + avgRGB.g + \", \" + avgRGB.b + \")\";\n                }\n\n                if (_htOption.maskedDots) {\n                    _maskCanvas = document.createElement(\"canvas\");\n                    _maskCanvas.width = size;\n                    _maskCanvas.height = size;\n                    _mContext = _maskCanvas.getContext(\"2d\");\n                    /*\n                     _mContext.drawImage(_htOption.backgroundImage,\n                     0, 0, _htOption.backgroundImage.width, _htOption.backgroundImage.height,\n                     whiteMargin ? 0 : -margin, whiteMargin ? 0 : -margin, whiteMargin ? viewportSize : size, whiteMargin ? viewportSize : size);\n                     */\n                    _mContext.drawImage(_htOption.backgroundImage,\n                        0, 0, _htOption.backgroundImage.width, _htOption.backgroundImage.height,\n                        0, 0, size, size);\n\n                    _bContext.rect(0, 0, size, size);\n                    _bContext.fillStyle = \"#ffffff\";\n                    _bContext.fill();\n                } else {\n                    /*\n                     _bContext.drawImage(_htOption.backgroundImage,\n                     0, 0, _htOption.backgroundImage.width, _htOption.backgroundImage.height,\n                     whiteMargin ? 0 : -margin, whiteMargin ? 0 : -margin, whiteMargin ? viewportSize : size, whiteMargin ? viewportSize : size);\n                     */\n                    _bContext.drawImage(_htOption.backgroundImage,\n                        0, 0, _htOption.backgroundImage.width, _htOption.backgroundImage.height,\n                        0, 0, size, size);\n                    _bContext.rect(0, 0, size, size);\n                    _bContext.fillStyle = backgroundDimming;\n                    _bContext.fill();\n                }\n            } else {\n                _bContext.rect(0, 0, size, size);\n                _bContext.fillStyle = \"#ffffff\";\n                _bContext.fill();\n            }\n\n            if (_htOption.binarize) {\n                _htOption.colorDark = \"#000000\";\n                _htOption.colorLight = \"#FFFFFF\";\n            }\n\n            var agnPatternCenter = QRUtil.getPatternPosition(oQRCode.typeNumber);\n\n            var xyOffset = (1 - dotScale) * 0.5;\n            for (var row = 0; row < nCount; row++) {\n                for (var col = 0; col < nCount; col++) {\n                    var bIsDark = oQRCode.isDark(row, col);\n\n                    // var isBlkPosCtr = ((col < 8 && (row < 8 || row >= nCount - 8)) || (col >= nCount - 8 && row < 8) || (col < nCount - 4 && col >= nCount - 4 - 5 && row < nCount - 4 && row >= nCount - 4 - 5));\n                    var isBlkPosCtr = ((col < 8 && (row < 8 || row >= nCount - 8)) || (col >= nCount - 8 && row < 8));\n                    var isBlkPos = ((col < 7 && (row < 7 || row >= nCount - 7)) || (col >= nCount - 7 && row < 7));\n                    var bProtected = (row === 6 || col === 6 || isBlkPosCtr);\n\n                    for (var i = 0; i < agnPatternCenter.length - 1; i++) {\n                        bProtected = bProtected || (row >= agnPatternCenter[i] - 2 && row <= agnPatternCenter[i] + 2 && col >= agnPatternCenter[i] - 2 && col <= agnPatternCenter[i] + 2);\n                    }\n\n                    var nLeft = col * nSize + (bProtected ? 0 : (xyOffset * nSize));\n                    var nTop = row * nSize + (bProtected ? 0 : (xyOffset * nSize));\n                    _oContext.strokeStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;\n                    _oContext.lineWidth = 0.5;\n                    _oContext.fillStyle = bIsDark ? _htOption.colorDark : \"rgba(255, 255, 255, 0.6)\"; //_htOption.colorLight;\n                    if (agnPatternCenter.length === 0) {\n                        // if align pattern list is empty, then it means that we don't need to leave room for the align patterns\n                        if (!bProtected)\n                            _fillRectWithMask(_oContext, nLeft, nTop, (bProtected ? (isBlkPosCtr ? 1 : 1) : dotScale) * nSize, (bProtected ? (isBlkPosCtr ? 1 : 1) : dotScale) * nSize, _maskCanvas, bIsDark);\n                    } else {\n                        var inAgnRange = ((col < nCount - 4 && col >= nCount - 4 - 5 && row < nCount - 4 && row >= nCount - 4 - 5));\n                        if (!bProtected && !inAgnRange)\n                            _fillRectWithMask(_oContext, nLeft, nTop, (bProtected ? (isBlkPosCtr ? 1 : 1) : dotScale) * nSize, (bProtected ? (isBlkPosCtr ? 1 : 1) : dotScale) * nSize, _maskCanvas, bIsDark);\n                    }\n                }\n            }\n\n            // Draw POSITION protectors\n            var protectorStyle = \"rgba(255, 255, 255, 0.6)\";\n            _oContext.fillStyle = protectorStyle;\n            _oContext.fillRect(0, 0, 8 * nSize, 8 * nSize);\n            _oContext.fillRect(0, (nCount - 8) * nSize, 8 * nSize, 8 * nSize);\n            _oContext.fillRect((nCount - 8) * nSize, 0, 8 * nSize, 8 * nSize);\n            _oContext.fillRect(8 * nSize, 6 * nSize, (nCount - 8 - 8) * nSize, nSize);\n            _oContext.fillRect(6 * nSize, 8 * nSize, nSize, (nCount - 8 - 8) * nSize);\n\n            // Draw ALIGN protectors\n            var edgeCenter = agnPatternCenter[agnPatternCenter.length - 1];\n            for (var i = 0; i < agnPatternCenter.length; i++) {\n                for (var j = 0; j < agnPatternCenter.length; j++) {\n                    var agnX = agnPatternCenter[j];\n                    var agnY = agnPatternCenter[i];\n                    if (agnX === 6 && (agnY === 6 || agnY === edgeCenter)) {\n                        continue;\n                    } else if (agnY === 6 && (agnX === 6 || agnX === edgeCenter)) {\n                        continue;\n                    } else if (agnX !== 6 && agnX !== edgeCenter && agnY !== 6 && agnY !== edgeCenter) {\n                        _drawAlignProtector(_oContext, agnX, agnY, nSize, nSize);\n                    } else {\n                        _drawAlignProtector(_oContext, agnX, agnY, nSize, nSize);\n                    }\n                    // console.log(\"agnX=\" + agnX + \", agnY=\" + agnX);\n                }\n            }\n\n            // Draw POSITION patterns\n            _oContext.fillStyle = _htOption.colorDark;\n            _oContext.fillRect(0, 0, 7 * nSize, nSize);\n            _oContext.fillRect((nCount - 7) * nSize, 0, 7 * nSize, nSize);\n            _oContext.fillRect(0, 6 * nSize, 7 * nSize, nSize);\n            _oContext.fillRect((nCount - 7) * nSize, 6 * nSize, 7 * nSize, nSize);\n            _oContext.fillRect(0, (nCount - 7) * nSize, 7 * nSize, nSize);\n            _oContext.fillRect(0, (nCount - 7 + 6) * nSize, 7 * nSize, nSize);\n            _oContext.fillRect(0, 0, nSize, 7 * nSize);\n            _oContext.fillRect(6 * nSize, 0, nSize, 7 * nSize);\n            _oContext.fillRect((nCount - 7) * nSize, 0, nSize, 7 * nSize);\n            _oContext.fillRect((nCount - 7 + 6) * nSize, 0, nSize, 7 * nSize);\n            _oContext.fillRect(0, (nCount - 7) * nSize, nSize, 7 * nSize);\n            _oContext.fillRect(6 * nSize, (nCount - 7) * nSize, nSize, 7 * nSize);\n\n            _oContext.fillRect(2 * nSize, 2 * nSize, 3 * nSize, 3 * nSize);\n            _oContext.fillRect((nCount - 7 + 2) * nSize, 2 * nSize, 3 * nSize, 3 * nSize);\n            _oContext.fillRect(2 * nSize, (nCount - 7 + 2) * nSize, 3 * nSize, 3 * nSize);\n\n            for (var i = 0; i < nCount - 8; i += 2) {\n                _oContext.fillRect((8 + i) * nSize, 6 * nSize, nSize, nSize);\n                _oContext.fillRect(6 * nSize, (8 + i) * nSize, nSize, nSize);\n            }\n            for (var i = 0; i < agnPatternCenter.length; i++) {\n                for (var j = 0; j < agnPatternCenter.length; j++) {\n                    var agnX = agnPatternCenter[j];\n                    var agnY = agnPatternCenter[i];\n                    if (agnX === 6 && (agnY === 6 || agnY === edgeCenter)) {\n                        continue;\n                    } else if (agnY === 6 && (agnX === 6 || agnX === edgeCenter)) {\n                        continue;\n                    } else if (agnX !== 6 && agnX !== edgeCenter && agnY !== 6 && agnY !== edgeCenter) {\n                        _oContext.fillStyle = \"rgba(0, 0, 0, .2)\";\n                        _drawAlign(_oContext, agnX, agnY, nSize, nSize);\n                    } else {\n                        _oContext.fillStyle = _htOption.colorDark;\n                        _drawAlign(_oContext, agnX, agnY, nSize, nSize);\n                    }\n                }\n            }\n\n            // Fill the margin\n            if (whiteMargin) {\n                _oContext.fillStyle = '#FFFFFF';\n                _oContext.fillRect(-margin, -margin, size, margin);\n                _oContext.fillRect(-margin, viewportSize, size, margin);\n                _oContext.fillRect(viewportSize, -margin, margin, size);\n                _oContext.fillRect(-margin, -margin, margin, size);\n            }\n\n            if (_htOption.logoImage !== undefined) {\n                var logoScale = _htOption.logoScale;\n                var logoMargin = _htOption.logoMargin;\n                var logoCornerRadius = _htOption.logoCornerRadius;\n                if (logoScale <= 0 || logoScale >= 1.0) {\n                    logoScale = 0.2;\n                }\n                if (logoMargin < 0) {\n                    logoMargin = 0;\n                }\n                if (logoCornerRadius < 0) {\n                    logoCornerRadius = 0;\n                }\n\n                _oContext.restore();\n\n                var logoSize = viewportSize * logoScale;\n                var x = 0.5 * (size - logoSize);\n                var y = x;\n\n                _oContext.fillStyle = '#FFFFFF';\n                _oContext.save();\n                _prepareRoundedCornerClip(_oContext, x - logoMargin, y - logoMargin, logoSize + 2 * logoMargin, logoSize + 2 * logoMargin, logoCornerRadius);\n                _oContext.clip();\n                _oContext.fill();\n                _oContext.restore();\n\n                _oContext.save();\n                _prepareRoundedCornerClip(_oContext, x, y, logoSize, logoSize, logoCornerRadius);\n                _oContext.clip();\n                _oContext.drawImage(_htOption.logoImage, x, y, logoSize, logoSize);\n                _oContext.restore();\n            }\n\n            if (gifBackground === undefined) {\n                // Swap and merge the foreground and the background\n                _bContext.drawImage(_tCanvas, 0, 0, size, size);\n                _oContext.drawImage(_bkgCanvas, -margin, -margin, size, size);\n\n                // Binarize the final image\n                if (_htOption.binarize) {\n                    var pixels = _oContext.getImageData(0, 0, size, size);\n                    var threshold = 128;\n                    if (parseInt(_htOption.binarizeThreshold) > 0 && parseInt(_htOption.binarizeThreshold) < 255) {\n                        threshold = parseInt(_htOption.binarizeThreshold);\n                    }\n                    for (var i = 0; i < pixels.data.length; i += 4) {\n                        // rgb in [0, 255]\n                        var R = pixels.data[i];\n                        var G = pixels.data[i + 1];\n                        var B = pixels.data[i + 2];\n                        var sum = _greyscale(R, G, B);\n                        if (sum > threshold) {\n                            pixels.data[i] = 255;\n                            pixels.data[i + 1] = 255;\n                            pixels.data[i + 2] = 255;\n                        } else {\n                            pixels.data[i] = 0;\n                            pixels.data[i + 1] = 0;\n                            pixels.data[i + 2] = 0;\n                        }\n                    }\n                    _oContext.putImageData(pixels, 0, 0);\n                }\n\n                // Scale the final image\n                var _fCanvas = document.createElement(\"canvas\");\n                var _fContext = _fCanvas.getContext(\"2d\");\n                _fCanvas.width = rawSize;\n                _fCanvas.height = rawSize;\n                _fContext.drawImage(_tCanvas, 0, 0, rawSize, rawSize);\n                this._elCanvas = _fCanvas;\n\n                // Painting work completed\n                this._bIsPainted = true;\n                if (this._callback !== undefined) {\n                    this._callback(this._elCanvas.toDataURL());\n                }\n                if (this._bindElement !== undefined) {\n                    try {\n                        var el = document.getElementById(this._bindElement);\n                        if (el.nodeName === 'IMG') {\n                            el.src = this._elCanvas.toDataURL();\n                        } else {\n                            var elStyle = el.style;\n                            elStyle[\"background-image\"] = 'url(' + this._elCanvas.toDataURL() + ')';\n                            elStyle[\"background-size\"] = 'contain';\n                            elStyle[\"background-repeat\"] = 'no-repeat';\n                        }\n                    } catch (e) {\n                        console.error(e);\n                    }\n                }\n            } else {\n                var gifOutput;\n\n                // Reuse in order to apply the patch\n                var rawBkg;\n                var hRawBkg;\n\n                var patchCanvas = document.createElement(\"canvas\");\n                var hPatchCanvas = patchCanvas.getContext(\"2d\");\n                var patchData;\n\n                gifFrames.forEach(function(frame) {\n                    // console.log(frame);\n                    if (gifOutput === undefined) {\n                        gifOutput = new GIFE({\n                            workers: 4,\n                            quality: 10,\n                            width: rawSize,\n                            height: rawSize\n                        });\n                    }\n\n                    if (rawBkg === undefined) {\n                        rawBkg = document.createElement(\"canvas\");\n                        hRawBkg = rawBkg.getContext(\"2d\");\n                        rawBkg.width = frame.dims.width;\n                        rawBkg.height = frame.dims.height;\n                        hRawBkg.rect(0, 0, rawBkg.width, rawBkg.height);\n                        hRawBkg.fillStyle = \"#ffffff\";\n                        hRawBkg.fill();\n                        // console.log(rawBkg);\n                    }\n\n                    if (!patchData || frame.dims.width !== patchCanvas.width || frame.dims.height !== patchCanvas.height) {\n                        patchCanvas.width = frame.dims.width;\n                        patchCanvas.height = frame.dims.height;\n                        patchData = hPatchCanvas.createImageData(frame.dims.width, frame.dims.height);\n                    }\n\n                    patchData.data.set(frame.patch);\n                    hPatchCanvas.putImageData(patchData, 0, 0);\n\n                    hRawBkg.drawImage(patchCanvas, frame.dims.left, frame.dims.top);\n\n                    var stdCanvas = document.createElement(\"canvas\");\n                    stdCanvas.width = size;\n                    stdCanvas.height = size;\n                    var hStdCanvas = stdCanvas.getContext(\"2d\");\n\n                    hStdCanvas.drawImage(rawBkg, 0, 0, size, size);\n                    hStdCanvas.drawImage(_tCanvas, 0, 0, size, size);\n\n                    // Scale the final image\n                    var _fCanvas = document.createElement(\"canvas\");\n                    var _fContext = _fCanvas.getContext(\"2d\");\n                    _fCanvas.width = rawSize;\n                    _fCanvas.height = rawSize;\n                    _fContext.drawImage(stdCanvas, 0, 0, rawSize, rawSize);\n                    // console.log(_fContext);\n                    gifOutput.addFrame(_fContext, { copy: true, delay: frame.delay });\n                });\n\n                if (gifOutput === undefined) {\n                    throw new Error(\"No frames.\")\n                }\n                var ref = this;\n                gifOutput.on('finished', function(blob) {\n                    // Painting work completed\n                    var r = new FileReader();\n                    r.onload = function(e) {\n                        var data = e.target.result;\n                        ref._bIsPainted = true;\n                        if (ref._callback !== undefined) {\n                            ref._callback(data);\n                        }\n                        if (ref._bindElement !== undefined) {\n                            try {\n                                var el = document.getElementById(ref._bindElement);\n                                if (el.nodeName === 'IMG') {\n                                    el.src = data;\n                                } else {\n                                    var elStyle = el.style;\n                                    elStyle[\"background-image\"] = 'url(' + data + ')';\n                                    elStyle[\"background-size\"] = 'contain';\n                                    elStyle[\"background-repeat\"] = 'no-repeat';\n                                }\n                            } catch (e) {\n                                console.error(e);\n                            }\n                        }\n                    };\n                    r.readAsDataURL(blob);\n                });\n\n                gifOutput.render();\n            }\n\n\n        };\n\n        Drawing.prototype.makeImage = function() {\n            if (this._bIsPainted) {\n                _safeSetDataURI.call(this, _onMakeImage);\n            }\n        };\n\n        Drawing.prototype.isPainted = function() {\n            return this._bIsPainted;\n        };\n\n        Drawing.prototype.clear = function() {\n            this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);\n            this._bIsPainted = false;\n        };\n\n        Drawing.prototype.round = function(nNumber) {\n            if (!nNumber) {\n                return nNumber;\n            }\n\n            return Math.floor(nNumber * 1000) / 1000;\n        };\n\n        return Drawing;\n    })();\n\n    // Utilities and useful helpers\n\n    function _getUTF8Length(sText) {\n        var replacedText = encodeURI(sText).toString().replace(/\\%[0-9a-fA-F]{2}/g, 'a');\n        return replacedText.length + (replacedText.length != sText ? 3 : 0);\n    }\n\n    function _prepareRoundedCornerClip(ctx, x, y, w, h, r) {\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        ctx.arcTo(x + w, y, x + w, y + h, r);\n        ctx.arcTo(x + w, y + h, x, y + h, r);\n        ctx.arcTo(x, y + h, x, y, r);\n        ctx.arcTo(x, y, x + w, y, r);\n        ctx.closePath();\n    }\n\n    function _setPixel(imageData, p, r, g, b, a) {\n        index = p * 4;\n        imageData.data[index + 0] = r;\n        imageData.data[index + 1] = g;\n        imageData.data[index + 2] = b;\n        imageData.data[index + 3] = a;\n    }\n\n    function _greyscale(r, g, b) {\n        return 0.30 * r + 0.59 * b + 0.11 * b;\n    }\n\n    function _fillRectWithMask(canvas, x, y, w, h, maskSrc, bDark) {\n        //console.log(\"maskSrc=\" + maskSrc);\n        if (maskSrc === undefined) {\n            canvas.fillRect(x, y, w, h);\n        } else {\n            canvas.drawImage(maskSrc, x, y, w, h, x, y, w, h);\n            var fill_ = canvas.fillStyle;\n            canvas.fillStyle = bDark ? \"rgba(0, 0, 0, .5)\" : \"rgba(255, 255, 255, .7)\";\n            canvas.fillRect(x, y, w, h);\n            canvas.fillStyle = fill_;\n        }\n    }\n\n    function _drawAlignProtector(context, centerX, centerY, nWidth, nHeight) {\n        context.clearRect((centerX - 2) * nWidth, (centerY - 2) * nHeight, 5 * nWidth, 5 * nHeight);\n        context.fillRect((centerX - 2) * nWidth, (centerY - 2) * nHeight, 5 * nWidth, 5 * nHeight);\n    }\n\n    function _drawAlign(context, centerX, centerY, nWidth, nHeight) {\n        context.fillRect((centerX - 2) * nWidth, (centerY - 2) * nHeight, nWidth, 4 * nHeight);\n        context.fillRect((centerX + 2) * nWidth, (centerY - 2 + 1) * nHeight, nWidth, 4 * nHeight);\n        context.fillRect((centerX - 2 + 1) * nWidth, (centerY - 2) * nHeight, 4 * nWidth, nHeight);\n        context.fillRect((centerX - 2) * nWidth, (centerY + 2) * nHeight, 4 * nWidth, nHeight);\n        context.fillRect(centerX * nWidth, centerY * nHeight, nWidth, nHeight);\n    }\n\n    AwesomeQRCode = function() {};\n\n    AwesomeQRCode.prototype.create = function(vOption) {\n        this._htOption = {\n            size: 800,\n            margin: 20,\n            typeNumber: 4,\n            colorDark: \"#000000\",\n            colorLight: \"#ffffff\",\n            correctLevel: QRErrorCorrectLevel.M,\n            backgroundImage: undefined,\n            backgroundDimming: 'rgba(0,0,0,0)',\n            logoImage: undefined,\n            logoScale: 0.2,\n            logoMargin: 6,\n            logoCornerRadius: 8,\n            whiteMargin: true,\n            dotScale: 0.35,\n            maskedDots: false,\n            autoColor: true,\n            binarize: false,\n            binarizeThreshold: 128,\n            gifBackground: undefined,\n            callback: undefined,\n            bindElement: undefined\n        };\n\n        if (typeof vOption === 'string') {\n            vOption = {\n                text: vOption\n            };\n        }\n\n        if (vOption) {\n            for (var i in vOption) {\n                this._htOption[i] = vOption[i];\n            }\n        }\n\n        this._oQRCode = null;\n        this._oDrawing = new Drawing(this._htOption);\n\n        if (this._htOption.text) {\n            this.makeCode(this._htOption.text);\n        }\n    };\n\n    function _getTypeNumber(sText, nCorrectLevel) {\n        var nType = 1;\n        var length = _getUTF8Length(sText);\n\n        for (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {\n            var nLimit = 0;\n\n            switch (nCorrectLevel) {\n                case QRErrorCorrectLevel.L:\n                    nLimit = QRCodeLimitLength[i][0];\n                    break;\n                case QRErrorCorrectLevel.M:\n                    nLimit = QRCodeLimitLength[i][1];\n                    break;\n                case QRErrorCorrectLevel.Q:\n                    nLimit = QRCodeLimitLength[i][2];\n                    break;\n                case QRErrorCorrectLevel.H:\n                    nLimit = QRCodeLimitLength[i][3];\n                    break;\n            }\n\n            if (length <= nLimit) {\n                break;\n            } else {\n                nType++;\n            }\n        }\n\n        if (nType > QRCodeLimitLength.length) {\n            throw new Error(\"Too long data\");\n        }\n\n        return nType;\n    }\n\n    AwesomeQRCode.prototype.makeCode = function(sText) {\n        //this._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);\n        this._oQRCode = new QRCodeModel(-1, this._htOption.correctLevel);\n        this._oQRCode.addData(sText);\n        this._oQRCode.make();\n        this._oDrawing.draw(this._oQRCode);\n        this.makeImage();\n    };\n\n    AwesomeQRCode.prototype.makeImage = function() {\n        if (typeof this._oDrawing.makeImage == \"function\") {\n            this._oDrawing.makeImage();\n        }\n    };\n\n    AwesomeQRCode.prototype.clear = function() {\n        this._oDrawing.clear();\n    };\n\n    AwesomeQRCode.CorrectLevel = QRErrorCorrectLevel;\n\n    function getAverageRGB(imgEl) {\n\n        var blockSize = 5,\n            defaultRGB = {\n                r: 0,\n                g: 0,\n                b: 0\n            },\n            canvas = document.createElement('canvas'),\n            context = canvas.getContext && canvas.getContext('2d'),\n            data, width, height,\n            i = -4,\n            length,\n            rgb = {\n                r: 0,\n                g: 0,\n                b: 0\n            },\n            count = 0;\n\n        if (!context) {\n            return defaultRGB;\n        }\n\n        height = canvas.height = imgEl.naturalHeight || imgEl.offsetHeight || imgEl.height;\n        width = canvas.width = imgEl.naturalWidth || imgEl.offsetWidth || imgEl.width;\n\n        context.drawImage(imgEl, 0, 0);\n\n        try {\n            data = context.getImageData(0, 0, width, height);\n        } catch (e) {\n            return defaultRGB;\n        }\n\n        length = data.data.length;\n\n        while ((i += blockSize * 4) < length) {\n            if (data.data[i] > 200 || data.data[i + 1] > 200 || data.data[i + 2] > 200) continue;\n            ++count;\n            rgb.r += data.data[i];\n            rgb.g += data.data[i + 1];\n            rgb.b += data.data[i + 2];\n        }\n\n        rgb.r = ~~(rgb.r / count);\n        rgb.g = ~~(rgb.g / count);\n        rgb.b = ~~(rgb.b / count);\n\n        return rgb;\n    }\n})();\n\n(function(window, factory) {\n    if (typeof exports === 'object') {\n        module.exports = factory;\n    } else if (typeof define === 'function' && define.amd) {\n        define(factory);\n    } else {\n        window.eventUtil = factory();\n    }\n})(this, function() {\n    return new AwesomeQRCode();\n});\n"]}