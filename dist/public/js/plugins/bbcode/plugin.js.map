{"version":3,"sources":["../../../../../public/js/plugins/bbcode/plugin.js"],"names":["global","tinymce","util","Tools","resolve","global$1","html2bbcode","s","trim","rep","re","str","replace","bbcode2html","Convert","Plugin","add","editor","on","e","content","set","get"],"mappings":"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","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var html2bbcode = function (s) {\n      s = global$1.trim(s);\n      var rep = function (re, str) {\n        s = s.replace(re, str);\n      };\n      rep(/<a.*?href=\\\"(.*?)\\\".*?>(.*?)<\\/a>/gi, '[url=$1]$2[/url]');\n      rep(/<font.*?color=\\\"(.*?)\\\".*?class=\\\"codeStyle\\\".*?>(.*?)<\\/font>/gi, '[code][color=$1]$2[/color][/code]');\n      rep(/<font.*?color=\\\"(.*?)\\\".*?class=\\\"quoteStyle\\\".*?>(.*?)<\\/font>/gi, '[quote][color=$1]$2[/color][/quote]');\n      rep(/<font.*?class=\\\"codeStyle\\\".*?color=\\\"(.*?)\\\".*?>(.*?)<\\/font>/gi, '[code][color=$1]$2[/color][/code]');\n      rep(/<font.*?class=\\\"quoteStyle\\\".*?color=\\\"(.*?)\\\".*?>(.*?)<\\/font>/gi, '[quote][color=$1]$2[/color][/quote]');\n      rep(/<span style=\\\"color: ?(.*?);\\\">(.*?)<\\/span>/gi, '[color=$1]$2[/color]');\n      rep(/<font.*?color=\\\"(.*?)\\\".*?>(.*?)<\\/font>/gi, '[color=$1]$2[/color]');\n      rep(/<span style=\\\"font-size:(.*?);\\\">(.*?)<\\/span>/gi, '[size=$1]$2[/size]');\n      rep(/<font>(.*?)<\\/font>/gi, '$1');\n      rep(/<img.*?src=\\\"(.*?)\\\".*?\\/>/gi, '[img]$1[/img]');\n      rep(/<span class=\\\"codeStyle\\\">(.*?)<\\/span>/gi, '[code]$1[/code]');\n      rep(/<span class=\\\"quoteStyle\\\">(.*?)<\\/span>/gi, '[quote]$1[/quote]');\n      rep(/<strong class=\\\"codeStyle\\\">(.*?)<\\/strong>/gi, '[code][b]$1[/b][/code]');\n      rep(/<strong class=\\\"quoteStyle\\\">(.*?)<\\/strong>/gi, '[quote][b]$1[/b][/quote]');\n      rep(/<em class=\\\"codeStyle\\\">(.*?)<\\/em>/gi, '[code][i]$1[/i][/code]');\n      rep(/<em class=\\\"quoteStyle\\\">(.*?)<\\/em>/gi, '[quote][i]$1[/i][/quote]');\n      rep(/<u class=\\\"codeStyle\\\">(.*?)<\\/u>/gi, '[code][u]$1[/u][/code]');\n      rep(/<u class=\\\"quoteStyle\\\">(.*?)<\\/u>/gi, '[quote][u]$1[/u][/quote]');\n      rep(/<\\/(strong|b)>/gi, '[/b]');\n      rep(/<(strong|b)>/gi, '[b]');\n      rep(/<\\/(em|i)>/gi, '[/i]');\n      rep(/<(em|i)>/gi, '[i]');\n      rep(/<\\/u>/gi, '[/u]');\n      rep(/<span style=\\\"text-decoration: ?underline;\\\">(.*?)<\\/span>/gi, '[u]$1[/u]');\n      rep(/<u>/gi, '[u]');\n      rep(/<blockquote[^>]*>/gi, '[quote]');\n      rep(/<\\/blockquote>/gi, '[/quote]');\n      rep(/<br \\/>/gi, '\\n');\n      rep(/<br\\/>/gi, '\\n');\n      rep(/<br>/gi, '\\n');\n      rep(/<p>/gi, '');\n      rep(/<\\/p>/gi, '\\n');\n      rep(/&nbsp;|\\u00a0/gi, ' ');\n      rep(/&quot;/gi, '\"');\n      rep(/&lt;/gi, '<');\n      rep(/&gt;/gi, '>');\n      rep(/&amp;/gi, '&');\n      return s;\n    };\n    var bbcode2html = function (s) {\n      s = global$1.trim(s);\n      var rep = function (re, str) {\n        s = s.replace(re, str);\n      };\n      rep(/\\n/gi, '<br />');\n      rep(/\\[b\\]/gi, '<strong>');\n      rep(/\\[\\/b\\]/gi, '</strong>');\n      rep(/\\[i\\]/gi, '<em>');\n      rep(/\\[\\/i\\]/gi, '</em>');\n      rep(/\\[u\\]/gi, '<u>');\n      rep(/\\[\\/u\\]/gi, '</u>');\n      rep(/\\[url=([^\\]]+)\\](.*?)\\[\\/url\\]/gi, '<a href=\"$1\">$2</a>');\n      rep(/\\[url\\](.*?)\\[\\/url\\]/gi, '<a href=\"$1\">$1</a>');\n      rep(/\\[img\\](.*?)\\[\\/img\\]/gi, '<img src=\"$1\" />');\n      rep(/\\[color=(.*?)\\](.*?)\\[\\/color\\]/gi, '<font color=\"$1\">$2</font>');\n      rep(/\\[code\\](.*?)\\[\\/code\\]/gi, '<span class=\"codeStyle\">$1</span>&nbsp;');\n      rep(/\\[quote.*?\\](.*?)\\[\\/quote\\]/gi, '<span class=\"quoteStyle\">$1</span>&nbsp;');\n      return s;\n    };\n    var Convert = {\n      html2bbcode: html2bbcode,\n      bbcode2html: bbcode2html\n    };\n\n    function Plugin () {\n      global.add('bbcode', function (editor) {\n        editor.on('BeforeSetContent', function (e) {\n          e.content = Convert.bbcode2html(e.content);\n        });\n        editor.on('PostProcess', function (e) {\n          if (e.set) {\n            e.content = Convert.bbcode2html(e.content);\n          }\n          if (e.get) {\n            e.content = Convert.html2bbcode(e.content);\n          }\n        });\n      });\n    }\n\n    Plugin();\n\n}());\n"]}