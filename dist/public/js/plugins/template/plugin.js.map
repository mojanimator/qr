{"version":3,"sources":["../../../../../public/js/plugins/template/plugin.js"],"names":["global","tinymce","util","Tools","resolve","noop","constant","value","curry","fn","initialArgs","_i","arguments","length","restArgs","all","concat","apply","never","always","global$1","global$2","getCreationDateClasses","editor","getParam","getModificationDateClasses","getSelectedContentClasses","getPreviewReplaceValues","getTemplateReplaceValues","getTemplates","editorSettings","templates","getCdateFormat","translate","getMdateFormat","Settings","addZeros","len","i","getDateTime","fmt","date","daysShort","split","daysLong","monthsShort","monthsLong","Date","replace","getFullYear","getYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","DateTimeHelper","createTemplateList","callback","templateList","send","url","success","text","JSON","parse","replaceTemplateValues","html","templateValues","each","v","k","RegExp","replaceVals","e","dom","vl","select","hasClass","n","c","test","className","insertTemplate","ui","el","sel","selection","getContent","create","appendChild","cloneNode","innerHTML","execCommand","addVisual","Templates","register","addCommand","Commands","setup","on","o","dateFormat","node","FilterContent","none","NONE","eq","isNone","call","thunk","id","me","fold","s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","bind","exists","forall","filter","equals","equals_","toArray","toString","Object","freeze","some","a","constant_a","self","f","elementEq","b","from","Option","typeOf","x","t","Array","prototype","isPrototypeOf","constructor","name","String","isType","type","isFunction","nativeSlice","slice","xs","r","find","pred","from$1","global$3","hasOwnProperty","get","obj","key","has","entitiesAttr","htmlEscape","match","getPreviewContent","indexOf","contentCssLinks_1","contentCSS","documentBaseURI","toAbsolute","bodyClass","settings","body_class","encode","directionality","getBody","dir","dirAttr","open","createTemplates","message","notificationManager","template","index","isUrlTemplate","selected","title","content","description","createSelectBoxItems","findTemplate","templateTitle","getTemplateContent","reject","error","onChange","updateDialog","api","change","newTemplateTitle","getData","block","then","previewHtml","unblock","onSubmit","data","close","openDialog","selectBoxItems","buildDialogSpec","bodyItems","initialData","size","body","items","buttons","primary","dialogApi","label","sandboxed","preview","redial","focus","windowManager","optTemplates","Dialog","showDialog","register$1","registry","addButton","icon","tooltip","onAction","addMenuItem","Buttons","Plugin","add"],"mappings":"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","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var never = constant(false);\n    var always = constant(true);\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var getCreationDateClasses = function (editor) {\n      return editor.getParam('template_cdate_classes', 'cdate');\n    };\n    var getModificationDateClasses = function (editor) {\n      return editor.getParam('template_mdate_classes', 'mdate');\n    };\n    var getSelectedContentClasses = function (editor) {\n      return editor.getParam('template_selected_content_classes', 'selcontent');\n    };\n    var getPreviewReplaceValues = function (editor) {\n      return editor.getParam('template_preview_replace_values');\n    };\n    var getTemplateReplaceValues = function (editor) {\n      return editor.getParam('template_replace_values');\n    };\n    var getTemplates = function (editorSettings) {\n      return editorSettings.templates;\n    };\n    var getCdateFormat = function (editor) {\n      return editor.getParam('template_cdate_format', editor.translate('%Y-%m-%d'));\n    };\n    var getMdateFormat = function (editor) {\n      return editor.getParam('template_mdate_format', editor.translate('%Y-%m-%d'));\n    };\n    var Settings = {\n      getCreationDateClasses: getCreationDateClasses,\n      getModificationDateClasses: getModificationDateClasses,\n      getSelectedContentClasses: getSelectedContentClasses,\n      getPreviewReplaceValues: getPreviewReplaceValues,\n      getTemplateReplaceValues: getTemplateReplaceValues,\n      getTemplates: getTemplates,\n      getCdateFormat: getCdateFormat,\n      getMdateFormat: getMdateFormat\n    };\n\n    var addZeros = function (value, len) {\n      value = '' + value;\n      if (value.length < len) {\n        for (var i = 0; i < len - value.length; i++) {\n          value = '0' + value;\n        }\n      }\n      return value;\n    };\n    var getDateTime = function (editor, fmt, date) {\n      var daysShort = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');\n      var daysLong = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');\n      var monthsShort = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');\n      var monthsLong = 'January February March April May June July August September October November December'.split(' ');\n      date = date || new Date();\n      fmt = fmt.replace('%D', '%m/%d/%Y');\n      fmt = fmt.replace('%r', '%I:%M:%S %p');\n      fmt = fmt.replace('%Y', '' + date.getFullYear());\n      fmt = fmt.replace('%y', '' + date.getYear());\n      fmt = fmt.replace('%m', addZeros(date.getMonth() + 1, 2));\n      fmt = fmt.replace('%d', addZeros(date.getDate(), 2));\n      fmt = fmt.replace('%H', '' + addZeros(date.getHours(), 2));\n      fmt = fmt.replace('%M', '' + addZeros(date.getMinutes(), 2));\n      fmt = fmt.replace('%S', '' + addZeros(date.getSeconds(), 2));\n      fmt = fmt.replace('%I', '' + ((date.getHours() + 11) % 12 + 1));\n      fmt = fmt.replace('%p', '' + (date.getHours() < 12 ? 'AM' : 'PM'));\n      fmt = fmt.replace('%B', '' + editor.translate(monthsLong[date.getMonth()]));\n      fmt = fmt.replace('%b', '' + editor.translate(monthsShort[date.getMonth()]));\n      fmt = fmt.replace('%A', '' + editor.translate(daysLong[date.getDay()]));\n      fmt = fmt.replace('%a', '' + editor.translate(daysShort[date.getDay()]));\n      fmt = fmt.replace('%%', '%');\n      return fmt;\n    };\n    var DateTimeHelper = { getDateTime: getDateTime };\n\n    var createTemplateList = function (editorSettings, callback) {\n      return function () {\n        var templateList = Settings.getTemplates(editorSettings);\n        if (typeof templateList === 'function') {\n          templateList(callback);\n          return;\n        }\n        if (typeof templateList === 'string') {\n          global$2.send({\n            url: templateList,\n            success: function (text) {\n              callback(JSON.parse(text));\n            }\n          });\n        } else {\n          callback(templateList);\n        }\n      };\n    };\n    var replaceTemplateValues = function (html, templateValues) {\n      global$1.each(templateValues, function (v, k) {\n        if (typeof v === 'function') {\n          v = v(k);\n        }\n        html = html.replace(new RegExp('\\\\{\\\\$' + k + '\\\\}', 'g'), v);\n      });\n      return html;\n    };\n    var replaceVals = function (editor, e) {\n      var dom = editor.dom, vl = Settings.getTemplateReplaceValues(editor);\n      global$1.each(dom.select('*', e), function (e) {\n        global$1.each(vl, function (v, k) {\n          if (dom.hasClass(e, k)) {\n            if (typeof vl[k] === 'function') {\n              vl[k](e);\n            }\n          }\n        });\n      });\n    };\n    var hasClass = function (n, c) {\n      return new RegExp('\\\\b' + c + '\\\\b', 'g').test(n.className);\n    };\n    var insertTemplate = function (editor, ui, html) {\n      var el;\n      var n;\n      var dom = editor.dom;\n      var sel = editor.selection.getContent();\n      html = replaceTemplateValues(html, Settings.getTemplateReplaceValues(editor));\n      el = dom.create('div', null, html);\n      n = dom.select('.mceTmpl', el);\n      if (n && n.length > 0) {\n        el = dom.create('div', null);\n        el.appendChild(n[0].cloneNode(true));\n      }\n      global$1.each(dom.select('*', el), function (n) {\n        if (hasClass(n, Settings.getCreationDateClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = DateTimeHelper.getDateTime(editor, Settings.getCdateFormat(editor));\n        }\n        if (hasClass(n, Settings.getModificationDateClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = DateTimeHelper.getDateTime(editor, Settings.getMdateFormat(editor));\n        }\n        if (hasClass(n, Settings.getSelectedContentClasses(editor).replace(/\\s+/g, '|'))) {\n          n.innerHTML = sel;\n        }\n      });\n      replaceVals(editor, el);\n      editor.execCommand('mceInsertContent', false, el.innerHTML);\n      editor.addVisual();\n    };\n    var Templates = {\n      createTemplateList: createTemplateList,\n      replaceTemplateValues: replaceTemplateValues,\n      replaceVals: replaceVals,\n      insertTemplate: insertTemplate\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceInsertTemplate', curry(Templates.insertTemplate, editor));\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor) {\n      editor.on('PreProcess', function (o) {\n        var dom = editor.dom, dateFormat = Settings.getMdateFormat(editor);\n        global$1.each(dom.select('div', o.node), function (e) {\n          if (dom.hasClass(e, 'mceTmpl')) {\n            global$1.each(dom.select('*', e), function (e) {\n              if (dom.hasClass(e, editor.getParam('template_mdate_classes', 'mdate').replace(/\\s+/g, '|'))) {\n                e.innerHTML = DateTimeHelper.getDateTime(editor, dateFormat);\n              }\n            });\n            Templates.replaceVals(editor, e);\n          }\n        });\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = constant(a);\n      var self = function () {\n        return me;\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always,\n        isNone: never,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: function (f) {\n          return some(f(a));\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never, function (b) {\n            return elementEq(a, b);\n          });\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var hasOwnProperty = Object.hasOwnProperty;\n    var get = function (obj, key) {\n      return has(obj, key) ? Option.from(obj[key]) : Option.none();\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty.call(obj, key);\n    };\n\n    var entitiesAttr = {\n      '\"': '&quot;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '\\'': '&#039;'\n    };\n    var htmlEscape = function (html) {\n      return html.replace(/[\"'<>&]/g, function (match) {\n        return get(entitiesAttr, match).getOr(match);\n      });\n    };\n\n    var getPreviewContent = function (editor, html) {\n      if (html.indexOf('<html>') === -1) {\n        var contentCssLinks_1 = '';\n        global$1.each(editor.contentCSS, function (url) {\n          contentCssLinks_1 += '<link type=\"text/css\" rel=\"stylesheet\" href=\"' + editor.documentBaseURI.toAbsolute(url) + '\">';\n        });\n        var bodyClass = editor.settings.body_class || '';\n        if (bodyClass.indexOf('=') !== -1) {\n          bodyClass = editor.getParam('body_class', '', 'hash');\n          bodyClass = bodyClass[editor.id] || '';\n        }\n        var encode = editor.dom.encode;\n        var directionality = editor.getBody().dir;\n        var dirAttr = directionality ? ' dir=\"' + encode(directionality) + '\"' : '';\n        html = '<!DOCTYPE html>' + '<html>' + '<head>' + contentCssLinks_1 + '</head>' + '<body class=\"' + encode(bodyClass) + '\"' + dirAttr + '>' + html + '</body>' + '</html>';\n      }\n      return Templates.replaceTemplateValues(html, Settings.getPreviewReplaceValues(editor));\n    };\n    var open = function (editor, templateList) {\n      var createTemplates = function () {\n        if (!templateList || templateList.length === 0) {\n          var message = editor.translate('No templates defined.');\n          editor.notificationManager.open({\n            text: message,\n            type: 'info'\n          });\n          return Option.none();\n        }\n        return Option.from(global$1.map(templateList, function (template, index) {\n          var isUrlTemplate = function (t) {\n            return t.url !== undefined;\n          };\n          return {\n            selected: index === 0,\n            text: template.title,\n            value: {\n              url: isUrlTemplate(template) ? Option.from(template.url) : Option.none(),\n              content: !isUrlTemplate(template) ? Option.from(template.content) : Option.none(),\n              description: template.description\n            }\n          };\n        }));\n      };\n      var createSelectBoxItems = function (templates) {\n        return map(templates, function (t) {\n          return {\n            text: t.text,\n            value: t.text\n          };\n        });\n      };\n      var findTemplate = function (templates, templateTitle) {\n        return find(templates, function (t) {\n          return t.text === templateTitle;\n        });\n      };\n      var getTemplateContent = function (t) {\n        return new global$3(function (resolve, reject) {\n          t.value.url.fold(function () {\n            return resolve(t.value.content.getOr(''));\n          }, function (url) {\n            return global$2.send({\n              url: url,\n              success: function (html) {\n                resolve(html);\n              },\n              error: function (e) {\n                reject(e);\n              }\n            });\n          });\n        });\n      };\n      var onChange = function (templates, updateDialog) {\n        return function (api, change) {\n          if (change.name === 'template') {\n            var newTemplateTitle = api.getData().template;\n            findTemplate(templates, newTemplateTitle).each(function (t) {\n              api.block('Loading...');\n              getTemplateContent(t).then(function (previewHtml) {\n                updateDialog(api, t, previewHtml);\n                api.unblock();\n              });\n            });\n          }\n        };\n      };\n      var onSubmit = function (templates) {\n        return function (api) {\n          var data = api.getData();\n          findTemplate(templates, data.template).each(function (t) {\n            getTemplateContent(t).then(function (previewHtml) {\n              Templates.insertTemplate(editor, false, previewHtml);\n              api.close();\n            });\n          });\n        };\n      };\n      var openDialog = function (templates) {\n        var selectBoxItems = createSelectBoxItems(templates);\n        var buildDialogSpec = function (bodyItems, initialData) {\n          return {\n            title: 'Insert Template',\n            size: 'large',\n            body: {\n              type: 'panel',\n              items: bodyItems\n            },\n            initialData: initialData,\n            buttons: [\n              {\n                type: 'cancel',\n                name: 'cancel',\n                text: 'Cancel'\n              },\n              {\n                type: 'submit',\n                name: 'save',\n                text: 'Save',\n                primary: true\n              }\n            ],\n            onSubmit: onSubmit(templates),\n            onChange: onChange(templates, updateDialog)\n          };\n        };\n        var updateDialog = function (dialogApi, template, previewHtml) {\n          var content = getPreviewContent(editor, previewHtml);\n          var bodyItems = [\n            {\n              type: 'selectbox',\n              name: 'template',\n              label: 'Templates',\n              items: selectBoxItems\n            },\n            {\n              type: 'htmlpanel',\n              html: '<p aria-live=\"polite\">' + htmlEscape(template.value.description) + '</p>'\n            },\n            {\n              label: 'Preview',\n              type: 'iframe',\n              name: 'preview',\n              sandboxed: false\n            }\n          ];\n          var initialData = {\n            template: template.text,\n            preview: content\n          };\n          dialogApi.unblock();\n          dialogApi.redial(buildDialogSpec(bodyItems, initialData));\n          dialogApi.focus('template');\n        };\n        var dialogApi = editor.windowManager.open(buildDialogSpec([], {\n          template: '',\n          preview: ''\n        }));\n        dialogApi.block('Loading...');\n        getTemplateContent(templates[0]).then(function (previewHtml) {\n          updateDialog(dialogApi, templates[0], previewHtml);\n        });\n      };\n      var optTemplates = createTemplates();\n      optTemplates.each(openDialog);\n    };\n    var Dialog = { open: open };\n\n    var showDialog = function (editor) {\n      return function (templates) {\n        Dialog.open(editor, templates);\n      };\n    };\n    var register$1 = function (editor) {\n      editor.ui.registry.addButton('template', {\n        icon: 'template',\n        tooltip: 'Insert template',\n        onAction: Templates.createTemplateList(editor.settings, showDialog(editor))\n      });\n      editor.ui.registry.addMenuItem('template', {\n        icon: 'template',\n        text: 'Insert template...',\n        onAction: Templates.createTemplateList(editor.settings, showDialog(editor))\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global.add('template', function (editor) {\n        Buttons.register(editor);\n        Commands.register(editor);\n        FilterContent.setup(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"]}