{"version":3,"sources":["../../../../../public/js/plugins/autosave/plugin.min.js"],"names":["n","r","t","e","exec","s","m","parseInt","o","getParam","replace","document","location","pathname","search","hash","id","a","settings","forced_root_block","d","trim","getBody","innerHTML","RegExp","test","i","v","getItem","Date","getTime","autosave_retention","g","u","isDirty","setItem","getContent","format","no_events","toString","fire","setContent","c","autosave_interval","get","setInterval","removed","set","f","undoManager","transact","focus","l","clone","tinymce","util","Tools","resolve","removeItem","y","arguments","length","concat","apply","p","setDisabled","on","off","D","add","editorManager","each","plugins","autosave","storeDraft","translate","preventDefault","returnValue","ui","registry","addButton","tooltip","icon","onAction","onSetup","addMenuItem","text","dom","isEmpty","hasDraft","restoreDraft","removeDraft","window"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n!function(n){\"use strict\";function r(t,e){var n=t||e,r=/^(\\d+)([ms]?)$/.exec(\"\"+n);return(r[2]?{s:1e3,m:6e4}[r[2]]:1)*parseInt(n,10)}function o(t){var e=t.getParam(\"autosave_prefix\",\"tinymce-autosave-{path}{query}{hash}-{id}-\");return e=(e=(e=(e=e.replace(/\\{path\\}/g,n.document.location.pathname)).replace(/\\{query\\}/g,n.document.location.search)).replace(/\\{hash\\}/g,n.document.location.hash)).replace(/\\{id\\}/g,t.id)}function a(t,e){var n=t.settings.forced_root_block;return\"\"===(e=d.trim(void 0===e?t.getBody().innerHTML:e))||new RegExp(\"^<\"+n+\"[^>]*>((\\xa0|&nbsp;|[ \\t]|<br[^>]*>)+?|)</\"+n+\">|<br>$\",\"i\").test(e)}function i(t){var e=parseInt(v.getItem(o(t)+\"time\"),10)||0;return!((new Date).getTime()-e>function(t){return r(t.settings.autosave_retention,\"20m\")}(t))||(g(t,!1),!1)}function u(t){var e=o(t);!a(t)&&t.isDirty()&&(v.setItem(e+\"draft\",t.getContent({format:\"raw\",no_events:!0})),v.setItem(e+\"time\",(new Date).getTime().toString()),function(t){t.fire(\"StoreDraft\")}(t))}function s(t){var e=o(t);i(t)&&(t.setContent(v.getItem(e+\"draft\"),{format:\"raw\"}),function(t){t.fire(\"RestoreDraft\")}(t))}function c(t,e){var n=function(t){return r(t.settings.autosave_interval,\"30s\")}(t);e.get()||(m.setInterval(function(){t.removed||u(t)},n),e.set(!0))}function f(t){t.undoManager.transact(function(){s(t),g(t)}),t.focus()}var l=function(t){function e(){return n}var n=t;return{get:e,set:function(t){n=t},clone:function(){return l(e())}}},t=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),m=tinymce.util.Tools.resolve(\"tinymce.util.Delay\"),v=tinymce.util.Tools.resolve(\"tinymce.util.LocalStorage\"),d=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),g=function(t,e){var n=o(t);v.removeItem(n+\"draft\"),v.removeItem(n+\"time\"),!1!==e&&function(t){t.fire(\"RemoveDraft\")}(t)};function y(r){for(var o=[],t=1;t<arguments.length;t++)o[t-1]=arguments[t];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=o.concat(t);return r.apply(null,n)}}function p(n,t){return function(t){t.setDisabled(!i(n));function e(){return t.setDisabled(!i(n))}return n.on(\"StoreDraft RestoreDraft RemoveDraft\",e),function(){return n.off(\"StoreDraft RestoreDraft RemoveDraft\",e)}}}var D=tinymce.util.Tools.resolve(\"tinymce.EditorManager\");!function e(){t.add(\"autosave\",function(t){var e=l(!1);return function(t){t.editorManager.on(\"BeforeUnload\",function(t){var e;d.each(D.get(),function(t){t.plugins.autosave&&t.plugins.autosave.storeDraft(),!e&&t.isDirty()&&function(t){return t.getParam(\"autosave_ask_before_unload\",!0)}(t)&&(e=t.translate(\"You have unsaved changes are you sure you want to navigate away?\"))}),e&&(t.preventDefault(),t.returnValue=e)})}(t),function(t,e){c(t,e),t.ui.registry.addButton(\"restoredraft\",{tooltip:\"Restore last draft\",icon:\"restore-draft\",onAction:function(){f(t)},onSetup:p(t)}),t.ui.registry.addMenuItem(\"restoredraft\",{text:\"Restore last draft\",icon:\"restore-draft\",onAction:function(){f(t)},onSetup:p(t)})}(t,e),t.on(\"init\",function(){(function(t){return t.getParam(\"autosave_restore_when_empty\",!1)})(t)&&t.dom.isEmpty(t.getBody())&&s(t)}),function(t){return{hasDraft:y(i,t),storeDraft:y(u,t),restoreDraft:y(s,t),removeDraft:y(g,t),isEmpty:y(a,t)}}(t)})}()}(window);"]}