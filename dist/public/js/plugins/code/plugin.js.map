{"version":3,"sources":["../../../../../public/js/plugins/code/plugin.js"],"names":["global","tinymce","util","Tools","resolve","setContent","editor","html","focus","undoManager","transact","selection","setCursorLocation","nodeChanged","getContent","source_view","Content","open","editorContent","windowManager","title","size","body","type","items","name","buttons","text","primary","initialData","code","onSubmit","api","getData","close","Dialog","register","addCommand","Commands","register$1","ui","registry","addButton","icon","tooltip","onAction","addMenuItem","Buttons","Plugin","add"],"mappings":";;AAAA;;;;;;;;AAQC,aAAY;AACT;;AAEA,MAAIA,SAASC,QAAQC,IAAR,CAAaC,KAAb,CAAmBC,OAAnB,CAA2B,uBAA3B,CAAb;;AAEA,MAAIC,aAAa,SAAbA,UAAa,CAAUC,MAAV,EAAkBC,IAAlB,EAAwB;AACvCD,WAAOE,KAAP;AACAF,WAAOG,WAAP,CAAmBC,QAAnB,CAA4B,YAAY;AACtCJ,aAAOD,UAAP,CAAkBE,IAAlB;AACD,KAFD;AAGAD,WAAOK,SAAP,CAAiBC,iBAAjB;AACAN,WAAOO,WAAP;AACD,GAPD;AAQA,MAAIC,aAAa,SAAbA,UAAa,CAAUR,MAAV,EAAkB;AACjC,WAAOA,OAAOQ,UAAP,CAAkB,EAAEC,aAAa,IAAf,EAAlB,CAAP;AACD,GAFD;AAGA,MAAIC,UAAU;AACZX,gBAAYA,UADA;AAEZS,gBAAYA;AAFA,GAAd;;AAKA,MAAIG,OAAO,SAAPA,IAAO,CAAUX,MAAV,EAAkB;AAC3B,QAAIY,gBAAgBF,QAAQF,UAAR,CAAmBR,MAAnB,CAApB;AACAA,WAAOa,aAAP,CAAqBF,IAArB,CAA0B;AACxBG,aAAO,aADiB;AAExBC,YAAM,OAFkB;AAGxBC,YAAM;AACJC,cAAM,OADF;AAEJC,eAAO,CAAC;AACJD,gBAAM,UADF;AAEJE,gBAAM;AAFF,SAAD;AAFH,OAHkB;AAUxBC,eAAS,CACP;AACEH,cAAM,QADR;AAEEE,cAAM,QAFR;AAGEE,cAAM;AAHR,OADO,EAMP;AACEJ,cAAM,QADR;AAEEE,cAAM,MAFR;AAGEE,cAAM,MAHR;AAIEC,iBAAS;AAJX,OANO,CAVe;AAuBxBC,mBAAa,EAAEC,MAAMZ,aAAR,EAvBW;AAwBxBa,gBAAU,kBAAUC,GAAV,EAAe;AACvBhB,gBAAQX,UAAR,CAAmBC,MAAnB,EAA2B0B,IAAIC,OAAJ,GAAcH,IAAzC;AACAE,YAAIE,KAAJ;AACD;AA3BuB,KAA1B;AA6BD,GA/BD;AAgCA,MAAIC,SAAS,EAAElB,MAAMA,IAAR,EAAb;;AAEA,MAAImB,WAAW,SAAXA,QAAW,CAAU9B,MAAV,EAAkB;AAC/BA,WAAO+B,UAAP,CAAkB,eAAlB,EAAmC,YAAY;AAC7CF,aAAOlB,IAAP,CAAYX,MAAZ;AACD,KAFD;AAGD,GAJD;AAKA,MAAIgC,WAAW,EAAEF,UAAUA,QAAZ,EAAf;;AAEA,MAAIG,aAAa,SAAbA,UAAa,CAAUjC,MAAV,EAAkB;AACjCA,WAAOkC,EAAP,CAAUC,QAAV,CAAmBC,SAAnB,CAA6B,MAA7B,EAAqC;AACnCC,YAAM,YAD6B;AAEnCC,eAAS,aAF0B;AAGnCC,gBAAU,oBAAY;AACpB,eAAOV,OAAOlB,IAAP,CAAYX,MAAZ,CAAP;AACD;AALkC,KAArC;AAOAA,WAAOkC,EAAP,CAAUC,QAAV,CAAmBK,WAAnB,CAA+B,MAA/B,EAAuC;AACrCH,YAAM,YAD+B;AAErChB,YAAM,aAF+B;AAGrCkB,gBAAU,oBAAY;AACpB,eAAOV,OAAOlB,IAAP,CAAYX,MAAZ,CAAP;AACD;AALoC,KAAvC;AAOD,GAfD;AAgBA,MAAIyC,UAAU,EAAEX,UAAUG,UAAZ,EAAd;;AAEA,WAASS,MAAT,GAAmB;AACjBhD,WAAOiD,GAAP,CAAW,MAAX,EAAmB,UAAU3C,MAAV,EAAkB;AACnCgC,eAASF,QAAT,CAAkB9B,MAAlB;AACAyC,cAAQX,QAAR,CAAiB9B,MAAjB;AACA,aAAO,EAAP;AACD,KAJD;AAKD;;AAED0C;AAEH,CA1FA,GAAD","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var setContent = function (editor, html) {\n      editor.focus();\n      editor.undoManager.transact(function () {\n        editor.setContent(html);\n      });\n      editor.selection.setCursorLocation();\n      editor.nodeChanged();\n    };\n    var getContent = function (editor) {\n      return editor.getContent({ source_view: true });\n    };\n    var Content = {\n      setContent: setContent,\n      getContent: getContent\n    };\n\n    var open = function (editor) {\n      var editorContent = Content.getContent(editor);\n      editor.windowManager.open({\n        title: 'Source Code',\n        size: 'large',\n        body: {\n          type: 'panel',\n          items: [{\n              type: 'textarea',\n              name: 'code'\n            }]\n        },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: { code: editorContent },\n        onSubmit: function (api) {\n          Content.setContent(editor, api.getData().code);\n          api.close();\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceCodeEditor', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.ui.registry.addButton('code', {\n        icon: 'sourcecode',\n        tooltip: 'Source code',\n        onAction: function () {\n          return Dialog.open(editor);\n        }\n      });\n      editor.ui.registry.addMenuItem('code', {\n        icon: 'sourcecode',\n        text: 'Source code',\n        onAction: function () {\n          return Dialog.open(editor);\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global.add('code', function (editor) {\n        Commands.register(editor);\n        Buttons.register(editor);\n        return {};\n      });\n    }\n\n    Plugin();\n\n}());\n"]}