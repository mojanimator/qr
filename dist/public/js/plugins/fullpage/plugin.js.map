{"version":3,"sources":["../../../../../public/js/plugins/fullpage/plugin.js"],"names":["domGlobals","Cell","initial","value","get","set","v","clone","global","tinymce","util","Tools","resolve","global$1","global$2","global$3","global$4","shouldHideInSourceView","editor","getParam","getDefaultXmlPi","getDefaultEncoding","getDefaultFontFamily","getDefaultFontSize","getDefaultTextColor","getDefaultTitle","getDefaultDocType","Settings","parseHeader","head","validate","root_name","parse","htmlToData","headerFragment","data","elm","matches","getAttr","name","attr","fontface","fontsize","firstChild","type","xml_pi","exec","docencoding","getAll","doctype","title","each","meta","httpEquiv","toLowerCase","langcode","stylesheets","link","push","langdir","style","visited_color","link_color","active_color","dataToHtml","headElement","html","dom","setAttr","undefined","addHeadNode","node","insert","append","remove","substring","length","shortEnded","empty","split","nodes","i","currentStyleSheetsMap","stylesheet","rel","text","href","setAttribs","getBody","dir","vLink","aLink","indent","indent_before","indent_after","serialize","indexOf","Parser","hasOwnProperty","Object","prototype","shallow","old","nu","baseMerge","merger","objects","Array","arguments","Error","ret","j","curObject","key","call","merge","open","headState","defaultData","keywords","description","robots","author","initialData","windowManager","size","body","items","label","buttons","primary","onSubmit","api","nuData","getData","headHtml","extend","close","Dialog","register","addCommand","Commands","protectHtml","protect","pattern","replace","str","escape","unprotectHtml","a","m","unescape","Protect","low","s","handleSetContent","footState","evt","startPos","endPos","content","styles","selection","settings","format","source_view","trim","getDefaultHeader","bodyElm","headElm","getDoc","getElementsByTagName","styleElm","add","id","appendChild","document","createTextNode","getAttribute","parentNode","removeChild","header","piEncoding","handleGetContent","foot","setup","on","FilterContent","register$1","ui","registry","addButton","tooltip","icon","onAction","execCommand","addMenuItem","Buttons","Plugin","window"],"mappings":"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","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n(function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    var shouldHideInSourceView = function (editor) {\n      return editor.getParam('fullpage_hide_in_source_view');\n    };\n    var getDefaultXmlPi = function (editor) {\n      return editor.getParam('fullpage_default_xml_pi');\n    };\n    var getDefaultEncoding = function (editor) {\n      return editor.getParam('fullpage_default_encoding');\n    };\n    var getDefaultFontFamily = function (editor) {\n      return editor.getParam('fullpage_default_font_family');\n    };\n    var getDefaultFontSize = function (editor) {\n      return editor.getParam('fullpage_default_font_size');\n    };\n    var getDefaultTextColor = function (editor) {\n      return editor.getParam('fullpage_default_text_color');\n    };\n    var getDefaultTitle = function (editor) {\n      return editor.getParam('fullpage_default_title');\n    };\n    var getDefaultDocType = function (editor) {\n      return editor.getParam('fullpage_default_doctype', '<!DOCTYPE html>');\n    };\n    var Settings = {\n      shouldHideInSourceView: shouldHideInSourceView,\n      getDefaultXmlPi: getDefaultXmlPi,\n      getDefaultEncoding: getDefaultEncoding,\n      getDefaultFontFamily: getDefaultFontFamily,\n      getDefaultFontSize: getDefaultFontSize,\n      getDefaultTextColor: getDefaultTextColor,\n      getDefaultTitle: getDefaultTitle,\n      getDefaultDocType: getDefaultDocType\n    };\n\n    var parseHeader = function (head) {\n      return global$2({\n        validate: false,\n        root_name: '#document'\n      }).parse(head);\n    };\n    var htmlToData = function (editor, head) {\n      var headerFragment = parseHeader(head);\n      var data = {};\n      var elm, matches;\n      function getAttr(elm, name) {\n        var value = elm.attr(name);\n        return value || '';\n      }\n      data.fontface = Settings.getDefaultFontFamily(editor);\n      data.fontsize = Settings.getDefaultFontSize(editor);\n      elm = headerFragment.firstChild;\n      if (elm.type === 7) {\n        data.xml_pi = true;\n        matches = /encoding=\"([^\"]+)\"/.exec(elm.value);\n        if (matches) {\n          data.docencoding = matches[1];\n        }\n      }\n      elm = headerFragment.getAll('#doctype')[0];\n      if (elm) {\n        data.doctype = '<!DOCTYPE' + elm.value + '>';\n      }\n      elm = headerFragment.getAll('title')[0];\n      if (elm && elm.firstChild) {\n        data.title = elm.firstChild.value;\n      }\n      global$1.each(headerFragment.getAll('meta'), function (meta) {\n        var name = meta.attr('name');\n        var httpEquiv = meta.attr('http-equiv');\n        var matches;\n        if (name) {\n          data[name.toLowerCase()] = meta.attr('content');\n        } else if (httpEquiv === 'Content-Type') {\n          matches = /charset\\s*=\\s*(.*)\\s*/gi.exec(meta.attr('content'));\n          if (matches) {\n            data.docencoding = matches[1];\n          }\n        }\n      });\n      elm = headerFragment.getAll('html')[0];\n      if (elm) {\n        data.langcode = getAttr(elm, 'lang') || getAttr(elm, 'xml:lang');\n      }\n      data.stylesheets = [];\n      global$1.each(headerFragment.getAll('link'), function (link) {\n        if (link.attr('rel') === 'stylesheet') {\n          data.stylesheets.push(link.attr('href'));\n        }\n      });\n      elm = headerFragment.getAll('body')[0];\n      if (elm) {\n        data.langdir = getAttr(elm, 'dir');\n        data.style = getAttr(elm, 'style');\n        data.visited_color = getAttr(elm, 'vlink');\n        data.link_color = getAttr(elm, 'link');\n        data.active_color = getAttr(elm, 'alink');\n      }\n      return data;\n    };\n    var dataToHtml = function (editor, data, head) {\n      var headerFragment, headElement, html, elm, value;\n      var dom = editor.dom;\n      function setAttr(elm, name, value) {\n        elm.attr(name, value ? value : undefined);\n      }\n      function addHeadNode(node) {\n        if (headElement.firstChild) {\n          headElement.insert(node, headElement.firstChild);\n        } else {\n          headElement.append(node);\n        }\n      }\n      headerFragment = parseHeader(head);\n      headElement = headerFragment.getAll('head')[0];\n      if (!headElement) {\n        elm = headerFragment.getAll('html')[0];\n        headElement = new global$3('head', 1);\n        if (elm.firstChild) {\n          elm.insert(headElement, elm.firstChild, true);\n        } else {\n          elm.append(headElement);\n        }\n      }\n      elm = headerFragment.firstChild;\n      if (data.xml_pi) {\n        value = 'version=\"1.0\"';\n        if (data.docencoding) {\n          value += ' encoding=\"' + data.docencoding + '\"';\n        }\n        if (elm.type !== 7) {\n          elm = new global$3('xml', 7);\n          headerFragment.insert(elm, headerFragment.firstChild, true);\n        }\n        elm.value = value;\n      } else if (elm && elm.type === 7) {\n        elm.remove();\n      }\n      elm = headerFragment.getAll('#doctype')[0];\n      if (data.doctype) {\n        if (!elm) {\n          elm = new global$3('#doctype', 10);\n          if (data.xml_pi) {\n            headerFragment.insert(elm, headerFragment.firstChild);\n          } else {\n            addHeadNode(elm);\n          }\n        }\n        elm.value = data.doctype.substring(9, data.doctype.length - 1);\n      } else if (elm) {\n        elm.remove();\n      }\n      elm = null;\n      global$1.each(headerFragment.getAll('meta'), function (meta) {\n        if (meta.attr('http-equiv') === 'Content-Type') {\n          elm = meta;\n        }\n      });\n      if (data.docencoding) {\n        if (!elm) {\n          elm = new global$3('meta', 1);\n          elm.attr('http-equiv', 'Content-Type');\n          elm.shortEnded = true;\n          addHeadNode(elm);\n        }\n        elm.attr('content', 'text/html; charset=' + data.docencoding);\n      } else if (elm) {\n        elm.remove();\n      }\n      elm = headerFragment.getAll('title')[0];\n      if (data.title) {\n        if (!elm) {\n          elm = new global$3('title', 1);\n          addHeadNode(elm);\n        } else {\n          elm.empty();\n        }\n        elm.append(new global$3('#text', 3)).value = data.title;\n      } else if (elm) {\n        elm.remove();\n      }\n      global$1.each('keywords,description,author,copyright,robots'.split(','), function (name) {\n        var nodes = headerFragment.getAll('meta');\n        var i, meta;\n        var value = data[name];\n        for (i = 0; i < nodes.length; i++) {\n          meta = nodes[i];\n          if (meta.attr('name') === name) {\n            if (value) {\n              meta.attr('content', value);\n            } else {\n              meta.remove();\n            }\n            return;\n          }\n        }\n        if (value) {\n          elm = new global$3('meta', 1);\n          elm.attr('name', name);\n          elm.attr('content', value);\n          elm.shortEnded = true;\n          addHeadNode(elm);\n        }\n      });\n      var currentStyleSheetsMap = {};\n      global$1.each(headerFragment.getAll('link'), function (stylesheet) {\n        if (stylesheet.attr('rel') === 'stylesheet') {\n          currentStyleSheetsMap[stylesheet.attr('href')] = stylesheet;\n        }\n      });\n      global$1.each(data.stylesheets, function (stylesheet) {\n        if (!currentStyleSheetsMap[stylesheet]) {\n          elm = new global$3('link', 1);\n          elm.attr({\n            rel: 'stylesheet',\n            text: 'text/css',\n            href: stylesheet\n          });\n          elm.shortEnded = true;\n          addHeadNode(elm);\n        }\n        delete currentStyleSheetsMap[stylesheet];\n      });\n      global$1.each(currentStyleSheetsMap, function (stylesheet) {\n        stylesheet.remove();\n      });\n      elm = headerFragment.getAll('body')[0];\n      if (elm) {\n        setAttr(elm, 'dir', data.langdir);\n        setAttr(elm, 'style', data.style);\n        setAttr(elm, 'vlink', data.visited_color);\n        setAttr(elm, 'link', data.link_color);\n        setAttr(elm, 'alink', data.active_color);\n        dom.setAttribs(editor.getBody(), {\n          style: data.style,\n          dir: data.dir,\n          vLink: data.visited_color,\n          link: data.link_color,\n          aLink: data.active_color\n        });\n      }\n      elm = headerFragment.getAll('html')[0];\n      if (elm) {\n        setAttr(elm, 'lang', data.langcode);\n        setAttr(elm, 'xml:lang', data.langcode);\n      }\n      if (!headElement.firstChild) {\n        headElement.remove();\n      }\n      html = global$4({\n        validate: false,\n        indent: true,\n        indent_before: 'head,html,body,meta,title,script,link,style',\n        indent_after: 'head,html,body,meta,title,script,link,style'\n      }).serialize(headerFragment);\n      return html.substring(0, html.indexOf('</body>'));\n    };\n    var Parser = {\n      parseHeader: parseHeader,\n      htmlToData: htmlToData,\n      dataToHtml: dataToHtml\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow);\n\n    var open = function (editor, headState) {\n      var data = Parser.htmlToData(editor, headState.get());\n      var defaultData = {\n        title: '',\n        keywords: '',\n        description: '',\n        robots: '',\n        author: '',\n        docencoding: ''\n      };\n      var initialData = merge(defaultData, data);\n      editor.windowManager.open({\n        title: 'Metadata and Document Properties',\n        size: 'normal',\n        body: {\n          type: 'panel',\n          items: [\n            {\n              name: 'title',\n              type: 'input',\n              label: 'Title'\n            },\n            {\n              name: 'keywords',\n              type: 'input',\n              label: 'Keywords'\n            },\n            {\n              name: 'description',\n              type: 'input',\n              label: 'Description'\n            },\n            {\n              name: 'robots',\n              type: 'input',\n              label: 'Robots'\n            },\n            {\n              name: 'author',\n              type: 'input',\n              label: 'Author'\n            },\n            {\n              name: 'docencoding',\n              type: 'input',\n              label: 'Encoding'\n            }\n          ]\n        },\n        buttons: [\n          {\n            type: 'cancel',\n            name: 'cancel',\n            text: 'Cancel'\n          },\n          {\n            type: 'submit',\n            name: 'save',\n            text: 'Save',\n            primary: true\n          }\n        ],\n        initialData: initialData,\n        onSubmit: function (api) {\n          var nuData = api.getData();\n          var headHtml = Parser.dataToHtml(editor, global$1.extend(data, nuData), headState.get());\n          headState.set(headHtml);\n          api.close();\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor, headState) {\n      editor.addCommand('mceFullPageProperties', function () {\n        Dialog.open(editor, headState);\n      });\n    };\n    var Commands = { register: register };\n\n    var protectHtml = function (protect, html) {\n      global$1.each(protect, function (pattern) {\n        html = html.replace(pattern, function (str) {\n          return '<!--mce:protected ' + escape(str) + '-->';\n        });\n      });\n      return html;\n    };\n    var unprotectHtml = function (html) {\n      return html.replace(/<!--mce:protected ([\\s\\S]*?)-->/g, function (a, m) {\n        return unescape(m);\n      });\n    };\n    var Protect = {\n      protectHtml: protectHtml,\n      unprotectHtml: unprotectHtml\n    };\n\n    var each = global$1.each;\n    var low = function (s) {\n      return s.replace(/<\\/?[A-Z]+/g, function (a) {\n        return a.toLowerCase();\n      });\n    };\n    var handleSetContent = function (editor, headState, footState, evt) {\n      var startPos, endPos, content, headerFragment, styles = '';\n      var dom = editor.dom;\n      if (evt.selection) {\n        return;\n      }\n      content = Protect.protectHtml(editor.settings.protect, evt.content);\n      if (evt.format === 'raw' && headState.get()) {\n        return;\n      }\n      if (evt.source_view && Settings.shouldHideInSourceView(editor)) {\n        return;\n      }\n      if (content.length === 0 && !evt.source_view) {\n        content = global$1.trim(headState.get()) + '\\n' + global$1.trim(content) + '\\n' + global$1.trim(footState.get());\n      }\n      content = content.replace(/<(\\/?)BODY/gi, '<$1body');\n      startPos = content.indexOf('<body');\n      if (startPos !== -1) {\n        startPos = content.indexOf('>', startPos);\n        headState.set(low(content.substring(0, startPos + 1)));\n        endPos = content.indexOf('</body', startPos);\n        if (endPos === -1) {\n          endPos = content.length;\n        }\n        evt.content = global$1.trim(content.substring(startPos + 1, endPos));\n        footState.set(low(content.substring(endPos)));\n      } else {\n        headState.set(getDefaultHeader(editor));\n        footState.set('\\n</body>\\n</html>');\n      }\n      headerFragment = Parser.parseHeader(headState.get());\n      each(headerFragment.getAll('style'), function (node) {\n        if (node.firstChild) {\n          styles += node.firstChild.value;\n        }\n      });\n      var bodyElm = headerFragment.getAll('body')[0];\n      if (bodyElm) {\n        dom.setAttribs(editor.getBody(), {\n          style: bodyElm.attr('style') || '',\n          dir: bodyElm.attr('dir') || '',\n          vLink: bodyElm.attr('vlink') || '',\n          link: bodyElm.attr('link') || '',\n          aLink: bodyElm.attr('alink') || ''\n        });\n      }\n      dom.remove('fullpage_styles');\n      var headElm = editor.getDoc().getElementsByTagName('head')[0];\n      if (styles) {\n        var styleElm = dom.add(headElm, 'style', { id: 'fullpage_styles' });\n        styleElm.appendChild(domGlobals.document.createTextNode(styles));\n      }\n      var currentStyleSheetsMap = {};\n      global$1.each(headElm.getElementsByTagName('link'), function (stylesheet) {\n        if (stylesheet.rel === 'stylesheet' && stylesheet.getAttribute('data-mce-fullpage')) {\n          currentStyleSheetsMap[stylesheet.href] = stylesheet;\n        }\n      });\n      global$1.each(headerFragment.getAll('link'), function (stylesheet) {\n        var href = stylesheet.attr('href');\n        if (!href) {\n          return true;\n        }\n        if (!currentStyleSheetsMap[href] && stylesheet.attr('rel') === 'stylesheet') {\n          dom.add(headElm, 'link', {\n            'rel': 'stylesheet',\n            'text': 'text/css',\n            'href': href,\n            'data-mce-fullpage': '1'\n          });\n        }\n        delete currentStyleSheetsMap[href];\n      });\n      global$1.each(currentStyleSheetsMap, function (stylesheet) {\n        stylesheet.parentNode.removeChild(stylesheet);\n      });\n    };\n    var getDefaultHeader = function (editor) {\n      var header = '', value, styles = '';\n      if (Settings.getDefaultXmlPi(editor)) {\n        var piEncoding = Settings.getDefaultEncoding(editor);\n        header += '<?xml version=\"1.0\" encoding=\"' + (piEncoding ? piEncoding : 'ISO-8859-1') + '\" ?>\\n';\n      }\n      header += Settings.getDefaultDocType(editor);\n      header += '\\n<html>\\n<head>\\n';\n      if (value = Settings.getDefaultTitle(editor)) {\n        header += '<title>' + value + '</title>\\n';\n      }\n      if (value = Settings.getDefaultEncoding(editor)) {\n        header += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=' + value + '\" />\\n';\n      }\n      if (value = Settings.getDefaultFontFamily(editor)) {\n        styles += 'font-family: ' + value + ';';\n      }\n      if (value = Settings.getDefaultFontSize(editor)) {\n        styles += 'font-size: ' + value + ';';\n      }\n      if (value = Settings.getDefaultTextColor(editor)) {\n        styles += 'color: ' + value + ';';\n      }\n      header += '</head>\\n<body' + (styles ? ' style=\"' + styles + '\"' : '') + '>\\n';\n      return header;\n    };\n    var handleGetContent = function (editor, head, foot, evt) {\n      if (!evt.selection && (!evt.source_view || !Settings.shouldHideInSourceView(editor))) {\n        evt.content = Protect.unprotectHtml(global$1.trim(head) + '\\n' + global$1.trim(evt.content) + '\\n' + global$1.trim(foot));\n      }\n    };\n    var setup = function (editor, headState, footState) {\n      editor.on('BeforeSetContent', function (evt) {\n        handleSetContent(editor, headState, footState, evt);\n      });\n      editor.on('GetContent', function (evt) {\n        handleGetContent(editor, headState.get(), footState.get(), evt);\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.ui.registry.addButton('fullpage', {\n        tooltip: 'Metadata and document properties',\n        icon: 'document-properties',\n        onAction: function () {\n          editor.execCommand('mceFullPageProperties');\n        }\n      });\n      editor.ui.registry.addMenuItem('fullpage', {\n        text: 'Metadata and document properties',\n        icon: 'document-properties',\n        onAction: function () {\n          editor.execCommand('mceFullPageProperties');\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    function Plugin () {\n      global.add('fullpage', function (editor) {\n        var headState = Cell(''), footState = Cell('');\n        Commands.register(editor, headState);\n        Buttons.register(editor);\n        FilterContent.setup(editor, headState, footState);\n      });\n    }\n\n    Plugin();\n\n}(window));\n"]}