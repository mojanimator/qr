{"version":3,"sources":["../../../../../public/js/plugins/importcss/plugin.js"],"names":["global","tinymce","util","Tools","resolve","global$1","global$2","global$3","global$4","shouldMergeClasses","editor","getParam","shouldImportExclusive","getSelectorConverter","getSelectorFilter","getCssGroups","shouldAppend","getFileFilter","Settings","noop","constant","value","never","always","none","NONE","eq","o","isNone","call","thunk","id","n","me","fold","s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","Object","freeze","typeOf","x","t","Array","prototype","isPrototypeOf","constructor","name","String","isType","type","isArray","isFunction","nativeSlice","slice","nativePush","push","xs","f","len","length","r","i","flatten","apply","output","from","generate","ungroupedOrder","groupOrder","groups","addItemToGroup","groupTitle","itemInfo","addItem","toFormats","groupItems","g","items","title","concat","removeCacheSuffix","url","cacheSuffix","replace","isSkinContentCss","href","settings","skin","skinUrl","skin_url","documentBaseURI","toAbsolute","baseURL","contentSkinUrlPart","inline","indexOf","compileFilter","RegExp","test","getSelectors","doc","fileFilter","selectors","contentCSSUrls","append","styleSheet","imported","rules","imports","cssRules","e","cssRule","selectorText","split","selector","trim","contentCSS","styleSheets","defaultConvertSelectorToFormat","format","exec","elementName","classes","substr","join","inlineSelectorElements","makeMap","schema","getTextBlockElements","block","getBlockElements","toLowerCase","attributes","class","getGroupsBySelector","grep","group","compileUserDefinedGroups","extend","original","item","text","menu","isExclusiveMode","isUniqueSelector","globallyUniqueSelectors","markUniqueSelector","convertSelectorToFormat","plugin","selectorConverter","selector_converter","setup","on","model","selectorFilter","processSelector","plugins","importcss","formatName","DOM","uniqueId","formatter","register","getDoc","selectorGroups","menuItem","fire","ImportCss","get","Api","Plugin","add"],"mappings":";;;;AAAA;;;;;;;;AAQC,aAAY;AACT;;AAEA,MAAIA,SAASC,QAAQC,IAAR,CAAaC,KAAb,CAAmBC,OAAnB,CAA2B,uBAA3B,CAAb;;AAEA,MAAIC,WAAWJ,QAAQC,IAAR,CAAaC,KAAb,CAAmBC,OAAnB,CAA2B,sBAA3B,CAAf;;AAEA,MAAIE,WAAWL,QAAQC,IAAR,CAAaC,KAAb,CAAmBC,OAAnB,CAA2B,uBAA3B,CAAf;;AAEA,MAAIG,WAAWN,QAAQC,IAAR,CAAaC,KAAb,CAAmBC,OAAnB,CAA2B,aAA3B,CAAf;;AAEA,MAAII,WAAWP,QAAQC,IAAR,CAAaC,KAAb,CAAmBC,OAAnB,CAA2B,oBAA3B,CAAf;;AAEA,MAAIK,qBAAqB,SAArBA,kBAAqB,CAAUC,MAAV,EAAkB;AACzC,WAAOA,OAAOC,QAAP,CAAgB,yBAAhB,CAAP;AACD,GAFD;AAGA,MAAIC,wBAAwB,SAAxBA,qBAAwB,CAAUF,MAAV,EAAkB;AAC5C,WAAOA,OAAOC,QAAP,CAAgB,qBAAhB,CAAP;AACD,GAFD;AAGA,MAAIE,uBAAuB,SAAvBA,oBAAuB,CAAUH,MAAV,EAAkB;AAC3C,WAAOA,OAAOC,QAAP,CAAgB,8BAAhB,CAAP;AACD,GAFD;AAGA,MAAIG,oBAAoB,SAApBA,iBAAoB,CAAUJ,MAAV,EAAkB;AACxC,WAAOA,OAAOC,QAAP,CAAgB,2BAAhB,CAAP;AACD,GAFD;AAGA,MAAII,eAAe,SAAfA,YAAe,CAAUL,MAAV,EAAkB;AACnC,WAAOA,OAAOC,QAAP,CAAgB,kBAAhB,CAAP;AACD,GAFD;AAGA,MAAIK,eAAe,SAAfA,YAAe,CAAUN,MAAV,EAAkB;AACnC,WAAOA,OAAOC,QAAP,CAAgB,kBAAhB,CAAP;AACD,GAFD;AAGA,MAAIM,gBAAgB,SAAhBA,aAAgB,CAAUP,MAAV,EAAkB;AACpC,WAAOA,OAAOC,QAAP,CAAgB,uBAAhB,CAAP;AACD,GAFD;AAGA,MAAIO,WAAW;AACbT,wBAAoBA,kBADP;AAEbG,2BAAuBA,qBAFV;AAGbC,0BAAsBA,oBAHT;AAIbC,uBAAmBA,iBAJN;AAKbC,kBAAcA,YALD;AAMbC,kBAAcA,YAND;AAObC,mBAAeA;AAPF,GAAf;;AAUA,MAAIE,OAAO,SAAPA,IAAO,GAAY,CACtB,CADD;AAEA,MAAIC,WAAW,SAAXA,QAAW,CAAUC,KAAV,EAAiB;AAC9B,WAAO,YAAY;AACjB,aAAOA,KAAP;AACD,KAFD;AAGD,GAJD;AAKA,MAAIC,QAAQF,SAAS,KAAT,CAAZ;AACA,MAAIG,SAASH,SAAS,IAAT,CAAb;;AAEA,MAAII,OAAO,SAAPA,IAAO,GAAY;AACrB,WAAOC,IAAP;AACD,GAFD;AAGA,MAAIA,OAAO,YAAY;AACrB,QAAIC,KAAK,SAALA,EAAK,CAAUC,CAAV,EAAa;AACpB,aAAOA,EAAEC,MAAF,EAAP;AACD,KAFD;AAGA,QAAIC,OAAO,SAAPA,IAAO,CAAUC,KAAV,EAAiB;AAC1B,aAAOA,OAAP;AACD,KAFD;AAGA,QAAIC,KAAK,SAALA,EAAK,CAAUC,CAAV,EAAa;AACpB,aAAOA,CAAP;AACD,KAFD;AAGA,QAAIC,KAAK;AACPC,YAAM,cAAUF,CAAV,EAAaG,CAAb,EAAgB;AACpB,eAAOH,GAAP;AACD,OAHM;AAIPI,UAAId,KAJG;AAKPe,cAAQf,KALD;AAMPM,cAAQL,MAND;AAOPe,aAAOP,EAPA;AAQPQ,kBAAYV,IARL;AASPW,gBAAU,kBAAUC,GAAV,EAAe;AACvB,cAAM,IAAIC,KAAJ,CAAUD,OAAO,iCAAjB,CAAN;AACD,OAXM;AAYPE,iBAAWvB,SAAS,IAAT,CAZJ;AAaPwB,sBAAgBxB,SAASyB,SAAT,CAbT;AAcPC,UAAIf,EAdG;AAePgB,eAASlB,IAfF;AAgBPmB,WAAKxB,IAhBE;AAiBPyB,YAAM9B,IAjBC;AAkBP+B,YAAM1B,IAlBC;AAmBP2B,cAAQ7B,KAnBD;AAoBP8B,cAAQ7B,MApBD;AAqBP8B,cAAQ7B,IArBD;AAsBP8B,cAAQ5B,EAtBD;AAuBP6B,eAAS7B,EAvBF;AAwBP8B,eAAS,mBAAY;AACnB,eAAO,EAAP;AACD,OA1BM;AA2BPC,gBAAUrC,SAAS,QAAT;AA3BH,KAAT;AA6BA,QAAIsC,OAAOC,MAAX,EAAmB;AACjBD,aAAOC,MAAP,CAAc1B,EAAd;AACD;AACD,WAAOA,EAAP;AACD,GA3CU,EAAX;;AA6CA,MAAI2B,SAAS,SAATA,MAAS,CAAUC,CAAV,EAAa;AACxB,QAAIA,MAAM,IAAV,EAAgB;AACd,aAAO,MAAP;AACD;AACD,QAAIC,WAAWD,CAAX,yCAAWA,CAAX,CAAJ;AACA,QAAIC,MAAM,QAAN,KAAmBC,MAAMC,SAAN,CAAgBC,aAAhB,CAA8BJ,CAA9B,KAAoCA,EAAEK,WAAF,IAAiBL,EAAEK,WAAF,CAAcC,IAAd,KAAuB,OAA/F,CAAJ,EAA6G;AAC3G,aAAO,OAAP;AACD;AACD,QAAIL,MAAM,QAAN,KAAmBM,OAAOJ,SAAP,CAAiBC,aAAjB,CAA+BJ,CAA/B,KAAqCA,EAAEK,WAAF,IAAiBL,EAAEK,WAAF,CAAcC,IAAd,KAAuB,QAAhG,CAAJ,EAA+G;AAC7G,aAAO,QAAP;AACD;AACD,WAAOL,CAAP;AACD,GAZD;AAaA,MAAIO,SAAS,SAATA,MAAS,CAAUC,IAAV,EAAgB;AAC3B,WAAO,UAAUjD,KAAV,EAAiB;AACtB,aAAOuC,OAAOvC,KAAP,MAAkBiD,IAAzB;AACD,KAFD;AAGD,GAJD;AAKA,MAAIC,UAAUF,OAAO,OAAP,CAAd;AACA,MAAIG,aAAaH,OAAO,UAAP,CAAjB;;AAEA,MAAII,cAAcV,MAAMC,SAAN,CAAgBU,KAAlC;AACA,MAAIC,aAAaZ,MAAMC,SAAN,CAAgBY,IAAjC;AACA,MAAI5B,MAAM,SAANA,GAAM,CAAU6B,EAAV,EAAcC,CAAd,EAAiB;AACzB,QAAIC,MAAMF,GAAGG,MAAb;AACA,QAAIC,IAAI,IAAIlB,KAAJ,CAAUgB,GAAV,CAAR;AACA,SAAK,IAAIG,IAAI,CAAb,EAAgBA,IAAIH,GAApB,EAAyBG,GAAzB,EAA8B;AAC5B,UAAIrB,IAAIgB,GAAGK,CAAH,CAAR;AACAD,QAAEC,CAAF,IAAOJ,EAAEjB,CAAF,EAAKqB,CAAL,CAAP;AACD;AACD,WAAOD,CAAP;AACD,GARD;AASA,MAAIE,UAAU,SAAVA,OAAU,CAAUN,EAAV,EAAc;AAC1B,QAAII,IAAI,EAAR;AACA,SAAK,IAAIC,IAAI,CAAR,EAAWH,MAAMF,GAAGG,MAAzB,EAAiCE,IAAIH,GAArC,EAA0C,EAAEG,CAA5C,EAA+C;AAC7C,UAAI,CAACX,QAAQM,GAAGK,CAAH,CAAR,CAAL,EAAqB;AACnB,cAAM,IAAIxC,KAAJ,CAAU,sBAAsBwC,CAAtB,GAA0B,4BAA1B,GAAyDL,EAAnE,CAAN;AACD;AACDF,iBAAWS,KAAX,CAAiBH,CAAjB,EAAoBJ,GAAGK,CAAH,CAApB;AACD;AACD,WAAOD,CAAP;AACD,GATD;AAUA,MAAI/B,OAAO,SAAPA,IAAO,CAAU2B,EAAV,EAAcC,CAAd,EAAiB;AAC1B,QAAIO,SAASrC,IAAI6B,EAAJ,EAAQC,CAAR,CAAb;AACA,WAAOK,QAAQE,MAAR,CAAP;AACD,GAHD;AAIA,MAAIC,OAAOd,WAAWT,MAAMuB,IAAjB,IAAyBvB,MAAMuB,IAA/B,GAAsC,UAAUzB,CAAV,EAAa;AAC5D,WAAOY,YAAY5C,IAAZ,CAAiBgC,CAAjB,CAAP;AACD,GAFD;;AAIA,MAAI0B,WAAW,SAAXA,QAAW,GAAY;AACzB,QAAIC,iBAAiB,EAArB;AACA,QAAIC,aAAa,EAAjB;AACA,QAAIC,SAAS,EAAb;AACA,QAAIC,iBAAiB,SAAjBA,cAAiB,CAAUC,UAAV,EAAsBC,QAAtB,EAAgC;AACnD,UAAIH,OAAOE,UAAP,CAAJ,EAAwB;AACtBF,eAAOE,UAAP,EAAmBhB,IAAnB,CAAwBiB,QAAxB;AACD,OAFD,MAEO;AACLJ,mBAAWb,IAAX,CAAgBgB,UAAhB;AACAF,eAAOE,UAAP,IAAqB,CAACC,QAAD,CAArB;AACD;AACF,KAPD;AAQA,QAAIC,UAAU,SAAVA,OAAU,CAAUD,QAAV,EAAoB;AAChCL,qBAAeZ,IAAf,CAAoBiB,QAApB;AACD,KAFD;AAGA,QAAIE,YAAY,SAAZA,SAAY,GAAY;AAC1B,UAAIC,aAAa9C,KAAKuC,UAAL,EAAiB,UAAUQ,CAAV,EAAa;AAC7C,YAAIC,QAAQR,OAAOO,CAAP,CAAZ;AACA,eAAOC,MAAMlB,MAAN,KAAiB,CAAjB,GAAqB,EAArB,GAA0B,CAAC;AAC9BmB,iBAAOF,CADuB;AAE9BC,iBAAOA;AAFuB,SAAD,CAAjC;AAID,OANgB,CAAjB;AAOA,aAAOF,WAAWI,MAAX,CAAkBZ,cAAlB,CAAP;AACD,KATD;AAUA,WAAO;AACLG,sBAAgBA,cADX;AAELG,eAASA,OAFJ;AAGLC,iBAAWA;AAHN,KAAP;AAKD,GA9BD;;AAgCA,MAAIM,oBAAoB,SAApBA,iBAAoB,CAAUC,GAAV,EAAe;AACrC,QAAIC,cAAchG,SAASgG,WAA3B;AACA,QAAI,OAAOD,GAAP,KAAe,QAAnB,EAA6B;AAC3BA,YAAMA,IAAIE,OAAJ,CAAY,MAAMD,WAAlB,EAA+B,EAA/B,EAAmCC,OAAnC,CAA2C,MAAMD,WAAjD,EAA8D,EAA9D,CAAN;AACD;AACD,WAAOD,GAAP;AACD,GAND;AAOA,MAAIG,mBAAmB,SAAnBA,gBAAmB,CAAU/F,MAAV,EAAkBgG,IAAlB,EAAwB;AAC7C,QAAIC,WAAWjG,OAAOiG,QAAtB;AAAA,QAAgCC,OAAOD,SAASC,IAAT,KAAkB,KAAlB,GAA0BD,SAASC,IAAT,IAAiB,OAA3C,GAAqD,KAA5F;AACA,QAAIA,IAAJ,EAAU;AACR,UAAIC,UAAUF,SAASG,QAAT,GAAoBpG,OAAOqG,eAAP,CAAuBC,UAAvB,CAAkCL,SAASG,QAA3C,CAApB,GAA2ExG,SAAS2G,OAAT,GAAmB,YAAnB,GAAkCL,IAA3H;AACA,UAAIM,qBAAqB5G,SAAS2G,OAAT,GAAmB,iBAA5C;AACA,aAAOP,SAASG,UAAU,UAAV,IAAwBnG,OAAOyG,MAAP,GAAgB,SAAhB,GAA4B,EAApD,IAA0D,UAAnE,IAAiFT,KAAKU,OAAL,CAAaF,kBAAb,MAAqC,CAAC,CAA9H;AACD;AACD,WAAO,KAAP;AACD,GARD;AASA,MAAIG,gBAAgB,SAAhBA,aAAgB,CAAUhE,MAAV,EAAkB;AACpC,QAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,aAAO,UAAUhC,KAAV,EAAiB;AACtB,eAAOA,MAAM+F,OAAN,CAAc/D,MAAd,MAA0B,CAAC,CAAlC;AACD,OAFD;AAGD,KAJD,MAIO,IAAIA,kBAAkBiE,MAAtB,EAA8B;AACnC,aAAO,UAAUjG,KAAV,EAAiB;AACtB,eAAOgC,OAAOkE,IAAP,CAAYlG,KAAZ,CAAP;AACD,OAFD;AAGD;AACD,WAAOgC,MAAP;AACD,GAXD;AAYA,MAAImE,eAAe,SAAfA,YAAe,CAAU9G,MAAV,EAAkB+G,GAAlB,EAAuBC,UAAvB,EAAmC;AACpD,QAAIC,YAAY,EAAhB;AAAA,QAAoBC,iBAAiB,EAArC;AACA,aAASC,MAAT,CAAgBC,UAAhB,EAA4BC,QAA5B,EAAsC;AACpC,UAAIrB,OAAOoB,WAAWpB,IAAtB;AAAA,UAA4BsB,KAA5B;AACAtB,aAAOL,kBAAkBK,IAAlB,CAAP;AACA,UAAI,CAACA,IAAD,IAAS,CAACgB,WAAWhB,IAAX,EAAiBqB,QAAjB,CAAV,IAAwCtB,iBAAiB/F,MAAjB,EAAyBgG,IAAzB,CAA5C,EAA4E;AAC1E;AACD;AACDlG,eAASyC,IAAT,CAAc6E,WAAWG,OAAzB,EAAkC,UAAUH,UAAV,EAAsB;AACtDD,eAAOC,UAAP,EAAmB,IAAnB;AACD,OAFD;AAGA,UAAI;AACFE,gBAAQF,WAAWI,QAAX,IAAuBJ,WAAWE,KAA1C;AACD,OAFD,CAEE,OAAOG,CAAP,EAAU,CACX;AACD3H,eAASyC,IAAT,CAAc+E,KAAd,EAAqB,UAAUI,OAAV,EAAmB;AACtC,YAAIA,QAAQN,UAAZ,EAAwB;AACtBD,iBAAOO,QAAQN,UAAf,EAA2B,IAA3B;AACD,SAFD,MAEO,IAAIM,QAAQC,YAAZ,EAA0B;AAC/B7H,mBAASyC,IAAT,CAAcmF,QAAQC,YAAR,CAAqBC,KAArB,CAA2B,GAA3B,CAAd,EAA+C,UAAUC,QAAV,EAAoB;AACjEZ,sBAAU/C,IAAV,CAAepE,SAASgI,IAAT,CAAcD,QAAd,CAAf;AACD,WAFD;AAGD;AACF,OARD;AASD;AACD/H,aAASyC,IAAT,CAAcvC,OAAO+H,UAArB,EAAiC,UAAUnC,GAAV,EAAe;AAC9CsB,qBAAetB,GAAf,IAAsB,IAAtB;AACD,KAFD;AAGA,QAAI,CAACoB,UAAL,EAAiB;AACfA,mBAAa,oBAAUhB,IAAV,EAAgBqB,QAAhB,EAA0B;AACrC,eAAOA,YAAYH,eAAelB,IAAf,CAAnB;AACD,OAFD;AAGD;AACD,QAAI;AACFlG,eAASyC,IAAT,CAAcwE,IAAIiB,WAAlB,EAA+B,UAAUZ,UAAV,EAAsB;AACnDD,eAAOC,UAAP;AACD,OAFD;AAGD,KAJD,CAIE,OAAOK,CAAP,EAAU,CACX;AACD,WAAOR,SAAP;AACD,GAxCD;AAyCA,MAAIgB,iCAAiC,SAAjCA,8BAAiC,CAAUjI,MAAV,EAAkB2H,YAAlB,EAAgC;AACnE,QAAIO,MAAJ;AACA,QAAIL,WAAW,2CAA2CM,IAA3C,CAAgDR,YAAhD,CAAf;AACA,QAAI,CAACE,QAAL,EAAe;AACb;AACD;AACD,QAAIO,cAAcP,SAAS,CAAT,CAAlB;AACA,QAAIQ,UAAUR,SAAS,CAAT,EAAYS,MAAZ,CAAmB,CAAnB,EAAsBV,KAAtB,CAA4B,GAA5B,EAAiCW,IAAjC,CAAsC,GAAtC,CAAd;AACA,QAAIC,yBAAyB1I,SAAS2I,OAAT,CAAiB,OAAjB,CAA7B;AACA,QAAIZ,SAAS,CAAT,CAAJ,EAAiB;AACfK,eAAS,EAAEzC,OAAOkC,YAAT,EAAT;AACA,UAAI3H,OAAO0I,MAAP,CAAcC,oBAAd,GAAqCP,WAArC,CAAJ,EAAuD;AACrDF,eAAOU,KAAP,GAAeR,WAAf;AACD,OAFD,MAEO,IAAIpI,OAAO0I,MAAP,CAAcG,gBAAd,GAAiCT,WAAjC,KAAiDI,uBAAuBJ,YAAYU,WAAZ,EAAvB,CAArD,EAAwG;AAC7GZ,eAAOL,QAAP,GAAkBO,WAAlB;AACD,OAFM,MAEA;AACLF,eAAOzB,MAAP,GAAgB2B,WAAhB;AACD;AACF,KATD,MASO,IAAIP,SAAS,CAAT,CAAJ,EAAiB;AACtBK,eAAS;AACPzB,gBAAQ,MADD;AAEPhB,eAAOkC,aAAaW,MAAb,CAAoB,CAApB,CAFA;AAGPD,iBAASA;AAHF,OAAT;AAKD;AACD,QAAI7H,SAAST,kBAAT,CAA4BC,MAA5B,MAAwC,KAA5C,EAAmD;AACjDkI,aAAOG,OAAP,GAAiBA,OAAjB;AACD,KAFD,MAEO;AACLH,aAAOa,UAAP,GAAoB,EAAEC,OAAOX,OAAT,EAApB;AACD;AACD,WAAOH,MAAP;AACD,GA/BD;AAgCA,MAAIe,sBAAsB,SAAtBA,mBAAsB,CAAUjE,MAAV,EAAkB6C,QAAlB,EAA4B;AACpD,WAAO/H,SAASoJ,IAAT,CAAclE,MAAd,EAAsB,UAAUmE,KAAV,EAAiB;AAC5C,aAAO,CAACA,MAAMxG,MAAP,IAAiBwG,MAAMxG,MAAN,CAAakF,QAAb,CAAxB;AACD,KAFM,CAAP;AAGD,GAJD;AAKA,MAAIuB,2BAA2B,SAA3BA,wBAA2B,CAAUpE,MAAV,EAAkB;AAC/C,WAAOlF,SAASwC,GAAT,CAAa0C,MAAb,EAAqB,UAAUmE,KAAV,EAAiB;AAC3C,aAAOrJ,SAASuJ,MAAT,CAAgB,EAAhB,EAAoBF,KAApB,EAA2B;AAChCG,kBAAUH,KADsB;AAEhClC,mBAAW,EAFqB;AAGhCtE,gBAAQgE,cAAcwC,MAAMxG,MAApB,CAHwB;AAIhC4G,cAAM;AACJC,gBAAML,MAAM1D,KADR;AAEJgE,gBAAM;AAFF;AAJ0B,OAA3B,CAAP;AASD,KAVM,CAAP;AAWD,GAZD;AAaA,MAAIC,kBAAkB,SAAlBA,eAAkB,CAAU1J,MAAV,EAAkBmJ,KAAlB,EAAyB;AAC7C,WAAOA,UAAU,IAAV,IAAkB3I,SAASN,qBAAT,CAA+BF,MAA/B,MAA2C,KAApE;AACD,GAFD;AAGA,MAAI2J,mBAAmB,SAAnBA,gBAAmB,CAAU3J,MAAV,EAAkB6H,QAAlB,EAA4BsB,KAA5B,EAAmCS,uBAAnC,EAA4D;AACjF,WAAO,EAAEF,gBAAgB1J,MAAhB,EAAwBmJ,KAAxB,IAAiCtB,YAAY+B,uBAA7C,GAAuE/B,YAAYsB,MAAMlC,SAA3F,CAAP;AACD,GAFD;AAGA,MAAI4C,qBAAqB,SAArBA,kBAAqB,CAAU7J,MAAV,EAAkB6H,QAAlB,EAA4BsB,KAA5B,EAAmCS,uBAAnC,EAA4D;AACnF,QAAIF,gBAAgB1J,MAAhB,EAAwBmJ,KAAxB,CAAJ,EAAoC;AAClCS,8BAAwB/B,QAAxB,IAAoC,IAApC;AACD,KAFD,MAEO;AACLsB,YAAMlC,SAAN,CAAgBY,QAAhB,IAA4B,IAA5B;AACD;AACF,GAND;AAOA,MAAIiC,0BAA0B,SAA1BA,uBAA0B,CAAU9J,MAAV,EAAkB+J,MAAlB,EAA0BlC,QAA1B,EAAoCsB,KAApC,EAA2C;AACvE,QAAIa,iBAAJ;AACA,QAAIb,SAASA,MAAMc,kBAAnB,EAAuC;AACrCD,0BAAoBb,MAAMc,kBAA1B;AACD,KAFD,MAEO,IAAIzJ,SAASL,oBAAT,CAA8BH,MAA9B,CAAJ,EAA2C;AAChDgK,0BAAoBxJ,SAASL,oBAAT,CAA8BH,MAA9B,CAApB;AACD,KAFM,MAEA;AACLgK,0BAAoB,6BAAY;AAC9B,eAAO/B,+BAA+BjI,MAA/B,EAAuC6H,QAAvC,CAAP;AACD,OAFD;AAGD;AACD,WAAOmC,kBAAkB7I,IAAlB,CAAuB4I,MAAvB,EAA+BlC,QAA/B,EAAyCsB,KAAzC,CAAP;AACD,GAZD;AAaA,MAAIe,QAAQ,SAARA,KAAQ,CAAUlK,MAAV,EAAkB;AAC5BA,WAAOmK,EAAP,CAAU,MAAV,EAAkB,UAAU1C,CAAV,EAAa;AAC7B,UAAI2C,QAAQvF,UAAZ;AACA,UAAI+E,0BAA0B,EAA9B;AACA,UAAIS,iBAAiB1D,cAAcnG,SAASJ,iBAAT,CAA2BJ,MAA3B,CAAd,CAArB;AACA,UAAIgF,SAASoE,yBAAyB5I,SAASH,YAAT,CAAsBL,MAAtB,CAAzB,CAAb;AACA,UAAIsK,kBAAkB,SAAlBA,eAAkB,CAAUzC,QAAV,EAAoBsB,KAApB,EAA2B;AAC/C,YAAIQ,iBAAiB3J,MAAjB,EAAyB6H,QAAzB,EAAmCsB,KAAnC,EAA0CS,uBAA1C,CAAJ,EAAwE;AACtEC,6BAAmB7J,MAAnB,EAA2B6H,QAA3B,EAAqCsB,KAArC,EAA4CS,uBAA5C;AACA,cAAI1B,SAAS4B,wBAAwB9J,MAAxB,EAAgCA,OAAOuK,OAAP,CAAeC,SAA/C,EAA0D3C,QAA1D,EAAoEsB,KAApE,CAAb;AACA,cAAIjB,MAAJ,EAAY;AACV,gBAAIuC,aAAavC,OAAOzE,IAAP,IAAe9D,SAAS+K,GAAT,CAAaC,QAAb,EAAhC;AACA3K,mBAAO4K,SAAP,CAAiBC,QAAjB,CAA0BJ,UAA1B,EAAsCvC,MAAtC;AACA,mBAAOpI,SAASuJ,MAAT,CAAgB,EAAhB,EAAoB;AACzB5D,qBAAOyC,OAAOzC,KADW;AAEzByC,sBAAQuC;AAFiB,aAApB,CAAP;AAID;AACF;AACD,eAAO,IAAP;AACD,OAdD;AAeA3K,eAASyC,IAAT,CAAcuE,aAAa9G,MAAb,EAAqBA,OAAO8K,MAAP,EAArB,EAAsCnE,cAAcnG,SAASD,aAAT,CAAuBP,MAAvB,CAAd,CAAtC,CAAd,EAAoG,UAAU6H,QAAV,EAAoB;AACtH,YAAIA,SAASnB,OAAT,CAAiB,OAAjB,MAA8B,CAAC,CAAnC,EAAsC;AACpC,cAAI,CAAC2D,cAAD,IAAmBA,eAAexC,QAAf,CAAvB,EAAiD;AAC/C,gBAAIkD,iBAAiB9B,oBAAoBjE,MAApB,EAA4B6C,QAA5B,CAArB;AACA,gBAAIkD,eAAezG,MAAf,GAAwB,CAA5B,EAA+B;AAC7BxE,uBAASyC,IAAT,CAAcwI,cAAd,EAA8B,UAAU5B,KAAV,EAAiB;AAC7C,oBAAI6B,WAAWV,gBAAgBzC,QAAhB,EAA0BsB,KAA1B,CAAf;AACA,oBAAI6B,QAAJ,EAAc;AACZZ,wBAAMnF,cAAN,CAAqBkE,MAAM1D,KAA3B,EAAkCuF,QAAlC;AACD;AACF,eALD;AAMD,aAPD,MAOO;AACL,kBAAIA,WAAWV,gBAAgBzC,QAAhB,EAA0B,IAA1B,CAAf;AACA,kBAAImD,QAAJ,EAAc;AACZZ,sBAAMhF,OAAN,CAAc4F,QAAd;AACD;AACF;AACF;AACF;AACF,OAnBD;AAoBA,UAAIxF,QAAQ4E,MAAM/E,SAAN,EAAZ;AACArF,aAAOiL,IAAP,CAAY,uBAAZ,EAAqC;AACnCzF,eAAOA,KAD4B;AAEnCM,iBAAS,CAACtF,SAASF,YAAT,CAAsBN,MAAtB;AAFyB,OAArC;AAID,KA7CD;AA8CD,GA/CD;AAgDA,MAAIkL,YAAY;AACdjD,oCAAgCA,8BADlB;AAEdiC,WAAOA;AAFO,GAAhB;;AAKA,MAAIiB,MAAM,SAANA,GAAM,CAAUnL,MAAV,EAAkB;AAC1B,QAAI8J,0BAA0B,SAA1BA,uBAA0B,CAAUnC,YAAV,EAAwB;AACpD,aAAOuD,UAAUjD,8BAAV,CAAyCjI,MAAzC,EAAiD2H,YAAjD,CAAP;AACD,KAFD;AAGA,WAAO,EAAEmC,yBAAyBA,uBAA3B,EAAP;AACD,GALD;AAMA,MAAIsB,MAAM,EAAED,KAAKA,GAAP,EAAV;;AAEA,WAASE,MAAT,GAAmB;AACjB/L,WAAOgM,GAAP,CAAW,WAAX,EAAwB,UAAUtL,MAAV,EAAkB;AACxCkL,gBAAUhB,KAAV,CAAgBlK,MAAhB;AACA,aAAOoL,IAAID,GAAJ,CAAQnL,MAAR,CAAP;AACD,KAHD;AAID;;AAEDqL;AAEH,CA/YA,GAAD","file":"plugin.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n(function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var shouldMergeClasses = function (editor) {\n      return editor.getParam('importcss_merge_classes');\n    };\n    var shouldImportExclusive = function (editor) {\n      return editor.getParam('importcss_exclusive');\n    };\n    var getSelectorConverter = function (editor) {\n      return editor.getParam('importcss_selector_converter');\n    };\n    var getSelectorFilter = function (editor) {\n      return editor.getParam('importcss_selector_filter');\n    };\n    var getCssGroups = function (editor) {\n      return editor.getParam('importcss_groups');\n    };\n    var shouldAppend = function (editor) {\n      return editor.getParam('importcss_append');\n    };\n    var getFileFilter = function (editor) {\n      return editor.getParam('importcss_file_filter');\n    };\n    var Settings = {\n      shouldMergeClasses: shouldMergeClasses,\n      shouldImportExclusive: shouldImportExclusive,\n      getSelectorConverter: getSelectorConverter,\n      getSelectorFilter: getSelectorFilter,\n      getCssGroups: getCssGroups,\n      shouldAppend: shouldAppend,\n      getFileFilter: getFileFilter\n    };\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never,\n        isSome: never,\n        isNone: always,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: constant(null),\n        getOrUndefined: constant(undefined),\n        or: id,\n        orThunk: call,\n        map: none,\n        each: noop,\n        bind: none,\n        exists: never,\n        forall: always,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isArray = isType('array');\n    var isFunction = isType('function');\n\n    var nativeSlice = Array.prototype.slice;\n    var nativePush = Array.prototype.push;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i);\n      }\n      return r;\n    };\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        nativePush.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var from = isFunction(Array.from) ? Array.from : function (x) {\n      return nativeSlice.call(x);\n    };\n\n    var generate = function () {\n      var ungroupedOrder = [];\n      var groupOrder = [];\n      var groups = {};\n      var addItemToGroup = function (groupTitle, itemInfo) {\n        if (groups[groupTitle]) {\n          groups[groupTitle].push(itemInfo);\n        } else {\n          groupOrder.push(groupTitle);\n          groups[groupTitle] = [itemInfo];\n        }\n      };\n      var addItem = function (itemInfo) {\n        ungroupedOrder.push(itemInfo);\n      };\n      var toFormats = function () {\n        var groupItems = bind(groupOrder, function (g) {\n          var items = groups[g];\n          return items.length === 0 ? [] : [{\n              title: g,\n              items: items\n            }];\n        });\n        return groupItems.concat(ungroupedOrder);\n      };\n      return {\n        addItemToGroup: addItemToGroup,\n        addItem: addItem,\n        toFormats: toFormats\n      };\n    };\n\n    var removeCacheSuffix = function (url) {\n      var cacheSuffix = global$3.cacheSuffix;\n      if (typeof url === 'string') {\n        url = url.replace('?' + cacheSuffix, '').replace('&' + cacheSuffix, '');\n      }\n      return url;\n    };\n    var isSkinContentCss = function (editor, href) {\n      var settings = editor.settings, skin = settings.skin !== false ? settings.skin || 'oxide' : false;\n      if (skin) {\n        var skinUrl = settings.skin_url ? editor.documentBaseURI.toAbsolute(settings.skin_url) : global$2.baseURL + '/skins/ui/' + skin;\n        var contentSkinUrlPart = global$2.baseURL + '/skins/content/';\n        return href === skinUrl + '/content' + (editor.inline ? '.inline' : '') + '.min.css' || href.indexOf(contentSkinUrlPart) !== -1;\n      }\n      return false;\n    };\n    var compileFilter = function (filter) {\n      if (typeof filter === 'string') {\n        return function (value) {\n          return value.indexOf(filter) !== -1;\n        };\n      } else if (filter instanceof RegExp) {\n        return function (value) {\n          return filter.test(value);\n        };\n      }\n      return filter;\n    };\n    var getSelectors = function (editor, doc, fileFilter) {\n      var selectors = [], contentCSSUrls = {};\n      function append(styleSheet, imported) {\n        var href = styleSheet.href, rules;\n        href = removeCacheSuffix(href);\n        if (!href || !fileFilter(href, imported) || isSkinContentCss(editor, href)) {\n          return;\n        }\n        global$4.each(styleSheet.imports, function (styleSheet) {\n          append(styleSheet, true);\n        });\n        try {\n          rules = styleSheet.cssRules || styleSheet.rules;\n        } catch (e) {\n        }\n        global$4.each(rules, function (cssRule) {\n          if (cssRule.styleSheet) {\n            append(cssRule.styleSheet, true);\n          } else if (cssRule.selectorText) {\n            global$4.each(cssRule.selectorText.split(','), function (selector) {\n              selectors.push(global$4.trim(selector));\n            });\n          }\n        });\n      }\n      global$4.each(editor.contentCSS, function (url) {\n        contentCSSUrls[url] = true;\n      });\n      if (!fileFilter) {\n        fileFilter = function (href, imported) {\n          return imported || contentCSSUrls[href];\n        };\n      }\n      try {\n        global$4.each(doc.styleSheets, function (styleSheet) {\n          append(styleSheet);\n        });\n      } catch (e) {\n      }\n      return selectors;\n    };\n    var defaultConvertSelectorToFormat = function (editor, selectorText) {\n      var format;\n      var selector = /^(?:([a-z0-9\\-_]+))?(\\.[a-z0-9_\\-\\.]+)$/i.exec(selectorText);\n      if (!selector) {\n        return;\n      }\n      var elementName = selector[1];\n      var classes = selector[2].substr(1).split('.').join(' ');\n      var inlineSelectorElements = global$4.makeMap('a,img');\n      if (selector[1]) {\n        format = { title: selectorText };\n        if (editor.schema.getTextBlockElements()[elementName]) {\n          format.block = elementName;\n        } else if (editor.schema.getBlockElements()[elementName] || inlineSelectorElements[elementName.toLowerCase()]) {\n          format.selector = elementName;\n        } else {\n          format.inline = elementName;\n        }\n      } else if (selector[2]) {\n        format = {\n          inline: 'span',\n          title: selectorText.substr(1),\n          classes: classes\n        };\n      }\n      if (Settings.shouldMergeClasses(editor) !== false) {\n        format.classes = classes;\n      } else {\n        format.attributes = { class: classes };\n      }\n      return format;\n    };\n    var getGroupsBySelector = function (groups, selector) {\n      return global$4.grep(groups, function (group) {\n        return !group.filter || group.filter(selector);\n      });\n    };\n    var compileUserDefinedGroups = function (groups) {\n      return global$4.map(groups, function (group) {\n        return global$4.extend({}, group, {\n          original: group,\n          selectors: {},\n          filter: compileFilter(group.filter),\n          item: {\n            text: group.title,\n            menu: []\n          }\n        });\n      });\n    };\n    var isExclusiveMode = function (editor, group) {\n      return group === null || Settings.shouldImportExclusive(editor) !== false;\n    };\n    var isUniqueSelector = function (editor, selector, group, globallyUniqueSelectors) {\n      return !(isExclusiveMode(editor, group) ? selector in globallyUniqueSelectors : selector in group.selectors);\n    };\n    var markUniqueSelector = function (editor, selector, group, globallyUniqueSelectors) {\n      if (isExclusiveMode(editor, group)) {\n        globallyUniqueSelectors[selector] = true;\n      } else {\n        group.selectors[selector] = true;\n      }\n    };\n    var convertSelectorToFormat = function (editor, plugin, selector, group) {\n      var selectorConverter;\n      if (group && group.selector_converter) {\n        selectorConverter = group.selector_converter;\n      } else if (Settings.getSelectorConverter(editor)) {\n        selectorConverter = Settings.getSelectorConverter(editor);\n      } else {\n        selectorConverter = function () {\n          return defaultConvertSelectorToFormat(editor, selector);\n        };\n      }\n      return selectorConverter.call(plugin, selector, group);\n    };\n    var setup = function (editor) {\n      editor.on('init', function (e) {\n        var model = generate();\n        var globallyUniqueSelectors = {};\n        var selectorFilter = compileFilter(Settings.getSelectorFilter(editor));\n        var groups = compileUserDefinedGroups(Settings.getCssGroups(editor));\n        var processSelector = function (selector, group) {\n          if (isUniqueSelector(editor, selector, group, globallyUniqueSelectors)) {\n            markUniqueSelector(editor, selector, group, globallyUniqueSelectors);\n            var format = convertSelectorToFormat(editor, editor.plugins.importcss, selector, group);\n            if (format) {\n              var formatName = format.name || global$1.DOM.uniqueId();\n              editor.formatter.register(formatName, format);\n              return global$4.extend({}, {\n                title: format.title,\n                format: formatName\n              });\n            }\n          }\n          return null;\n        };\n        global$4.each(getSelectors(editor, editor.getDoc(), compileFilter(Settings.getFileFilter(editor))), function (selector) {\n          if (selector.indexOf('.mce-') === -1) {\n            if (!selectorFilter || selectorFilter(selector)) {\n              var selectorGroups = getGroupsBySelector(groups, selector);\n              if (selectorGroups.length > 0) {\n                global$4.each(selectorGroups, function (group) {\n                  var menuItem = processSelector(selector, group);\n                  if (menuItem) {\n                    model.addItemToGroup(group.title, menuItem);\n                  }\n                });\n              } else {\n                var menuItem = processSelector(selector, null);\n                if (menuItem) {\n                  model.addItem(menuItem);\n                }\n              }\n            }\n          }\n        });\n        var items = model.toFormats();\n        editor.fire('addStyleModifications', {\n          items: items,\n          replace: !Settings.shouldAppend(editor)\n        });\n      });\n    };\n    var ImportCss = {\n      defaultConvertSelectorToFormat: defaultConvertSelectorToFormat,\n      setup: setup\n    };\n\n    var get = function (editor) {\n      var convertSelectorToFormat = function (selectorText) {\n        return ImportCss.defaultConvertSelectorToFormat(editor, selectorText);\n      };\n      return { convertSelectorToFormat: convertSelectorToFormat };\n    };\n    var Api = { get: get };\n\n    function Plugin () {\n      global.add('importcss', function (editor) {\n        ImportCss.setup(editor);\n        return Api.get(editor);\n      });\n    }\n\n    Plugin();\n\n}());\n"]}