{"version":3,"sources":["../../../../../public/js/plugins/toc/plugin.min.js"],"names":["e","n","t","setDisabled","readonly","v","hasHeaders","on","tinymce","util","Tools","resolve","u","l","i","c","getParam","d","test","a","parseInt","s","Date","getTime","toString","f","push","join","m","o","r","$","length","filter","dom","hasClass","parentNode","map","id","level","nodeName","replace","title","text","element","DOM","encode","translate","undoManager","transact","html","insertToc","getParents","insertContent","updateToc","addCommand","g","node","removeAttr","find","attr","children","h","ui","registry","addButton","icon","tooltip","onAction","execCommand","onSetup","addMenuItem","addContextToolbar","items","predicate","is","getBody","contains","scope","position","p","add"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n!function(){\"use strict\";function e(n){return function(t){function e(){return t.setDisabled(n.readonly||!v.hasHeaders(n))}return e(),n.on(\"LoadContent SetContent change\",e),function(){return n.on(\"LoadContent SetContent change\",e)}}}var t=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),u=tinymce.util.Tools.resolve(\"tinymce.dom.DOMUtils\"),l=tinymce.util.Tools.resolve(\"tinymce.util.I18n\"),i=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),c=function(t){return t.getParam(\"toc_class\",\"mce-toc\")},d=function(t){var e=t.getParam(\"toc_header\",\"h2\");return/^h[1-6]$/.test(e)?e:\"h2\"},a=function(t){var e=parseInt(t.getParam(\"toc_depth\",\"3\"),10);return 1<=e&&e<=9?e:3},s=function(e){var n=0;return function(){var t=(new Date).getTime().toString(32);return e+t+(n++).toString(32)}}(\"mcetoc_\"),f=function f(t){var e,n=[];for(e=1;e<=t;e++)n.push(\"h\"+e);return n.join(\",\")},m=function(n){var o=c(n),t=d(n),e=f(a(n)),r=n.$(e);return r.length&&/^h[1-9]$/i.test(t)&&(r=r.filter(function(t,e){return!n.dom.hasClass(e.parentNode,o)})),i.map(r,function(t){return{id:t.id?t.id:s(),level:parseInt(t.nodeName.replace(/^H/i,\"\"),10),title:n.$.text(t),element:t}})},o=function(t){var e,n,o,r,i=\"\",c=m(t),a=function(t){var e,n=9;for(e=0;e<t.length;e++)if(t[e].level<n&&(n=t[e].level),1===n)return n;return n}(c)-1;if(!c.length)return\"\";for(i+=function(t,e){var n=\"</\"+t+\">\";return\"<\"+t+' contenteditable=\"true\">'+u.DOM.encode(e)+n}(d(t),l.translate(\"Table of Contents\")),e=0;e<c.length;e++){if((o=c[e]).element.id=o.id,r=c[e+1]&&c[e+1].level,a===o.level)i+=\"<li>\";else for(n=a;n<o.level;n++)i+=\"<ul><li>\";if(i+='<a href=\"#'+o.id+'\">'+o.title+\"</a>\",r!==o.level&&r)for(n=o.level;r<n;n--)i+=\"</li></ul><li>\";else i+=\"</li>\",r||(i+=\"</ul>\");a=o.level}return i},r=function(t){var e=c(t),n=t.$(\".\"+e);n.length&&t.undoManager.transact(function(){n.html(o(t))})},v={hasHeaders:function(t){return 0<m(t).length},insertToc:function(t){var e=c(t),n=t.$(\".\"+e);!function(t,e){return!e.length||0<t.dom.getParents(e[0],\".mce-offscreen-selection\").length}(t,n)?r(t):t.insertContent(function(t){var e=o(t);return'<div class=\"'+t.dom.encode(c(t))+'\" contenteditable=\"false\">'+e+\"</div>\"}(t))},updateToc:r},n=function(t){t.addCommand(\"mceInsertToc\",function(){v.insertToc(t)}),t.addCommand(\"mceUpdateToc\",function(){v.updateToc(t)})},g=function(t){var n=t.$,o=c(t);t.on(\"PreProcess\",function(t){var e=n(\".\"+o,t.node);e.length&&(e.removeAttr(\"contentEditable\"),e.find(\"[contenteditable]\").removeAttr(\"contentEditable\"))}),t.on(\"SetContent\",function(){var t=n(\".\"+o);t.length&&(t.attr(\"contentEditable\",!1),t.children(\":first-child\").attr(\"contentEditable\",!0))})},h=function(t){t.ui.registry.addButton(\"toc\",{icon:\"toc\",tooltip:\"Table of contents\",onAction:function(){return t.execCommand(\"mceInsertToc\")},onSetup:e(t)}),t.ui.registry.addButton(\"tocupdate\",{icon:\"reload\",tooltip:\"Update\",onAction:function(){return t.execCommand(\"mceUpdateToc\")}}),t.ui.registry.addMenuItem(\"toc\",{icon:\"toc\",text:\"Table of contents\",onAction:function(){return t.execCommand(\"mceInsertToc\")},onSetup:e(t)}),t.ui.registry.addContextToolbar(\"toc\",{items:\"tocupdate\",predicate:function(e){return function(t){return t&&e.dom.is(t,\".\"+c(e))&&e.getBody().contains(t)}}(t),scope:\"node\",position:\"node\"})};!function p(){t.add(\"toc\",function(t){n(t),h(t),g(t)})}()}();"]}