{"version":3,"sources":["../../../../../public/js/plugins/save/plugin.min.js"],"names":["t","n","e","notificationManager","open","text","type","setDisabled","a","isDirty","on","off","tinymce","util","Tools","resolve","o","i","getParam","c","r","u","DOM","getParent","id","save","execCallback","nodeChanged","setDirty","onsubmit","submit","l","trim","startContent","resetContent","s","addCommand","d","ui","registry","addButton","icon","tooltip","disabled","onAction","execCommand","onSetup","addShortcut","m","add"],"mappings":"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","file":"plugin.min.js","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.1.0 (2019-10-17)\n */\n!function(){\"use strict\";function t(n,e){n.notificationManager.open({text:e,type:\"error\"})}function e(t){return function(n){function e(){n.setDisabled(a(t)&&!t.isDirty())}return t.on(\"NodeChange dirty\",e),function(){return t.off(\"NodeChange dirty\",e)}}}var n=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),o=tinymce.util.Tools.resolve(\"tinymce.dom.DOMUtils\"),i=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),a=function(n){return n.getParam(\"save_enablewhendirty\",!0)},c=function(n){return!!n.getParam(\"save_onsavecallback\")},r=function(n){return!!n.getParam(\"save_oncancelcallback\")},u=function(n){var e;if(e=o.DOM.getParent(n.id,\"form\"),!a(n)||n.isDirty()){if(n.save(),c(n))return n.execCallback(\"save_onsavecallback\",n),void n.nodeChanged();e?(n.setDirty(!1),e.onsubmit&&!e.onsubmit()||(\"function\"==typeof e.submit?e.submit():t(n,\"Error: Form submit field collision.\")),n.nodeChanged()):t(n,\"Error: No form element found.\")}},l=function(n){var e=i.trim(n.startContent);r(n)?n.execCallback(\"save_oncancelcallback\",n):n.resetContent(e)},s=function(n){n.addCommand(\"mceSave\",function(){u(n)}),n.addCommand(\"mceCancel\",function(){l(n)})},d=function(n){n.ui.registry.addButton(\"save\",{icon:\"save\",tooltip:\"Save\",disabled:!0,onAction:function(){return n.execCommand(\"mceSave\")},onSetup:e(n)}),n.ui.registry.addButton(\"cancel\",{icon:\"cancel\",tooltip:\"Cancel\",disabled:!0,onAction:function(){return n.execCommand(\"mceCancel\")},onSetup:e(n)}),n.addShortcut(\"Meta+S\",\"\",\"mceSave\")};!function m(){n.add(\"save\",function(n){d(n),s(n)})}()}();"]}